{
    "files": {
        "config.js": "export default {\n\tname: \"Finder\",\n\tdescription: \"Constellation's Default Files Explorer\",\n\tcategory: \"Productivity\",\n\tauthor: \"ThatBeaverDev\",\n\tversion: 1\n};\n",
        "tcpsys/app.sjs": "export default class finder extends Application {\n\ttextWidth(text) {\n\t\treturn this.renderer.getTextWidth(text, 15, \"monospace\");\n\t}\n\n\twriteText(text) {\n\t\tthis.renderer.text(this.x, 3, text);\n\n\t\t// padding\n\t\tthis.x += this.textWidth(text);\n\t\tthis.x += this.padding;\n\t}\n\n\tdrawIcon(name) {\n\t\tthis.renderer.icon(this.x, 0, name);\n\n\t\t// padding\n\t\tthis.x += 24;\n\t\tthis.x += this.padding;\n\t}\n\n\tdrawButton(text, callback) {\n\t\tthis.renderer.button(this.x, 3, text, callback);\n\n\t\t// padding\n\t\tthis.x += this.textWidth(text);\n\t\tthis.x += this.padding;\n\t}\n\n\tasync init() {\n\t\tthis.padding = 1;\n\n\t\tawait this.cd(\"/\");\n\n\t\tthis.renderer.window.rename(\"Finder\");\n\n\t\tthis.keyLocations = {\n\t\t\tConstellation: \"/\",\n\t\t\tSystem: \"/System\",\n\t\t\tUsers: \"/Users\"\n\t\t};\n\t}\n\n\tkeydown(key, cmd, opt, ctrl) {\n\t\tswitch (key) {\n\t\t\tcase \"KeyG\":\n\t\t\t\tif (opt) {\n\t\t\t\t\t// select directory prompt\n\t\t\t\t\tthis.cd(prompt(\"Select a directory\"));\n\t\t\t\t}\n\t\t}\n\t}\n\n\tasync directoryIcon(directory) {\n\t\tconst stats = await this.os.fs.stat(directory);\n\t\tconst isDir = await stats.isDirectory();\n\n\t\tif (isDir) {\n\t\t\treturn \"folder\";\n\t\t}\n\n\t\tif (directory.split(\".\").length == 1) {\n\t\t\t// no file extension\n\t\t\treturn \"file\";\n\t\t}\n\n\t\tconst extension = directory.textAfterAll(\".\");\n\n\t\tswitch (extension) {\n\t\t\tcase \"asm\":\n\t\t\tcase \"s\":\n\t\t\tcase \"S\":\n\t\t\tcase \"inc\":\n\t\t\tcase \"wla\":\n\t\t\tcase \"SRC\":\n\t\t\t// assembly\n\t\t\tcase \"c\":\n\t\t\tcase \"h\":\n\t\t\t// C\n\t\t\tcase \"C\":\n\t\t\tcase \"cc\":\n\t\t\tcase \"cpp\":\n\t\t\tcase \"cxx\":\n\t\t\tcase \"c++\":\n\t\t\tcase \"H\":\n\t\t\tcase \"hh\":\n\t\t\tcase \"hpp\":\n\t\t\tcase \"hxx\":\n\t\t\tcase \"h++\":\n\t\t\tcase \"cppm\":\n\t\t\tcase \"ixx\":\n\t\t\t// C++\n\t\t\tcase \"cs\":\n\t\t\tcase \"csx\":\n\t\t\t// C#\n\t\t\tcase \"dart\":\n\t\t\t// dart\n\t\t\tcase \"java\":\n\t\t\tcase \"class\":\n\t\t\tcase \"jar\":\n\t\t\tcase \"jmod\":\n\t\t\tcase \"war\":\n\t\t\t// java\n\t\t\tcase \"php\":\n\t\t\tcase \"phar\":\n\t\t\tcase \"phtml\":\n\t\t\tcase \"pht\":\n\t\t\tcase \"phps\":\n\t\t\t// PHP\n\t\t\tcase \"ps1\":\n\t\t\tcase \"ps1xml\":\n\t\t\tcase \"pc1c\":\n\t\t\tcase \"pds1\":\n\t\t\tcase \"pdm1\":\n\t\t\tcase \"pssc\":\n\t\t\tcase \"psrc\":\n\t\t\tcase \"cdxml\":\n\t\t\t// powershell\n\t\t\tcase \"rb\":\n\t\t\tcase \"ru\":\n\t\t\t// ruby\n\t\t\tcase \"rs\":\n\t\t\tcase \"rlib\":\n\t\t\t// rust\n\t\t\tcase \"go\":\n\t\t\t// go\n\t\t\tcase \"zig\":\n\t\t\tcase \"zir\":\n\t\t\tcase \"zigr\":\n\t\t\tcase \"zon\":\n\t\t\t// zig\n\t\t\tcase \"py\":\n\t\t\tcase \"pyw\":\n\t\t\tcase \"pyz\":\n\t\t\tcase \"pyi\":\n\t\t\tcase \"pyc\":\n\t\t\tcase \"pyd\":\n\t\t\t// python\n\t\t\tcase \"bat\":\n\t\t\tcase \"cmd\":\n\t\t\tcase \"btm\":\n\t\t\t// windows command prompt\n\t\t\tcase \"js\":\n\t\t\tcase \"mjs\":\n\t\t\tcase \"cjs\":\n\t\t\tcase \"jsx\":\n\t\t\t// javascript\n\t\t\tcase \"ts\":\n\t\t\tcase \"tsx\":\n\t\t\tcase \"mts\":\n\t\t\tcase \"cts\":\n\t\t\t// typescript\n\t\t\tcase \"sh\":\n\t\t\t// shell\n\t\t\tcase \"lua\":\n\t\t\t// lua\n\t\t\tcase \"kt\":\n\t\t\tcase \"kts\":\n\t\t\tcase \"kexe\":\n\t\t\tcase \"klib\":\n\t\t\t\t// kotlin\n\t\t\t\treturn \"file-code\";\n\t\t\tcase \"app\":\n\t\t\t// macOS App\n\t\t\tcase \"exe\":\n\t\t\t// windows executable\n\t\t\tcase \"ipa\":\n\t\t\t// iOS / iPadOS App\n\t\t\tcase \"apk\":\n\t\t\t\t// Android App\n\t\t\t\treturn \"book-x\";\n\t\t\tcase \"deb\":\n\t\t\t// debian packaging format\n\t\t\tcase \"idx\":\n\t\t\t// constellation buildin package format\n\t\t\tcase \"zip\":\n\t\t\tcase \"gz\":\n\t\t\tcase \"tar\":\n\t\t\tcase \"tar.gz\":\n\t\t\t\treturn \"package\";\n\t\t\tcase \"png\":\n\t\t\tcase \"ico\":\n\t\t\tcase \"jpg\":\n\t\t\tcase \"jpeg\":\n\t\t\tcase \"webp\":\n\t\t\tcase \"heic:\":\n\t\t\tcase \"icns\":\n\t\t\tcase \"svg\":\n\t\t\tcase \"avif\":\n\t\t\t\treturn \"file-image\";\n\t\t\tcase \"json\":\n\t\t\t\treturn \"file-json\";\n\t\t\tcase \"mp3\":\n\t\t\tcase \"ogg\":\n\t\t\tcase \"m4a\":\n\t\t\tcase \"flac\":\n\t\t\t\treturn \"file-audio\";\n\t\t\tcase \"mp4\":\n\t\t\tcase \"mov\":\n\t\t\tcase \"webm\":\n\t\t\t\treturn \"file-video\";\n\t\t\tdefault:\n\t\t\t\treturn \"file\";\n\t\t}\n\t}\n\n\tasync cd(directory) {\n\t\tconst oldDir = String(this.directory);\n\n\t\tthis.directory = directory;\n\t\tconst dir = this.directory;\n\t\tif (this.directory == \"/\") {\n\t\t\tthis.location = \"Constellation\";\n\t\t} else {\n\t\t\tthis.location = \"Constellation\" + String(this.directory).replaceAll(\"/\", \" > \");\n\t\t}\n\n\t\tthis.listing = await this.os.fs.readdir(dir);\n\n\t\tif (this.listing == undefined) {\n\t\t\tthis.directory = oldDir;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.listing = [\"..\", ...this.listing].map((name) => {\n\t\t\tconst obj = {};\n\t\t\tobj.name = name;\n\t\t\tobj.path = this.os.fs.relative(this.directory, name);\n\t\t\tobj.icon = this.directoryIcon(obj.path);\n\n\t\t\treturn obj;\n\t\t});\n\t}\n\n\tasync frame() {\n\t\tthis.renderer.clear();\n\n\t\tif (this.listing == undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.renderer.text(0, 10, \"Locations\");\n\t\tlet y = 30;\n\t\tlet maxWidth = 0;\n\t\tfor (const name in this.keyLocations) {\n\t\t\tconst textWidth = this.textWidth(name);\n\t\t\tif (textWidth > maxWidth) {\n\t\t\t\tmaxWidth = textWidth;\n\t\t\t}\n\n\t\t\tthis.renderer.button(0, y, name);\n\t\t\ty += 20;\n\t\t}\n\n\t\tconst bottom = this.renderer.window.dimensions.height;\n\t\tconst right = this.renderer.window.dimensions.width;\n\n\t\tthis.renderer.verticalLine(maxWidth + 10, 0, bottom);\n\t\tthis.renderer.horizontalLine(maxWidth + 10, bottom - 50, right);\n\t\tthis.renderer.text(maxWidth + 15, bottom - 45, this.location);\n\n\t\ty = 10;\n\t\tfor (const obj of this.listing) {\n\t\t\tthis.renderer.icon(maxWidth + 20, y, await obj.icon);\n\t\t\tthis.renderer.button(\n\t\t\t\tmaxWidth + 50,\n\t\t\t\ty,\n\t\t\t\tobj.name,\n\t\t\t\tasync () => {\n\t\t\t\t\t// right click\n\t\t\t\t\tawait this.cd(obj.path);\n\t\t\t\t},\n\t\t\t\tasync () => {\n\t\t\t\t\t// left click\n\t\t\t\t}\n\t\t\t);\n\n\t\t\ty += 25;\n\t\t}\n\n\t\tthis.renderer.commit();\n\t}\n}\n"
    },
    "directories": [
        "resources",
        "tcpsys"
    ]
}