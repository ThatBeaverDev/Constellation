!function t(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.BrowserFS=n():e.BrowserFS=n()}(this,function(){return function(t){let e={};function n(i){if(e[i])return e[i].exports;let r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){(function(t,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let s=n(2),c=n(9),a;(e6=a||(a={}))[e6.EPERM=1]="EPERM",e6[e6.ENOENT=2]="ENOENT",e6[e6.EIO=5]="EIO",e6[e6.EBADF=9]="EBADF",e6[e6.EACCES=13]="EACCES",e6[e6.EBUSY=16]="EBUSY",e6[e6.EEXIST=17]="EEXIST",e6[e6.ENOTDIR=20]="ENOTDIR",e6[e6.EISDIR=21]="EISDIR",e6[e6.EINVAL=22]="EINVAL",e6[e6.EFBIG=27]="EFBIG",e6[e6.ENOSPC=28]="ENOSPC",e6[e6.EROFS=30]="EROFS",e6[e6.ENOTEMPTY=39]="ENOTEMPTY",e6[e6.ENOTSUP=95]="ENOTSUP";let u={};u[a.EPERM]="Operation not permitted.",u[a.ENOENT]="No such file or directory.",u[a.EIO]="Input/output error.",u[a.EBADF]="Bad file descriptor.",u[a.EACCES]="Permission denied.",u[a.EBUSY]="Resource busy or locked.",u[a.EEXIST]="File exists.",u[a.ENOTDIR]="File is not a directory.",u[a.EISDIR]="File is a directory.",u[a.EINVAL]="Invalid argument.",u[a.EFBIG]="File is too big.",u[a.ENOSPC]="No space left on disk.",u[a.EROFS]="Cannot modify a read-only file system.",u[a.ENOTEMPTY]="Directory is not empty.",u[a.ENOTSUP]="Operation is not supported.";let l=function(e){function n(t,n,i){void 0===n&&(n=u[t]),e.call(this,n),this.syscall="",this.errno=t,this.code=a[t],this.path=i,this.stack=new e().stack,this.message="Error: "+this.code+": "+n+(this.path?", '"+this.path+"'":"")}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.fromJSON=function t(e){let i=new n(0);return i.errno=e.errno,i.code=e.code,i.path=e.path,i.stack=e.stack,i.message=e.message,i},n.fromBuffer=function t(e,i){return void 0===i&&(i=0),n.fromJSON(JSON.parse(e.toString("utf8",i+4,i+4+e.readUInt32LE(i))))},n.FileError=function t(e,i){return new n(e,u[e],i)},n.ENOENT=function t(e){return this.FileError(a.ENOENT,e)},n.EEXIST=function t(e){return this.FileError(a.EEXIST,e)},n.EISDIR=function t(e){return this.FileError(a.EISDIR,e)},n.ENOTDIR=function t(e){return this.FileError(a.ENOTDIR,e)},n.EPERM=function t(e){return this.FileError(a.EPERM,e)},n.ENOTEMPTY=function t(e){return this.FileError(a.ENOTEMPTY,e)},n.prototype.toString=function t(){return this.message},n.prototype.toJSON=function t(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},n.prototype.writeToBuffer=function e(n,i){void 0===n&&(n=t.alloc(this.bufferSize())),void 0===i&&(i=0);let r=n.write(JSON.stringify(this.toJSON()),i+4);return n.writeUInt32LE(r,i),n},n.prototype.bufferSize=function e(){return 4+t.byteLength(JSON.stringify(this.toJSON()))},n}(Error),f=Object.freeze({get ErrorCode(){return a},ErrorStrings:u,ApiError:l}),h;(eP=h||(h={}))[eP.NOP=0]="NOP",eP[eP.THROW_EXCEPTION=1]="THROW_EXCEPTION",eP[eP.TRUNCATE_FILE=2]="TRUNCATE_FILE",eP[eP.CREATE_FILE=3]="CREATE_FILE";let p=function t(e){if(this.flagStr=e,0>t.validFlagStrs.indexOf(e))throw new l(a.EINVAL,"Invalid flag: "+e)};p.getFileFlag=function t(e){return p.flagCache.hasOwnProperty(e)?p.flagCache[e]:p.flagCache[e]=new p(e)},p.prototype.getFlagString=function t(){return this.flagStr},p.prototype.isReadable=function t(){return -1!==this.flagStr.indexOf("r")||-1!==this.flagStr.indexOf("+")},p.prototype.isWriteable=function t(){return -1!==this.flagStr.indexOf("w")||-1!==this.flagStr.indexOf("a")||-1!==this.flagStr.indexOf("+")},p.prototype.isTruncating=function t(){return -1!==this.flagStr.indexOf("w")},p.prototype.isAppendable=function t(){return -1!==this.flagStr.indexOf("a")},p.prototype.isSynchronous=function t(){return -1!==this.flagStr.indexOf("s")},p.prototype.isExclusive=function t(){return -1!==this.flagStr.indexOf("x")},p.prototype.pathExistsAction=function t(){return this.isExclusive()?h.THROW_EXCEPTION:this.isTruncating()?h.TRUNCATE_FILE:h.NOP},p.prototype.pathNotExistsAction=function t(){return(this.isWriteable()||this.isAppendable())&&"r+"!==this.flagStr?h.CREATE_FILE:h.THROW_EXCEPTION},p.flagCache={},p.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];let d;(eC=d||(d={}))[eC.FILE=32768]="FILE",eC[eC.DIRECTORY=16384]="DIRECTORY",eC[eC.SYMLINK=40960]="SYMLINK";let y=function t(e,n,i,r,o,s){if(void 0===r&&(r=new Date),void 0===o&&(o=new Date),void 0===s&&(s=new Date),this.size=n,this.atime=r,this.mtime=o,this.ctime=s,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,i)this.mode=i;else switch(e){case d.FILE:this.mode=420;break;case d.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(n/512),this.mode<4096&&(this.mode|=e)};y.fromBuffer=function t(e){let n=e.readUInt32LE(0),i=e.readUInt32LE(4),r=e.readDoubleLE(8),o=e.readDoubleLE(16),s=e.readDoubleLE(24);return new y(61440&i,n,4095&i,new Date(r),new Date(o),new Date(s))},y.prototype.toBuffer=function e(){let n=t.alloc(32);return n.writeUInt32LE(this.size,0),n.writeUInt32LE(this.mode,4),n.writeDoubleLE(this.atime.getTime(),8),n.writeDoubleLE(this.mtime.getTime(),16),n.writeDoubleLE(this.ctime.getTime(),24),n},y.prototype.clone=function t(){return new y(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},y.prototype.isFile=function t(){return(61440&this.mode)===d.FILE},y.prototype.isDirectory=function t(){return(61440&this.mode)===d.DIRECTORY},y.prototype.isSymbolicLink=function t(){return(61440&this.mode)===d.SYMLINK},y.prototype.chmod=function t(e){this.mode=61440&this.mode|e},y.prototype.isSocket=function t(){return!1},y.prototype.isBlockDevice=function t(){return!1},y.prototype.isCharacterDevice=function t(){return!1},y.prototype.isFIFO=function t(){return!1};let $=function(t,e){return t};function g(t){if(t)return t;throw new l(a.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function m(t,e){switch(typeof t){case"number":return t;case"string":var n=parseInt(t,8);if(!isNaN(n))return n;return e;default:return e}}function w(t){if(t instanceof Date)return t;if("number"==typeof t)return new Date(1e3*t);throw new l(a.EINVAL,"Invalid time.")}function _(t){if(t.indexOf("\0")>=0)throw new l(a.EINVAL,"Path must be a string without null bytes.");if(""===t)throw new l(a.EINVAL,"Path must not be empty.");return c.resolve(t)}function S(t,e,n,i){switch(typeof t){case"object":return{encoding:void 0!==t.encoding?t.encoding:e,flag:void 0!==t.flag?t.flag:n,mode:m(t.mode,i)};case"string":return{encoding:t,flag:n,mode:i};default:return{encoding:e,flag:n,mode:i}}}function b(){}let E=function t(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};E.prototype.initialize=function t(e){if(!e.constructor.isAvailable())throw new l(a.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=e},E.prototype._toUnixTimestamp=function t(e){if("number"==typeof e)return e;if(e instanceof Date)return e.getTime()/1e3;throw Error("Cannot parse time: "+e)},E.prototype.getRootFS=function t(){return this.root?this.root:null},E.prototype.rename=function t(e,n,i){void 0===i&&(i=b);let r=$(i,1);try{g(this.root).rename(_(e),_(n),r)}catch(o){r(o)}},E.prototype.renameSync=function t(e,n){g(this.root).renameSync(_(e),_(n))},E.prototype.exists=function t(e,n){void 0===n&&(n=b);let i=$(n,1);try{return g(this.root).exists(_(e),i)}catch(r){return i(!1)}},E.prototype.existsSync=function t(e){try{return g(this.root).existsSync(_(e))}catch(n){return!1}},E.prototype.stat=function t(e,n){void 0===n&&(n=b);let i=$(n,2);try{return g(this.root).stat(_(e),!1,i)}catch(r){return i(r)}},E.prototype.statSync=function t(e){return g(this.root).statSync(_(e),!1)},E.prototype.lstat=function t(e,n){void 0===n&&(n=b);let i=$(n,2);try{return g(this.root).stat(_(e),!0,i)}catch(r){return i(r)}},E.prototype.lstatSync=function t(e){return g(this.root).statSync(_(e),!0)},E.prototype.truncate=function t(e,n,i){void 0===n&&(n=0),void 0===i&&(i=b);let r=0;"function"==typeof n?i=n:"number"==typeof n&&(r=n);let o=$(i,1);try{if(r<0)throw new l(a.EINVAL);return g(this.root).truncate(_(e),r,o)}catch(s){return o(s)}},E.prototype.truncateSync=function t(e,n){if(void 0===n&&(n=0),n<0)throw new l(a.EINVAL);return g(this.root).truncateSync(_(e),n)},E.prototype.unlink=function t(e,n){void 0===n&&(n=b);let i=$(n,1);try{return g(this.root).unlink(_(e),i)}catch(r){return i(r)}},E.prototype.unlinkSync=function t(e){return g(this.root).unlinkSync(_(e))},E.prototype.open=function t(e,n,i,r){let o=this;void 0===r&&(r=b);let s=m(i,420);r="function"==typeof i?i:r;let c=$(r,2);try{g(this.root).open(_(e),p.getFileFlag(n),s,function(t,e){e?c(t,o.getFdForFile(e)):c(t)})}catch(a){c(a)}},E.prototype.openSync=function t(e,n,i){return void 0===i&&(i=420),this.getFdForFile(g(this.root).openSync(_(e),p.getFileFlag(n),m(i,420)))},E.prototype.readFile=function t(e,n,i){void 0===n&&(n={}),void 0===i&&(i=b);let r=S(n,null,"r",null);i="function"==typeof n?n:i;let o=$(i,2);try{let s=p.getFileFlag(r.flag);if(!s.isReadable())return o(new l(a.EINVAL,"Flag passed to readFile must allow for reading."));return g(this.root).readFile(_(e),r.encoding,s,o)}catch(c){return o(c)}},E.prototype.readFileSync=function t(e,n){void 0===n&&(n={});let i=S(n,null,"r",null),r=p.getFileFlag(i.flag);if(!r.isReadable())throw new l(a.EINVAL,"Flag passed to readFile must allow for reading.");return g(this.root).readFileSync(_(e),i.encoding,r)},E.prototype.writeFile=function t(e,n,i,r){void 0===i&&(i={}),void 0===r&&(r=b);let o=S(i,"utf8","w",420);r="function"==typeof i?i:r;let s=$(r,1);try{let c=p.getFileFlag(o.flag);if(!c.isWriteable())return s(new l(a.EINVAL,"Flag passed to writeFile must allow for writing."));return g(this.root).writeFile(_(e),n,o.encoding,c,o.mode,s)}catch(u){return s(u)}},E.prototype.writeFileSync=function t(e,n,i){let r=S(i,"utf8","w",420),o=p.getFileFlag(r.flag);if(!o.isWriteable())throw new l(a.EINVAL,"Flag passed to writeFile must allow for writing.");return g(this.root).writeFileSync(_(e),n,r.encoding,o,r.mode)},E.prototype.appendFile=function t(e,n,i,r){void 0===r&&(r=b);let o=S(i,"utf8","a",420);r="function"==typeof i?i:r;let s=$(r,1);try{let c=p.getFileFlag(o.flag);if(!c.isAppendable())return s(new l(a.EINVAL,"Flag passed to appendFile must allow for appending."));g(this.root).appendFile(_(e),n,o.encoding,c,o.mode,s)}catch(u){s(u)}},E.prototype.appendFileSync=function t(e,n,i){let r=S(i,"utf8","a",420),o=p.getFileFlag(r.flag);if(!o.isAppendable())throw new l(a.EINVAL,"Flag passed to appendFile must allow for appending.");return g(this.root).appendFileSync(_(e),n,r.encoding,o,r.mode)},E.prototype.fstat=function t(e,n){void 0===n&&(n=b);let i=$(n,2);try{this.fd2file(e).stat(i)}catch(r){i(r)}},E.prototype.fstatSync=function t(e){return this.fd2file(e).statSync()},E.prototype.close=function t(e,n){let i=this;void 0===n&&(n=b);let r=$(n,1);try{this.fd2file(e).close(function(t){t||i.closeFd(e),r(t)})}catch(o){r(o)}},E.prototype.closeSync=function t(e){this.fd2file(e).closeSync(),this.closeFd(e)},E.prototype.ftruncate=function t(e,n,i){void 0===i&&(i=b);let r="number"==typeof n?n:0;i="function"==typeof n?n:i;let o=$(i,1);try{let s=this.fd2file(e);if(r<0)throw new l(a.EINVAL);s.truncate(r,o)}catch(c){o(c)}},E.prototype.ftruncateSync=function t(e,n){void 0===n&&(n=0);let i=this.fd2file(e);if(n<0)throw new l(a.EINVAL);i.truncateSync(n)},E.prototype.fsync=function t(e,n){void 0===n&&(n=b);let i=$(n,1);try{this.fd2file(e).sync(i)}catch(r){i(r)}},E.prototype.fsyncSync=function t(e){this.fd2file(e).syncSync()},E.prototype.fdatasync=function t(e,n){void 0===n&&(n=b);let i=$(n,1);try{this.fd2file(e).datasync(i)}catch(r){i(r)}},E.prototype.fdatasyncSync=function t(e){this.fd2file(e).datasyncSync()},E.prototype.write=function e(n,i,r,o,s,c){void 0===c&&(c=b);let u,f,h,p=null;if("string"==typeof i){let d="utf8";switch(typeof r){case"function":c=r;break;case"number":p=r,d="string"==typeof o?o:"utf8",c="function"==typeof s?s:c;break;default:return(c="function"==typeof o?o:"function"==typeof s?s:c)(new l(a.EINVAL,"Invalid arguments."))}u=t.from(i,d),f=0,h=u.length}else u=i,f=r,h=o,p="number"==typeof s?s:null,c="function"==typeof s?s:c;let y=$(c,3);try{let g=this.fd2file(n);null==p&&(p=g.getPos()),g.write(u,f,h,p,y)}catch(m){y(m)}},E.prototype.writeSync=function e(n,i,r,o,s){let c,a=0,u,l;"string"==typeof i?(l="number"==typeof r?r:null,a=0,u=(c=t.from(i,"string"==typeof o?o:"utf8")).length):(c=i,a=r,u=o,l="number"==typeof s?s:null);let f=this.fd2file(n);return null==l&&(l=f.getPos()),f.writeSync(c,a,u,l)},E.prototype.read=function e(n,i,r,o,s,c){void 0===c&&(c=b);let a,u,l,f,h;if("number"==typeof i){l=i,a=r;let p=o;c="function"==typeof s?s:c,u=0,f=t.alloc(l),h=$(function(t,e,n){if(t)return c(t);c(t,n.toString(p),e)},3)}else f=i,u=r,l=o,a=s,h=$(c,3);try{let d=this.fd2file(n);null==a&&(a=d.getPos()),d.read(f,u,l,a,h)}catch(y){h(y)}},E.prototype.readSync=function e(n,i,r,o,s){let c=!1,a,u,l,f,h="utf8";"number"==typeof i?(l=i,f=r,h=o,u=0,a=t.alloc(l),c=!0):(a=i,u=r,l=o,f=s);let p=this.fd2file(n);null==f&&(f=p.getPos());let d=p.readSync(a,u,l,f);return c?[a.toString(h),d]:d},E.prototype.fchown=function t(e,n,i,r){void 0===r&&(r=b);let o=$(r,1);try{this.fd2file(e).chown(n,i,o)}catch(s){o(s)}},E.prototype.fchownSync=function t(e,n,i){this.fd2file(e).chownSync(n,i)},E.prototype.fchmod=function t(e,n,i){let r=$(i,1);try{let o="string"==typeof n?parseInt(n,8):n;this.fd2file(e).chmod(o,r)}catch(s){r(s)}},E.prototype.fchmodSync=function t(e,n){let i="string"==typeof n?parseInt(n,8):n;this.fd2file(e).chmodSync(i)},E.prototype.futimes=function t(e,n,i,r){void 0===r&&(r=b);let o=$(r,1);try{let s=this.fd2file(e);"number"==typeof n&&(n=new Date(1e3*n)),"number"==typeof i&&(i=new Date(1e3*i)),s.utimes(n,i,o)}catch(c){o(c)}},E.prototype.futimesSync=function t(e,n,i){this.fd2file(e).utimesSync(w(n),w(i))},E.prototype.rmdir=function t(e,n){void 0===n&&(n=b);let i=$(n,1);try{e=_(e),g(this.root).rmdir(e,i)}catch(r){i(r)}},E.prototype.rmdirSync=function t(e){return e=_(e),g(this.root).rmdirSync(e)},E.prototype.mkdir=function t(e,n,i){void 0===i&&(i=b),"function"==typeof n&&(i=n,n=511);let r=$(i,1);try{e=_(e),g(this.root).mkdir(e,n,r)}catch(o){r(o)}},E.prototype.mkdirSync=function t(e,n){g(this.root).mkdirSync(_(e),m(n,511))},E.prototype.readdir=function t(e,n){void 0===n&&(n=b);let i=$(n,2);try{e=_(e),g(this.root).readdir(e,i)}catch(r){i(r)}},E.prototype.readdirSync=function t(e){return e=_(e),g(this.root).readdirSync(e)},E.prototype.link=function t(e,n,i){void 0===i&&(i=b);let r=$(i,1);try{e=_(e),n=_(n),g(this.root).link(e,n,r)}catch(o){r(o)}},E.prototype.linkSync=function t(e,n){return e=_(e),n=_(n),g(this.root).linkSync(e,n)},E.prototype.symlink=function t(e,n,i,r){void 0===r&&(r=b);let o="string"==typeof i?i:"file";r="function"==typeof i?i:r;let s=$(r,1);try{if("file"!==o&&"dir"!==o)return s(new l(a.EINVAL,"Invalid type: "+o));e=_(e),n=_(n),g(this.root).symlink(e,n,o,s)}catch(c){s(c)}},E.prototype.symlinkSync=function t(e,n,i){if(i){if("file"!==i&&"dir"!==i)throw new l(a.EINVAL,"Invalid type: "+i)}else i="file";return e=_(e),n=_(n),g(this.root).symlinkSync(e,n,i)},E.prototype.readlink=function t(e,n){void 0===n&&(n=b);let i=$(n,2);try{e=_(e),g(this.root).readlink(e,i)}catch(r){i(r)}},E.prototype.readlinkSync=function t(e){return e=_(e),g(this.root).readlinkSync(e)},E.prototype.chown=function t(e,n,i,r){void 0===r&&(r=b);let o=$(r,1);try{e=_(e),g(this.root).chown(e,!1,n,i,o)}catch(s){o(s)}},E.prototype.chownSync=function t(e,n,i){e=_(e),g(this.root).chownSync(e,!1,n,i)},E.prototype.lchown=function t(e,n,i,r){void 0===r&&(r=b);let o=$(r,1);try{e=_(e),g(this.root).chown(e,!0,n,i,o)}catch(s){o(s)}},E.prototype.lchownSync=function t(e,n,i){e=_(e),g(this.root).chownSync(e,!0,n,i)},E.prototype.chmod=function t(e,n,i){void 0===i&&(i=b);let r=$(i,1);try{let o=m(n,-1);if(o<0)throw new l(a.EINVAL,"Invalid mode.");g(this.root).chmod(_(e),!1,o,r)}catch(s){r(s)}},E.prototype.chmodSync=function t(e,n){let i=m(n,-1);if(i<0)throw new l(a.EINVAL,"Invalid mode.");e=_(e),g(this.root).chmodSync(e,!1,i)},E.prototype.lchmod=function t(e,n,i){void 0===i&&(i=b);let r=$(i,1);try{let o=m(n,-1);if(o<0)throw new l(a.EINVAL,"Invalid mode.");g(this.root).chmod(_(e),!0,o,r)}catch(s){r(s)}},E.prototype.lchmodSync=function t(e,n){let i=m(n,-1);if(i<1)throw new l(a.EINVAL,"Invalid mode.");g(this.root).chmodSync(_(e),!0,i)},E.prototype.utimes=function t(e,n,i,r){void 0===r&&(r=b);let o=$(r,1);try{g(this.root).utimes(_(e),w(n),w(i),o)}catch(s){o(s)}},E.prototype.utimesSync=function t(e,n,i){g(this.root).utimesSync(_(e),w(n),w(i))},E.prototype.realpath=function t(e,n,i){void 0===i&&(i=b);let r=$(i="function"==typeof n?n:b,2);try{e=_(e),g(this.root).realpath(e,"object"==typeof n?n:{},r)}catch(o){r(o)}},E.prototype.realpathSync=function t(e,n){return void 0===n&&(n={}),e=_(e),g(this.root).realpathSync(e,n)},E.prototype.watchFile=function t(e,n,i){throw void 0===i&&(i=b),new l(a.ENOTSUP)},E.prototype.unwatchFile=function t(e,n){throw void 0===n&&(n=b),new l(a.ENOTSUP)},E.prototype.watch=function t(e,n,i){throw void 0===i&&(i=b),new l(a.ENOTSUP)},E.prototype.access=function t(e,n,i){throw void 0===i&&(i=b),new l(a.ENOTSUP)},E.prototype.accessSync=function t(e,n){throw new l(a.ENOTSUP)},E.prototype.createReadStream=function t(e,n){throw new l(a.ENOTSUP)},E.prototype.createWriteStream=function t(e,n){throw new l(a.ENOTSUP)},E.prototype.wrapCallbacks=function t(e){$=e},E.prototype.getFdForFile=function t(e){let n=this.nextFd++;return this.fdMap[n]=e,n},E.prototype.fd2file=function t(e){let n=this.fdMap[e];if(n)return n;throw new l(a.EBADF,"Invalid file descriptor.")},E.prototype.closeFd=function t(e){delete this.fdMap[e]},E.Stats=y;let v=new E,k={},I=E.prototype;function F(t,e,n,i,r){return t<e||n<e?t>n?n+1:t+1:i===r?e:e+1}function x(t,e,n){t&&console.warn("["+e+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+e+".Create("+JSON.stringify(n)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}Object.keys(I).forEach(function(t){"function"==typeof v[t]?k[t]=function(){return v[t].apply(v,arguments)}:k[t]=v[t]}),k.changeFSModule=function(t){v=t},k.getFSModule=function(){return v},k.FS=E;let N="undefined"!=typeof navigator&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||-1!==navigator.userAgent.indexOf("Trident")),L="undefined"==typeof window;function R(){throw Error("BFS has reached an impossible code path; please file a bug.")}function O(t,e,n){n.existsSync(t)||(O(c.dirname(t),e,n),n.mkdirSync(t,e))}function T(t){let e=D(t),n=e.byteOffset,i=e.byteLength;return 0===n&&i===e.buffer.byteLength?e.buffer:e.buffer.slice(n,n+i)}function D(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function A(e){return e instanceof t?e:e instanceof Uint8Array?P(e):t.from(e)}function P(e){return e instanceof t?e:0===e.byteOffset&&e.byteLength===e.buffer.byteLength?C(e.buffer):t.from(e.buffer,e.byteOffset,e.byteLength)}function C(e){return t.from(e)}function U(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=t.length),e<0||n<0||n>t.length||e>n)throw TypeError("Invalid slice bounds on buffer of length "+t.length+": ["+e+", "+n+"]");if(0===t.length)return B();{let i=D(t),r=t[0],o=(r+1)%255;return(t[0]=o,i[0]===o)?(i[0]=r,P(i.slice(e,n))):(t[0]=r,P(i.subarray(e,n)))}}let M=null;function B(){return M||(M=t.alloc(0))}function z(e,n){t.isBuffer(e)?n():n(new l(a.EINVAL,"option must be a Buffer."))}function j(t,e,n){let i=t.Options,r=t.Name,o=0,s=!1,c=!1;function u(t){!s&&(t&&(s=!0,n(t)),0==--o&&c&&n())}let f=function(t){if(i.hasOwnProperty(t)){let c=i[t],f=e[t];if(null==f){if(!c.optional){let h=Object.keys(e).filter(function(t){return!(t in i)}).map(function(e){return{str:e,distance:function t(e,n){if(e===n)return 0;if(e.length>n.length){let i=e;e=n,n=i}let r=e.length,o=n.length;for(;r>0&&e.charCodeAt(r-1)===n.charCodeAt(o-1);)r--,o--;let s=0;for(;s<r&&e.charCodeAt(s)===n.charCodeAt(s);)s++;if(r-=s,o-=s,0===r||1===o)return o;let c=Array(r<<1);for(let a=0;a<r;)c[r+a]=e.charCodeAt(s+a),c[a]=++a;let u,l,f,h,p;for(u=0;u+3<o;){let d=n.charCodeAt(s+(l=u)),y=n.charCodeAt(s+(f=u+1)),$=n.charCodeAt(s+(h=u+2)),g=n.charCodeAt(s+(p=u+3)),m=u+=4;for(let w=0;w<r;){let _=c[r+w],S=c[w];l=F(S,l,f,d,_),f=F(l,f,h,y,_),h=F(f,h,p,$,_),m=F(h,p,m,g,_),c[w++]=m,p=h,h=f,f=l,l=S}}let b=0;for(;u<o;){let E=n.charCodeAt(s+(l=u));b=++u;for(let v=0;v<r;v++){let k=c[v];c[v]=b=k<l||b<l?k>b?b+1:k+1:E===c[r+v]?l:l+1,l=k}}return b}(t,e)}}).filter(function(t){return t.distance<5}).sort(function(t,e){return t.distance-e.distance});return s?{}:(s=!0,{v:n(new l(a.EINVAL,"["+r+"] Required option '"+t+"' not provided."+(h.length>0?" You provided unrecognized option '"+h[0].str+"'; perhaps you meant to type '"+t+"'.":"")+"\nOption description: "+c.description))})}}else{let p=!1;if(!(p=Array.isArray(c.type)?-1!==c.type.indexOf(typeof f):typeof f===c.type))return s?{}:(s=!0,{v:n(new l(a.EINVAL,"["+r+"] Value provided for option "+t+" is not the proper type. Expected "+(Array.isArray(c.type)?"one of {"+c.type.join(", ")+"}":c.type)+", but received "+typeof f+"\nOption description: "+c.description))});c.validator&&(o++,c.validator(f,u))}}};for(let h in i){let p=f(h);if(p)return p.v}c=!0,0!==o||s||n()}let V=Object.freeze({deprecationMessage:x,isIE:N,isWebWorker:L,fail:R,mkdirpSync:O,buffer2ArrayBuffer:T,buffer2Uint8array:D,arrayish2Buffer:A,uint8Array2Buffer:P,arrayBuffer2Buffer:C,copyingSlice:U,emptyBuffer:B,bufferValidator:z,checkOptions:j}),q=function t(e){this.fs=e,this.nodefs=e.getNodeFS(),this.FS=e.getFS(),this.PATH=e.getPATH(),this.ERRNO_CODES=e.getERRNO_CODES()};q.prototype.open=function t(e){let n=this.fs.realPath(e.node),i=this.FS;try{i.isFile(e.node.mode)&&(e.nfd=this.nodefs.openSync(n,this.fs.flagsToPermissionString(e.flags)))}catch(r){if(!r.code)throw r;throw new i.ErrnoError(this.ERRNO_CODES[r.code])}},q.prototype.close=function t(e){let n=this.FS;try{n.isFile(e.node.mode)&&e.nfd&&this.nodefs.closeSync(e.nfd)}catch(i){if(!i.code)throw i;throw new n.ErrnoError(this.ERRNO_CODES[i.code])}},q.prototype.read=function t(e,n,i,r,o){try{return this.nodefs.readSync(e.nfd,P(n),i,r,o)}catch(s){throw new this.FS.ErrnoError(this.ERRNO_CODES[s.code])}},q.prototype.write=function t(e,n,i,r,o){try{return this.nodefs.writeSync(e.nfd,P(n),i,r,o)}catch(s){throw new this.FS.ErrnoError(this.ERRNO_CODES[s.code])}},q.prototype.llseek=function t(e,n,i){let r=n;if(1===i)r+=e.position;else if(2===i&&this.FS.isFile(e.node.mode))try{let o=this.nodefs.fstatSync(e.nfd);r+=o.size}catch(s){throw new this.FS.ErrnoError(this.ERRNO_CODES[s.code])}if(r<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return e.position=r,r};let W=function t(e){this.fs=e,this.nodefs=e.getNodeFS(),this.FS=e.getFS(),this.PATH=e.getPATH(),this.ERRNO_CODES=e.getERRNO_CODES()};W.prototype.getattr=function t(e){let n=this.fs.realPath(e),i;try{i=this.nodefs.lstatSync(n)}catch(r){if(!r.code)throw r;throw new this.FS.ErrnoError(this.ERRNO_CODES[r.code])}return{dev:i.dev,ino:i.ino,mode:i.mode,nlink:i.nlink,uid:i.uid,gid:i.gid,rdev:i.rdev,size:i.size,atime:i.atime,mtime:i.mtime,ctime:i.ctime,blksize:i.blksize,blocks:i.blocks}},W.prototype.setattr=function t(e,n){let i=this.fs.realPath(e);try{if(void 0!==n.mode&&(this.nodefs.chmodSync(i,n.mode),e.mode=n.mode),void 0!==n.timestamp){let r=new Date(n.timestamp);this.nodefs.utimesSync(i,r,r)}}catch(o){if(!o.code)throw o;if("ENOTSUP"!==o.code)throw new this.FS.ErrnoError(this.ERRNO_CODES[o.code])}if(void 0!==n.size)try{this.nodefs.truncateSync(i,n.size)}catch(s){if(!s.code)throw s;throw new this.FS.ErrnoError(this.ERRNO_CODES[s.code])}},W.prototype.lookup=function t(e,n){let i=this.PATH.join2(this.fs.realPath(e),n),r=this.fs.getMode(i);return this.fs.createNode(e,n,r)},W.prototype.mknod=function t(e,n,i,r){let o=this.fs.createNode(e,n,i,r),s=this.fs.realPath(o);try{this.FS.isDir(o.mode)?this.nodefs.mkdirSync(s,o.mode):this.nodefs.writeFileSync(s,"",{mode:o.mode})}catch(c){if(!c.code)throw c;throw new this.FS.ErrnoError(this.ERRNO_CODES[c.code])}return o},W.prototype.rename=function t(e,n,i){let r=this.fs.realPath(e),o=this.PATH.join2(this.fs.realPath(n),i);try{this.nodefs.renameSync(r,o),e.name=i,e.parent=n}catch(s){if(!s.code)throw s;throw new this.FS.ErrnoError(this.ERRNO_CODES[s.code])}},W.prototype.unlink=function t(e,n){let i=this.PATH.join2(this.fs.realPath(e),n);try{this.nodefs.unlinkSync(i)}catch(r){if(!r.code)throw r;throw new this.FS.ErrnoError(this.ERRNO_CODES[r.code])}},W.prototype.rmdir=function t(e,n){let i=this.PATH.join2(this.fs.realPath(e),n);try{this.nodefs.rmdirSync(i)}catch(r){if(!r.code)throw r;throw new this.FS.ErrnoError(this.ERRNO_CODES[r.code])}},W.prototype.readdir=function t(e){let n=this.fs.realPath(e);try{let i=this.nodefs.readdirSync(n);return i.push(".",".."),i}catch(r){if(!r.code)throw r;throw new this.FS.ErrnoError(this.ERRNO_CODES[r.code])}},W.prototype.symlink=function t(e,n,i){let r=this.PATH.join2(this.fs.realPath(e),n);try{this.nodefs.symlinkSync(i,r)}catch(o){if(!o.code)throw o;throw new this.FS.ErrnoError(this.ERRNO_CODES[o.code])}},W.prototype.readlink=function t(e){let n=this.fs.realPath(e);try{return this.nodefs.readlinkSync(n)}catch(i){if(!i.code)throw i;throw new this.FS.ErrnoError(this.ERRNO_CODES[i.code])}};let H=function t(e,n,i,r){void 0===e&&(e=self.FS),void 0===n&&(n=self.PATH),void 0===i&&(i=self.ERRNO_CODES),void 0===r&&(r=k),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=r,this.FS=e,this.PATH=n,this.ERRNO_CODES=i,this.node_ops=new W(this),this.stream_ops=new q(this)};H.prototype.mount=function t(e){return this.createNode(null,"/",this.getMode(e.opts.root),0)},H.prototype.createNode=function t(e,n,i,r){let o=this.FS;if(!o.isDir(i)&&!o.isFile(i)&&!o.isLink(i))throw new o.ErrnoError(this.ERRNO_CODES.EINVAL);let s=o.createNode(e,n,i);return s.node_ops=this.node_ops,s.stream_ops=this.stream_ops,s},H.prototype.getMode=function t(e){let n;try{n=this.nodefs.lstatSync(e)}catch(i){if(!i.code)throw i;throw new this.FS.ErrnoError(this.ERRNO_CODES[i.code])}return n.mode},H.prototype.realPath=function t(e){let n=[];for(;e.parent!==e;)n.push(e.name),e=e.parent;return n.push(e.mount.opts.root),n.reverse(),this.PATH.join.apply(null,n)},H.prototype.flagsToPermissionString=function t(e){let n="string"==typeof e?parseInt(e,10):e;return(n&=8191)in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[n]:e},H.prototype.getNodeFS=function t(){return this.nodefs},H.prototype.getFS=function t(){return this.FS},H.prototype.getPATH=function t(){return this.PATH},H.prototype.getERRNO_CODES=function t(){return this.ERRNO_CODES};let Z=function t(){};Z.prototype.supportsLinks=function t(){return!1},Z.prototype.diskSpace=function t(e,n){n(0,0)},Z.prototype.openFile=function t(e,n,i){throw new l(a.ENOTSUP)},Z.prototype.createFile=function t(e,n,i,r){throw new l(a.ENOTSUP)},Z.prototype.open=function t(e,n,i,r){let o=this,s=function(t,s){if(t)switch(n.pathNotExistsAction()){case h.CREATE_FILE:return o.stat(c.dirname(e),!1,function(t,s){t?r(t):s&&!s.isDirectory()?r(l.ENOTDIR(c.dirname(e))):o.createFile(e,n,i,r)});case h.THROW_EXCEPTION:return r(l.ENOENT(e));default:return r(new l(a.EINVAL,"Invalid FileFlag object."))}else{if(s&&s.isDirectory())return r(l.EISDIR(e));switch(n.pathExistsAction()){case h.THROW_EXCEPTION:return r(l.EEXIST(e));case h.TRUNCATE_FILE:return o.openFile(e,n,function(t,e){t?r(t):e?e.truncate(0,function(){e.sync(function(){r(null,e)})}):R()});case h.NOP:return o.openFile(e,n,r);default:return r(new l(a.EINVAL,"Invalid FileFlag object."))}}};this.stat(e,!1,s)},Z.prototype.rename=function t(e,n,i){i(new l(a.ENOTSUP))},Z.prototype.renameSync=function t(e,n){throw new l(a.ENOTSUP)},Z.prototype.stat=function t(e,n,i){i(new l(a.ENOTSUP))},Z.prototype.statSync=function t(e,n){throw new l(a.ENOTSUP)},Z.prototype.openFileSync=function t(e,n,i){throw new l(a.ENOTSUP)},Z.prototype.createFileSync=function t(e,n,i){throw new l(a.ENOTSUP)},Z.prototype.openSync=function t(e,n,i){let r;try{r=this.statSync(e,!1)}catch(o){switch(n.pathNotExistsAction()){case h.CREATE_FILE:if(!this.statSync(c.dirname(e),!1).isDirectory())throw l.ENOTDIR(c.dirname(e));return this.createFileSync(e,n,i);case h.THROW_EXCEPTION:throw l.ENOENT(e);default:throw new l(a.EINVAL,"Invalid FileFlag object.")}}if(r.isDirectory())throw l.EISDIR(e);switch(n.pathExistsAction()){case h.THROW_EXCEPTION:throw l.EEXIST(e);case h.TRUNCATE_FILE:return this.unlinkSync(e),this.createFileSync(e,n,r.mode);case h.NOP:return this.openFileSync(e,n,i);default:throw new l(a.EINVAL,"Invalid FileFlag object.")}},Z.prototype.unlink=function t(e,n){n(new l(a.ENOTSUP))},Z.prototype.unlinkSync=function t(e){throw new l(a.ENOTSUP)},Z.prototype.rmdir=function t(e,n){n(new l(a.ENOTSUP))},Z.prototype.rmdirSync=function t(e){throw new l(a.ENOTSUP)},Z.prototype.mkdir=function t(e,n,i){i(new l(a.ENOTSUP))},Z.prototype.mkdirSync=function t(e,n){throw new l(a.ENOTSUP)},Z.prototype.readdir=function t(e,n){n(new l(a.ENOTSUP))},Z.prototype.readdirSync=function t(e){throw new l(a.ENOTSUP)},Z.prototype.exists=function t(e,n){this.stat(e,null,function(t){n(!t)})},Z.prototype.existsSync=function t(e){try{return this.statSync(e,!0),!0}catch(n){return!1}},Z.prototype.realpath=function t(e,n,i){if(this.supportsLinks()){let r=e.split(c.sep);for(let o=0;o<r.length;o++){let s=r.slice(0,o+1);r[o]=c.join.apply(null,s)}}else this.exists(e,function(t){t?i(null,e):i(l.ENOENT(e))})},Z.prototype.realpathSync=function t(e,n){if(this.supportsLinks()){let i=e.split(c.sep);for(let r=0;r<i.length;r++){let o=i.slice(0,r+1);i[r]=c.join.apply(c,o)}return i.join(c.sep)}if(this.existsSync(e))return e;throw l.ENOENT(e)},Z.prototype.truncate=function t(e,n,i){this.open(e,p.getFileFlag("r+"),420,function(t,e){if(t)return i(t);e.truncate(n,function(t){e.close(function(e){i(t||e)})})})},Z.prototype.truncateSync=function t(e,n){let i=this.openSync(e,p.getFileFlag("r+"),420);try{i.truncateSync(n)}catch(r){throw r}finally{i.closeSync()}},Z.prototype.readFile=function e(n,i,r,o){let s=o;this.open(n,r,420,function(e,n){if(e)return o(e);o=function(t,e){n.close(function(n){return t||(t=n),s(t,e)})},n.stat(function(e,r){if(e)return o(e);let s=t.alloc(r.size);n.read(s,0,r.size,0,function(t){if(t)return o(t);if(null===i)return o(t,s);try{o(null,s.toString(i))}catch(e){o(e)}})})})},Z.prototype.readFileSync=function e(n,i,r){let o=this.openSync(n,r,420);try{let s=o.statSync(),c=t.alloc(s.size);if(o.readSync(c,0,s.size,0),o.closeSync(),null===i)return c;return c.toString(i)}finally{o.closeSync()}},Z.prototype.writeFile=function e(n,i,r,o,s,c){let a=c;this.open(n,o,420,function(e,n){if(e)return c(e);c=function(t){n.close(function(e){a(t||e)})};try{"string"==typeof i&&(i=t.from(i,r))}catch(o){return c(o)}n.write(i,0,i.length,0,c)})},Z.prototype.writeFileSync=function e(n,i,r,o,s){let c=this.openSync(n,o,s);try{"string"==typeof i&&(i=t.from(i,r)),c.writeSync(i,0,i.length,0)}finally{c.closeSync()}},Z.prototype.appendFile=function e(n,i,r,o,s,c){let a=c;this.open(n,o,s,function(e,n){if(e)return c(e);c=function(t){n.close(function(e){a(t||e)})},"string"==typeof i&&(i=t.from(i,r)),n.write(i,0,i.length,null,c)})},Z.prototype.appendFileSync=function e(n,i,r,o,s){let c=this.openSync(n,o,s);try{"string"==typeof i&&(i=t.from(i,r)),c.writeSync(i,0,i.length,null)}finally{c.closeSync()}},Z.prototype.chmod=function t(e,n,i,r){r(new l(a.ENOTSUP))},Z.prototype.chmodSync=function t(e,n,i){throw new l(a.ENOTSUP)},Z.prototype.chown=function t(e,n,i,r,o){o(new l(a.ENOTSUP))},Z.prototype.chownSync=function t(e,n,i,r){throw new l(a.ENOTSUP)},Z.prototype.utimes=function t(e,n,i,r){r(new l(a.ENOTSUP))},Z.prototype.utimesSync=function t(e,n,i){throw new l(a.ENOTSUP)},Z.prototype.link=function t(e,n,i){i(new l(a.ENOTSUP))},Z.prototype.linkSync=function t(e,n){throw new l(a.ENOTSUP)},Z.prototype.symlink=function t(e,n,i,r){r(new l(a.ENOTSUP))},Z.prototype.symlinkSync=function t(e,n,i){throw new l(a.ENOTSUP)},Z.prototype.readlink=function t(e,n){n(new l(a.ENOTSUP))},Z.prototype.readlinkSync=function t(e){throw new l(a.ENOTSUP)};let Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.supportsSynch=function t(){return!0},e.prototype.rename=function t(e,n,i){try{this.renameSync(e,n),i()}catch(r){i(r)}},e.prototype.stat=function t(e,n,i){try{i(null,this.statSync(e,n))}catch(r){i(r)}},e.prototype.open=function t(e,n,i,r){try{r(null,this.openSync(e,n,i))}catch(o){r(o)}},e.prototype.unlink=function t(e,n){try{this.unlinkSync(e),n()}catch(i){n(i)}},e.prototype.rmdir=function t(e,n){try{this.rmdirSync(e),n()}catch(i){n(i)}},e.prototype.mkdir=function t(e,n,i){try{this.mkdirSync(e,n),i()}catch(r){i(r)}},e.prototype.readdir=function t(e,n){try{n(null,this.readdirSync(e))}catch(i){n(i)}},e.prototype.chmod=function t(e,n,i,r){try{this.chmodSync(e,n,i),r()}catch(o){r(o)}},e.prototype.chown=function t(e,n,i,r,o){try{this.chownSync(e,n,i,r),o()}catch(s){o(s)}},e.prototype.utimes=function t(e,n,i,r){try{this.utimesSync(e,n,i),r()}catch(o){r(o)}},e.prototype.link=function t(e,n,i){try{this.linkSync(e,n),i()}catch(r){i(r)}},e.prototype.symlink=function t(e,n,i,r){try{this.symlinkSync(e,n,i),r()}catch(o){r(o)}},e.prototype.readlink=function t(e,n){try{n(null,this.readlinkSync(e))}catch(i){n(i)}},e}(Z),X=function t(){};X.prototype.sync=function t(e){e(new l(a.ENOTSUP))},X.prototype.syncSync=function t(){throw new l(a.ENOTSUP)},X.prototype.datasync=function t(e){this.sync(e)},X.prototype.datasyncSync=function t(){return this.syncSync()},X.prototype.chown=function t(e,n,i){i(new l(a.ENOTSUP))},X.prototype.chownSync=function t(e,n){throw new l(a.ENOTSUP)},X.prototype.chmod=function t(e,n){n(new l(a.ENOTSUP))},X.prototype.chmodSync=function t(e){throw new l(a.ENOTSUP)},X.prototype.utimes=function t(e,n,i){i(new l(a.ENOTSUP))},X.prototype.utimesSync=function t(e,n){throw new l(a.ENOTSUP)};let K=function(e){function n(t,n,i,r,o){if(e.call(this),this._pos=0,this._dirty=!1,this._fs=t,this._path=n,this._flag=i,this._stat=r,o?this._buffer=o:this._buffer=B(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getBuffer=function t(){return this._buffer},n.prototype.getStats=function t(){return this._stat},n.prototype.getFlag=function t(){return this._flag},n.prototype.getPath=function t(){return this._path},n.prototype.getPos=function t(){return this._flag.isAppendable()?this._stat.size:this._pos},n.prototype.advancePos=function t(e){return this._pos+=e},n.prototype.setPos=function t(e){return this._pos=e},n.prototype.sync=function t(e){try{this.syncSync(),e()}catch(n){e(n)}},n.prototype.syncSync=function t(){throw new l(a.ENOTSUP)},n.prototype.close=function t(e){try{this.closeSync(),e()}catch(n){e(n)}},n.prototype.closeSync=function t(){throw new l(a.ENOTSUP)},n.prototype.stat=function t(e){try{e(null,this._stat.clone())}catch(n){e(n)}},n.prototype.statSync=function t(){return this._stat.clone()},n.prototype.truncate=function t(e,n){try{this.truncateSync(e),this._flag.isSynchronous()&&!k.getRootFS().supportsSynch()&&this.sync(n),n()}catch(i){return n(i)}},n.prototype.truncateSync=function e(n){if(this._dirty=!0,!this._flag.isWriteable())throw new l(a.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,n>this._buffer.length){let i=t.alloc(n-this._buffer.length,0);this.writeSync(i,0,i.length,this._buffer.length),this._flag.isSynchronous()&&k.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=n;let r=t.alloc(n);this._buffer.copy(r,0,0,n),this._buffer=r,this._flag.isSynchronous()&&k.getRootFS().supportsSynch()&&this.syncSync()},n.prototype.write=function t(e,n,i,r,o){try{o(null,this.writeSync(e,n,i,r),e)}catch(s){o(s)}},n.prototype.writeSync=function e(n,i,r,o){if(this._dirty=!0,null==o&&(o=this.getPos()),!this._flag.isWriteable())throw new l(a.EPERM,"File not opened with a writeable mode.");let s=o+r;if(s>this._stat.size&&(this._stat.size=s,s>this._buffer.length)){let c=t.alloc(s);this._buffer.copy(c),this._buffer=c}let u=n.copy(this._buffer,o,i,i+r);return(this._stat.mtime=new Date,this._flag.isSynchronous())?(this.syncSync(),u):(this.setPos(o+u),u)},n.prototype.read=function t(e,n,i,r,o){try{o(null,this.readSync(e,n,i,r),e)}catch(s){o(s)}},n.prototype.readSync=function t(e,n,i,r){if(!this._flag.isReadable())throw new l(a.EPERM,"File not opened with a readable mode.");null==r&&(r=this.getPos());r+i>this._stat.size&&(i=this._stat.size-r);let o=this._buffer.copy(e,n,r,r+i);return this._stat.atime=new Date,this._pos=r+i,o},n.prototype.chmod=function t(e,n){try{this.chmodSync(e),n()}catch(i){n(i)}},n.prototype.chmodSync=function t(e){if(!this._fs.supportsProps())throw new l(a.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},n.prototype.isDirty=function t(){return this._dirty},n.prototype.resetDirty=function t(){this._dirty=!1},n}(X),G=function(t){function e(e,n,i,r,o){t.call(this,e,n,i,r,o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.sync=function t(e){e()},e.prototype.syncSync=function t(){},e.prototype.close=function t(e){e()},e.prototype.closeSync=function t(){},e}(K),Q=function(t){function e(e,n,i,r,o){t.call(this,e,n,i,r,o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.syncSync=function t(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},e.prototype.closeSync=function t(){this.syncSync()},e}(K),J=function(t){function e(n,i,r){if(void 0===r&&(r=!0),t.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=n,this._async=i,!n.supportsSynch())throw Error("The first argument to AsyncMirror needs to be a synchronous file system.");x(r,e.Name,{sync:"sync file system instance",async:"async file system instance"})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function t(n,i){try{let r=new e(n.sync,n.async,!1);r.initialize(function(t){t?i(t):i(null,r)},!1)}catch(o){i(o)}},e.isAvailable=function t(){return!0},e.prototype.getName=function t(){return e.Name},e.prototype._syncSync=function t(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,p.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},e.prototype.initialize=function t(e,n){let i=this;void 0===n&&(n=!0),n&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");let r=this._initializeCallbacks,o=function(t){i._isInitialized=!t,i._initializeCallbacks=[],r.forEach(function(e){return e(t)})};if(this._isInitialized)e();else if(1===r.push(e)){var s=function(t,e,n){"/"!==t&&i._sync.mkdirSync(t,e),i._async.readdir(t,function(e,i){let r=0;e?n(e):function e(o){o?n(o):r<i.length?(u(c.join(t,i[r]),e),r++):n()}()})},a=function(t,e,n){i._async.readFile(t,null,p.getFileFlag("r"),function(r,o){if(r)n(r);else try{i._sync.writeFileSync(t,o,null,p.getFileFlag("w"),e)}catch(s){r=s}finally{n(r)}})},u=function(t,e){i._async.stat(t,!1,function(n,i){n?e(n):i.isDirectory()?s(t,i.mode,e):a(t,i.mode,e)})};s("/",0,o)}},e.prototype.isReadOnly=function t(){return!1},e.prototype.supportsSynch=function t(){return!0},e.prototype.supportsLinks=function t(){return!1},e.prototype.supportsProps=function t(){return this._sync.supportsProps()&&this._async.supportsProps()},e.prototype.renameSync=function t(e,n){this.checkInitialized(),this._sync.renameSync(e,n),this.enqueueOp({apiMethod:"rename",arguments:[e,n]})},e.prototype.statSync=function t(e,n){return this.checkInitialized(),this._sync.statSync(e,n)},e.prototype.openSync=function t(e,n,i){return this.checkInitialized(),this._sync.openSync(e,n,i).closeSync(),new Q(this,e,n,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,p.getFileFlag("r")))},e.prototype.unlinkSync=function t(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},e.prototype.rmdirSync=function t(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},e.prototype.mkdirSync=function t(e,n){this.checkInitialized(),this._sync.mkdirSync(e,n),this.enqueueOp({apiMethod:"mkdir",arguments:[e,n]})},e.prototype.readdirSync=function t(e){return this.checkInitialized(),this._sync.readdirSync(e)},e.prototype.existsSync=function t(e){return this.checkInitialized(),this._sync.existsSync(e)},e.prototype.chmodSync=function t(e,n,i){this.checkInitialized(),this._sync.chmodSync(e,n,i),this.enqueueOp({apiMethod:"chmod",arguments:[e,n,i]})},e.prototype.chownSync=function t(e,n,i,r){this.checkInitialized(),this._sync.chownSync(e,n,i,r),this.enqueueOp({apiMethod:"chown",arguments:[e,n,i,r]})},e.prototype.utimesSync=function t(e,n,i){this.checkInitialized(),this._sync.utimesSync(e,n,i),this.enqueueOp({apiMethod:"utimes",arguments:[e,n,i]})},e.prototype.checkInitialized=function t(){if(!this._isInitialized)throw new l(a.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},e.prototype.enqueueOp=function t(e){let n=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;let i=function(t){if(t&&console.error("WARNING: File system has desynchronized. Received following error: "+t+"\n$"),n._queue.length>0){let e=n._queue.shift(),r=e.arguments;r.push(i),n._async[e.apiMethod].apply(n._async,r)}else n._queueRunning=!1};i()}},e}(Y);J.Name="AsyncMirror",J.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};let tt=Math.max;function te(t){return t}function tn(t,e){var n,i,r;return n=t,i=e,r=te,i=tt(void 0===i?n.length-1:i,0),function(){let t=arguments,e=-1,o=tt(t.length-i,0),s=Array(o);for(;++e<o;)s[e]=t[i+e];e=-1;let c=Array(i+1);for(;++e<i;)c[e]=t[e];return c[i]=r(s),function t(e,n,i){switch(i.length){case 0:return e.call(n);case 1:return e.call(n,i[0]);case 2:return e.call(n,i[0],i[1]);case 3:return e.call(n,i[0],i[1],i[2])}return e.apply(n,i)}(n,this,c)}}let ti=function(t){return tn(function(e){let n=e.pop();t.call(this,e,n)})};function tr(t){return tn(function(e,n){let i=ti(function(n,i){let r=this;return t(e,function(t,e){t.apply(r,n.concat(e))},i)});return n.length?i.apply(this,n):i})}let to="object"==typeof i&&i&&i.Object===Object&&i,ts="object"==typeof self&&self&&self.Object===Object&&self,tc=to||ts||Function("return this")(),ta=tc.Symbol,tu=Object.prototype,tl=tu.hasOwnProperty,tf=tu.toString,th=ta?ta.toStringTag:void 0,tp=Object.prototype.toString,td=ta?ta.toStringTag:void 0;function ty(t){var e;return null==t?void 0===t?"[object Undefined]":"[object Null]":td&&td in Object(t)?function t(e){let n=tl.call(e,th),i=e[th];try{e[th]=void 0;var r=!0}catch(o){}let s=tf.call(e);return r&&(n?e[th]=i:delete e[th]),s}(t):(e=t,tp.call(e))}function t$(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function tg(t){return null!=t&&t$(t.length)&&!function t(e){var n;let i;if(i=typeof(n=e),null==n||"object"!=i&&"function"!=i)return!1;let r=ty(e);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}(t)}let t8={};function tm(){}function tw(t){return function(){if(null===t)return;let e=t;t=null,e.apply(this,arguments)}}let t_="function"==typeof Symbol&&Symbol.iterator;function tS(t){return null!=t&&"object"==typeof t}function tb(t){return tS(t)&&"[object Arguments]"==ty(t)}let tE=Object.prototype,t0=tE.hasOwnProperty,tv=tE.propertyIsEnumerable,tk=tb(function(){return arguments}())?tb:function(t){return tS(t)&&t0.call(t,"callee")&&!tv.call(t,"callee")},tI=Array.isArray;function tF(){return!1}let tx="object"==typeof e&&e&&!e.nodeType&&e,tN=tx&&"object"==typeof r&&r&&!r.nodeType&&r,tL=tN&&tN.exports===tx?tc.Buffer:void 0,tR=(tL?tL.isBuffer:void 0)||tF,tO=/^(?:0|[1-9]\d*)$/;function tT(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||tO.test(t))&&t>-1&&t%1==0&&t<e}let t3={};t3["[object Float32Array]"]=t3["[object Float64Array]"]=t3["[object Int8Array]"]=t3["[object Int16Array]"]=t3["[object Int32Array]"]=t3["[object Uint8Array]"]=t3["[object Uint8ClampedArray]"]=t3["[object Uint16Array]"]=t3["[object Uint32Array]"]=!0,t3["[object Arguments]"]=t3["[object Array]"]=t3["[object ArrayBuffer]"]=t3["[object Boolean]"]=t3["[object DataView]"]=t3["[object Date]"]=t3["[object Error]"]=t3["[object Function]"]=t3["[object Map]"]=t3["[object Number]"]=t3["[object Object]"]=t3["[object RegExp]"]=t3["[object Set]"]=t3["[object String]"]=t3["[object WeakMap]"]=!1;let t1="object"==typeof e&&e&&!e.nodeType&&e,t4=t1&&"object"==typeof r&&r&&!r.nodeType&&r,tD=t4&&t4.exports===t1&&to.process,tA=function(){try{return tD&&tD.binding&&tD.binding("util")}catch(t){}}(),t2=tA&&tA.isTypedArray,t6=t2?(eU=t2,function(t){return eU(t)}):function t(e){return tS(e)&&t$(e.length)&&!!t3[ty(e)]},tP=Object.prototype.hasOwnProperty,tC=Object.prototype,tU=(eM=Object.keys,eB=Object,function(t){return eM(eB(t))}),tM=Object.prototype.hasOwnProperty;function tB(t){return tg(t)?function t(e,n){let i=tI(e),r=!i&&tk(e),o=!i&&!r&&tR(e),s=!i&&!r&&!o&&t6(e),c=i||r||o||s,a=c?function t(e,n){let i=-1,r=Array(e);for(;++i<e;)r[i]=n(i);return r}(e.length,String):[],u=a.length;for(let l in e)tP.call(e,l)&&!(c&&("length"==l||o&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||tT(l,u)))&&a.push(l);return a}(t):function t(e){var n;let i;if(i=(n=e)&&n.constructor,n!==("function"==typeof i&&i.prototype||tC))return tU(e);let r=[];for(let o in Object(e))tM.call(e,o)&&"constructor"!=o&&r.push(o);return r}(t)}function tz(t){return function(){if(null===t)throw Error("Callback was already called.");let e=t;t=null,e.apply(this,arguments)}}function tj(t){return function(e,n,i){if(i=tw(i||tm),t<=0||!e)return i(null);let r=function t(e){var n,i,r,o;if(tg(e)){let s,c;return r=e,s=-1,c=r.length,function t(){return++s<c?{value:r[s],key:s}:null}}let a=(n=e,t_&&n[t_]&&n[t_]()),u,l,f,h;return a?(i=a,u=-1,function t(){let e=i.next();return e.done?null:(u++,{value:e.value,key:u})}):(o=e,l=tB(o),f=-1,h=l.length,function t(){let e=l[++f];return f<h?{value:o[e],key:e}:null})}(e),o=!1,s=0;function c(t,e){if(s-=1,t)o=!0,i(t);else{if(e===t8||o&&s<=0)return o=!0,i(null);a()}}function a(){for(;s<t&&!o;){let e=r();if(null===e){o=!0,s<=0&&i(null);return}s+=1,n(e.value,e.key,tz(c))}}a()}}function t5(t,e,n,i){tj(e)(t,n,i)}function t7(t,e){return function(n,i,r){return t(n,e,i,r)}}function tV(t,e,n){n=tw(n||tm);let i=0,r=0,o=t.length;function s(t,e){t?n(t):(++r===o||e===t8)&&n(null)}for(0===o&&n(null);i<o;i++)e(t[i],i,tz(s))}let tq=t7(t5,1/0),tW=function(t,e,n){(tg(t)?tV:tq)(t,e,n)};function tH(t,e,n,i){i=i||tm;let r=[],o=0;t(e=e||[],function(t,e,i){let s=o++;n(t,function(t,e){r[s]=e,i(t)})},function(t){i(t,r)})}let tZ=(ez=tH,function(t,e,n){return ez(tW,t,e,n)});tr(tZ);let tY=(ej=tH,function(t,e,n,i){return ej(tj(e),t,n,i)}),tX=t7(tY,1);tr(tX),tn(function(t,e){return tn(function(n){return t.apply(null,e.concat(n))})});let tK=function(t,e,n){let i=-1,r=Object(t),o=n(t),s=o.length;for(;s--;){let c=o[++i];if(!1===e(r[c],c,r))break}return t};function tG(t,e){return t&&tK(t,e,tB)}function tQ(t){return t!=t}function tJ(t,e,n){return e==e?function t(e,n,i){let r=i-1,o=e.length;for(;++r<o;)if(e[r]===n)return r;return -1}(t,e,n):function t(e,n,i,r){let o=e.length,s=i+(r?1:-1);for(;r?s--:++s<o;)if(n(e[s],s,e))return s;return -1}(t,tQ,n)}let t9="\ud800-\udfff",et="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ee="[^"+t9+"]",en="(?:\ud83c[\udde6-\uddff]){2}",ei="[\ud800-\udbff][\udc00-\udfff]";[ee,en,ei].join("|"),[ee+et+"?",et,en,ei,"["+t9+"]"].join("|");let er="function"==typeof setImmediate&&setImmediate,eo="object"==typeof o&&"function"==typeof o.nextTick;function es(t){setTimeout(t,0)}function ec(t){return tn(function(e,n){t(function(){e.apply(null,n)})})}let ea;ea=er?setImmediate:eo?o.nextTick:es,ec(ea);let eu=t7(t5,1),el=tn(function t(e){return tn(function(t){var n,i,r,o;let s=this,c=t[t.length-1];"function"==typeof c?t.pop():c=tm,n=e,i=t,r=function(t,e,n){e.apply(s,t.concat(tn(function(t,e){n(t,e)})))},o=tw(o=function(t,e){c.apply(s,[t].concat(e))}),eu(n,function(t,e,n){r(i,t,function(t,e){i=e,n(t)})},function(t){o(t,i)})})});function ef(t){return tn(function(e,n){e.apply(null,n.concat(tn(function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&function t(e,n){let i=-1,r=null==e?0:e.length;for(;++i<r&&!1!==n(e[i],i,e););return e}(n,function(e){console[t](e)}))})))})}function eh(t,e,n){var i;tW(t,(i=e,function(t,e,n){return i(t,n)}),n)}tn(function(t){return el.apply(null,t.reverse())}),tn(function(t){let e=[null].concat(t);return ti(function(t,n){return n.apply(this,e)})}),ef("dir"),ef("log");let ep;ep=eo?o.nextTick:er?setImmediate:es,ec(ep);let ed,ey=function t(e){this._cache={},this._client=e};ey.prototype.readdir=function t(e,n){let i=this,r=this.getCachedDirInfo(e);this._wrap(function(t){null!==r&&r.contents?i._client.readdir(e,{contentHash:r.stat.contentHash},t):i._client.readdir(e,t)},function(t,o,s,a){t?t.status===Dropbox.ApiError.NO_CONTENT&&null!==r?n(null,r.contents.slice(0)):n(t):(i.updateCachedDirInfo(e,s,o.slice(0)),a.forEach(function(t){i.updateCachedInfo(c.join(e,t.name),t)}),n(null,o))})},ey.prototype.remove=function t(e,n){let i=this;this._wrap(function(t){i._client.remove(e,t)},function(t,r){t||i.updateCachedInfo(e,r),n(t)})},ey.prototype.move=function t(e,n,i){let r=this;this._wrap(function(t){r._client.move(e,n,t)},function(t,o){t||(r.deleteCachedInfo(e),r.updateCachedInfo(n,o)),i(t)})},ey.prototype.stat=function t(e,n){let i=this;this._wrap(function(t){i._client.stat(e,t)},function(t,r){t||i.updateCachedInfo(e,r),n(t,r)})},ey.prototype.readFile=function t(e,n){let i=this,r=this.getCachedFileInfo(e);null!==r&&null!==r.contents?this.stat(e,function(t,o){t?n(t):o.contentHash===r.stat.contentHash?n(t,r.contents.slice(0),r.stat):i.readFile(e,n)}):this._wrap(function(t){i._client.readFile(e,{arrayBuffer:!0},t)},function(t,r,o){t||i.updateCachedInfo(e,o,r.slice(0)),n(t,r,o)})},ey.prototype.writeFile=function t(e,n,i){let r=this;this._wrap(function(t){r._client.writeFile(e,n,t)},function(t,o){t||r.updateCachedInfo(e,o,n.slice(0)),i(t,o)})},ey.prototype.mkdir=function t(e,n){let i=this;this._wrap(function(t){i._client.mkdir(e,t)},function(t,r){t||i.updateCachedInfo(e,r,[]),n(t)})},ey.prototype._wrap=function t(e,n){let i=0,r=function(t){if(t&&3>++i)switch(t.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){e(r)},2e3);break;default:n.apply(null,arguments)}else n.apply(null,arguments)};e(r)},ey.prototype.getCachedInfo=function t(e){return this._cache[e.toLowerCase()]},ey.prototype.putCachedInfo=function t(e,n){this._cache[e.toLowerCase()]=n},ey.prototype.deleteCachedInfo=function t(e){delete this._cache[e.toLowerCase()]},ey.prototype.getCachedDirInfo=function t(e){var n;let i=this.getCachedInfo(e);return(n=i)&&n.stat.isFolder?i:null},ey.prototype.getCachedFileInfo=function t(e){var n;let i=this.getCachedInfo(e);return(n=i)&&n.stat.isFile?i:null},ey.prototype.updateCachedDirInfo=function t(e,n,i){void 0===i&&(i=null);let r=this.getCachedInfo(e);null!==n.contentHash&&(void 0===r||r.stat.contentHash!==n.contentHash)&&this.putCachedInfo(e,{stat:n,contents:i})},ey.prototype.updateCachedFileInfo=function t(e,n,i){void 0===i&&(i=null);let r=this.getCachedInfo(e);null!==n.versionTag&&(void 0===r||r.stat.versionTag!==n.versionTag)&&this.putCachedInfo(e,{stat:n,contents:i})},ey.prototype.updateCachedInfo=function t(e,n,i){var r;(void 0===i&&(i=null),n.isFile&&(null==(r=i)||"object"==typeof r&&"number"==typeof r.byteLength))?this.updateCachedFileInfo(e,n,i):n.isFolder&&Array.isArray(i)&&this.updateCachedDirInfo(e,n,i)};let e$=function(t){function e(e,n,i,r,o){t.call(this,e,n,i,r,o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.sync=function t(e){let n=this;if(this.isDirty()){let i=T(this.getBuffer());this._fs._writeFileStrict(this.getPath(),i,function(t){t||n.resetDirty(),e(t)})}else e()},e.prototype.close=function t(e){this.sync(e)},e}(K),eg=function(t){function e(n,i){void 0===i&&(i=!0),t.call(this),this._client=new ey(n),x(i,e.Name,{client:"authenticated dropbox client instance"}),ed||((ed={})[Dropbox.ApiError.NETWORK_ERROR]=a.EIO,ed[Dropbox.ApiError.INVALID_PARAM]=a.EINVAL,ed[Dropbox.ApiError.INVALID_TOKEN]=a.EPERM,ed[Dropbox.ApiError.OAUTH_ERROR]=a.EPERM,ed[Dropbox.ApiError.NOT_FOUND]=a.ENOENT,ed[Dropbox.ApiError.INVALID_METHOD]=a.EINVAL,ed[Dropbox.ApiError.NOT_ACCEPTABLE]=a.EINVAL,ed[Dropbox.ApiError.CONFLICT]=a.EINVAL,ed[Dropbox.ApiError.RATE_LIMITED]=a.EBUSY,ed[Dropbox.ApiError.SERVER_ERROR]=a.EBUSY,ed[Dropbox.ApiError.OVER_QUOTA]=a.ENOSPC)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function t(n,i){i(null,new e(n.client,!1))},e.isAvailable=function t(){return"undefined"!=typeof Dropbox},e.prototype.getName=function t(){return e.Name},e.prototype.isReadOnly=function t(){return!1},e.prototype.supportsSymlinks=function t(){return!1},e.prototype.supportsProps=function t(){return!1},e.prototype.supportsSynch=function t(){return!1},e.prototype.empty=function t(e){let n=this;this._client.readdir("/",function(t,i){t?e(n.convert(t,"/")):eh(i,function(t,e){let i=c.join("/",t);n._client.remove(i,function(t){e(t?n.convert(t,i):null)})},function(t){t?e(t):e()})})},e.prototype.rename=function t(e,n,i){let r=this;this._client.move(e,n,function(t){t?r._client.stat(n,function(o,s){if(o||s.isFolder){let c=t.response.error.indexOf(e)>-1?e:n;i(r.convert(t,c))}else r._client.remove(n,function(t){t?i(r.convert(t,n)):r.rename(e,n,i)})}):i()})},e.prototype.stat=function t(e,n,i){let r=this;this._client.stat(e,function(t,n){if(t)i(r.convert(t,e));else if(n&&n.isRemoved)i(l.FileError(a.ENOENT,e));else{let o=new y(r._statType(n),n.size);return i(null,o)}})},e.prototype.open=function t(e,n,i,r){let o=this;this._client.readFile(e,function(t,i,s){if(t){if(n.isReadable())r(o.convert(t,e));else{if(t.status===Dropbox.ApiError.NOT_FOUND){var c=new ArrayBuffer(0);return o._writeFileStrict(e,c,function(t,i){if(t)r(t);else{let s=o._makeFile(e,n,i,C(c));r(null,s)}})}return r(o.convert(t,e))}}else{let a;a=null===i?B():C(i);let u=o._makeFile(e,n,s,a);return r(null,u)}})},e.prototype._writeFileStrict=function t(e,n,i){let r=this,o=c.dirname(e);this.stat(o,!1,function(t,s){t?i(l.FileError(a.ENOENT,o)):r._client.writeFile(e,n,function(t,n){t?i(r.convert(t,e)):i(null,n)})})},e.prototype._statType=function t(e){return e.isFile?d.FILE:d.DIRECTORY},e.prototype._makeFile=function t(e,n,i,r){let o=this._statType(i),s=new y(o,i.size);return new e$(this,e,n,s,r)},e.prototype._remove=function t(e,n,i){let r=this;this._client.stat(e,function(t,o){t?n(r.convert(t,e)):o.isFile&&!i?n(l.FileError(a.ENOTDIR,e)):!o.isFile&&i?n(l.FileError(a.EISDIR,e)):r._client.remove(e,function(t){t?n(r.convert(t,e)):n(null)})})},e.prototype.unlink=function t(e,n){this._remove(e,n,!0)},e.prototype.rmdir=function t(e,n){this._remove(e,n,!1)},e.prototype.mkdir=function t(e,n,i){let r=this,o=c.dirname(e);this._client.stat(o,function(t,n){t?i(r.convert(t,o)):r._client.mkdir(e,function(t){t?i(l.FileError(a.EEXIST,e)):i(null)})})},e.prototype.readdir=function t(e,n){let i=this;this._client.readdir(e,function(t,e){return t?n(i.convert(t)):n(null,e)})},e.prototype.convert=function t(e,n){void 0===n&&(n=null);let i=ed[e.status];return(void 0===i&&(i=a.EIO),n)?l.FileError(i,n):new l(i)},e}(Z);function e8(t,e){void 0===e&&(e="");let n=t.errno,i=t.node,r=[];for(;i&&(r.unshift(i.name),i!==i.parent);)i=i.parent;return new l(n,u[n],r.length>0?"/"+r.join("/"):e)}eg.Name="Dropbox",eg.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(t,e){t.isAuthenticated&&t.isAuthenticated()?e():e(new l(a.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};let em=function(t){function e(e,n,i,r){t.call(this),this._fs=e,this._FS=n,this._path=i,this._stream=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPos=function t(){},e.prototype.close=function t(e){let n=null;try{this.closeSync()}catch(i){n=i}finally{e(n)}},e.prototype.closeSync=function t(){try{this._FS.close(this._stream)}catch(e){throw e8(e,this._path)}},e.prototype.stat=function t(e){try{e(null,this.statSync())}catch(n){e(n)}},e.prototype.statSync=function t(){try{return this._fs.statSync(this._path,!1)}catch(e){throw e8(e,this._path)}},e.prototype.truncate=function t(e,n){let i=null;try{this.truncateSync(e)}catch(r){i=r}finally{n(i)}},e.prototype.truncateSync=function t(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(n){throw e8(n,this._path)}},e.prototype.write=function t(e,n,i,r,o){try{o(null,this.writeSync(e,n,i,r),e)}catch(s){o(s)}},e.prototype.writeSync=function t(e,n,i,r){try{let o=D(e);return this._FS.write(this._stream,o,n,i,null===r?void 0:r)}catch(s){throw e8(s,this._path)}},e.prototype.read=function t(e,n,i,r,o){try{o(null,this.readSync(e,n,i,r),e)}catch(s){o(s)}},e.prototype.readSync=function t(e,n,i,r){try{let o=D(e);return this._FS.read(this._stream,o,n,i,null===r?void 0:r)}catch(s){throw e8(s,this._path)}},e.prototype.sync=function t(e){e()},e.prototype.syncSync=function t(){},e.prototype.chown=function t(e,n,i){let r=null;try{this.chownSync(e,n)}catch(o){r=o}finally{i(r)}},e.prototype.chownSync=function t(e,n){try{this._FS.fchown(this._stream.fd,e,n)}catch(i){throw e8(i,this._path)}},e.prototype.chmod=function t(e,n){let i=null;try{this.chmodSync(e)}catch(r){i=r}finally{n(i)}},e.prototype.chmodSync=function t(e){try{this._FS.fchmod(this._stream.fd,e)}catch(n){throw e8(n,this._path)}},e.prototype.utimes=function t(e,n,i){let r=null;try{this.utimesSync(e,n)}catch(o){r=o}finally{i(r)}},e.prototype.utimesSync=function t(e,n){this._fs.utimesSync(this._path,e,n)},e}(X),ew=function(e){function n(t){e.call(this),this._FS=t}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.Create=function t(e,i){i(null,new n(e.FS))},n.isAvailable=function t(){return!0},n.prototype.getName=function t(){return this._FS.DB_NAME()},n.prototype.isReadOnly=function t(){return!1},n.prototype.supportsLinks=function t(){return!0},n.prototype.supportsProps=function t(){return!0},n.prototype.supportsSynch=function t(){return!0},n.prototype.renameSync=function t(e,n){try{this._FS.rename(e,n)}catch(i){if(i.errno===a.ENOENT)throw e8(i,this.existsSync(e)?n:e);throw e8(i)}},n.prototype.statSync=function t(e,n){try{let i=n?this._FS.lstat(e):this._FS.stat(e),r=this.modeToFileType(i.mode);return new y(r,i.size,i.mode,i.atime,i.mtime,i.ctime)}catch(o){throw e8(o,e)}},n.prototype.openSync=function t(e,n,i){try{let r=this._FS.open(e,n.getFlagString(),i);if(this._FS.isDir(r.node.mode))throw this._FS.close(r),l.EISDIR(e);return new em(this,this._FS,e,r)}catch(o){throw e8(o,e)}},n.prototype.unlinkSync=function t(e){try{this._FS.unlink(e)}catch(n){throw e8(n,e)}},n.prototype.rmdirSync=function t(e){try{this._FS.rmdir(e)}catch(n){throw e8(n,e)}},n.prototype.mkdirSync=function t(e,n){try{this._FS.mkdir(e,n)}catch(i){throw e8(i,e)}},n.prototype.readdirSync=function t(e){try{return this._FS.readdir(e).filter(function(t){return"."!==t&&".."!==t})}catch(n){throw e8(n,e)}},n.prototype.truncateSync=function t(e,n){try{this._FS.truncate(e,n)}catch(i){throw e8(i,e)}},n.prototype.readFileSync=function t(e,n,i){try{let r=this._FS.readFile(e,{flags:i.getFlagString()}),o=P(r);if(n)return o.toString(n);return o}catch(s){throw e8(s,e)}},n.prototype.writeFileSync=function e(n,i,r,o,s){try{r&&(i=t.from(i,r));let c=D(i);this._FS.writeFile(n,c,{flags:o.getFlagString(),encoding:"binary"}),this._FS.chmod(n,s)}catch(a){throw e8(a,n)}},n.prototype.chmodSync=function t(e,n,i){try{n?this._FS.lchmod(e,i):this._FS.chmod(e,i)}catch(r){throw e8(r,e)}},n.prototype.chownSync=function t(e,n,i,r){try{n?this._FS.lchown(e,i,r):this._FS.chown(e,i,r)}catch(o){throw e8(o,e)}},n.prototype.symlinkSync=function t(e,n,i){try{this._FS.symlink(e,n)}catch(r){throw e8(r)}},n.prototype.readlinkSync=function t(e){try{return this._FS.readlink(e)}catch(n){throw e8(n,e)}},n.prototype.utimesSync=function t(e,n,i){try{this._FS.utime(e,n.getTime(),i.getTime())}catch(r){throw e8(r,e)}},n.prototype.modeToFileType=function t(e){if(this._FS.isDir(e))return d.DIRECTORY;if(this._FS.isFile(e))return d.FILE;if(this._FS.isLink(e))return d.SYMLINK;throw l.EPERM("Invalid mode: "+e)},n}(Y);ew.Name="EmscriptenFileSystem",ew.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};let e_=function(t){function e(e,n){t.call(this),this._folder=e,this._wrapped=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function t(n,i){i(null,new e(n.folder,n.wrapped))},e.isAvailable=function t(){return!0},e.prototype.initialize=function t(e){let n=this;this._wrapped.exists(this._folder,function(t){t?e():n._wrapped.isReadOnly()?e(l.ENOENT(n._folder)):n._wrapped.mkdir(n._folder,511,e)})},e.prototype.getName=function t(){return this._wrapped.getName()},e.prototype.isReadOnly=function t(){return this._wrapped.isReadOnly()},e.prototype.supportsProps=function t(){return this._wrapped.supportsProps()},e.prototype.supportsSynch=function t(){return this._wrapped.supportsSynch()},e.prototype.supportsLinks=function t(){return!1},e}(Z);function eS(t,e){if(null!==e&&"object"==typeof e){let n=e,i=n.path;i&&(i="/"+c.relative(t,i),n.message=n.message.replace(n.path,i),n.path=i)}return e}function eb(t,e,n){return"Sync"!==t.slice(t.length-4)?function(){if(arguments.length>0){var i,r;e&&(arguments[0]=c.join(this._folder,arguments[0])),n&&(arguments[1]=c.join(this._folder,arguments[1])),arguments[arguments.length-1]=(i=this._folder,r=arguments[arguments.length-1],"function"==typeof r?function(t){arguments.length>0&&(arguments[0]=eS(i,t)),r.apply(null,arguments)}:r)}return this._wrapped[t].apply(this._wrapped,arguments)}:function(){try{return e&&(arguments[0]=c.join(this._folder,arguments[0])),n&&(arguments[1]=c.join(this._folder,arguments[1])),this._wrapped[t].apply(this._wrapped,arguments)}catch(i){throw eS(this._folder,i)}}}e_.Name="FolderAdapter",e_.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}},["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(t){e_.prototype[t]=eb(t,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(t){e_.prototype[t]=eb(t,!0,!0)});let eE,e0=eE="undefined"!=typeof window?window:"undefined"!=typeof self?self:i,ev=e0.webkitRequestFileSystem||e0.requestFileSystem||null;function ek(t,e,n){switch(t.name){case"PathExistsError":return l.EEXIST(e);case"QuotaExceededError":return l.FileError(a.ENOSPC,e);case"NotFoundError":return l.ENOENT(e);case"SecurityError":return l.FileError(a.EACCES,e);case"InvalidModificationError":return l.FileError(a.EPERM,e);case"TypeMismatchError":return l.FileError(n?a.ENOTDIR:a.EISDIR,e);default:return l.FileError(a.EINVAL,e)}}let eI=function(t){function e(e,n,i,r,o,s){t.call(this,e,i,r,o,s),this._entry=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.sync=function t(e){let n=this;if(!this.isDirty())return e();this._entry.createWriter(function(t){let i=n.getBuffer(),r=new Blob([T(i)]),o=r.size;t.onwriteend=function(i){t.onwriteend=null,t.onerror=null,t.truncate(o),n.resetDirty(),e()},t.onerror=function(t){e(ek(t,n.getPath(),!1))},t.write(r)})},e.prototype.close=function t(e){this.sync(e)},e}(K),eF=function(t){function e(n,i,r){void 0===n&&(n=5),void 0===i&&(i=e0.PERSISTENT),void 0===r&&(r=!0),t.call(this),this.size=1048576*n,this.type=i,x(r,e.Name,{size:n,type:i})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function t(n,i){let r=new e(n.size,n.type,!1);r.allocate(function(t){return t?i(t):i(null,r)},!1)},e.isAvailable=function t(){return!!ev},e.prototype.getName=function t(){return e.Name},e.prototype.isReadOnly=function t(){return!1},e.prototype.supportsSymlinks=function t(){return!1},e.prototype.supportsProps=function t(){return!1},e.prototype.supportsSynch=function t(){return!1},e.prototype.allocate=function t(e,n){let i=this;void 0===e&&(e=function(){}),void 0===n&&(n=!0),n&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");let r=function(t){i.fs=t,e()},o=function(t){e(ek(t,"/",!0))};this.type===e0.PERSISTENT?function t(e,n,i,r){if(void 0!==navigator.webkitPersistentStorage)switch(e){case e0.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(n,i,r);break;case e0.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(n,i,r);break;default:r(TypeError("Invalid storage type: "+e))}else e0.webkitStorageInfo.requestQuota(e,n,i,r)}(this.type,this.size,function(t){ev(i.type,t,r,o)},o):ev(this.type,this.size,r,o)},e.prototype.empty=function t(e){this._readdir("/",function(t,n){t?(console.error("Failed to empty FS"),e(t)):eh(n,function(t,e){var n;let i=function(){e()},r=function(n){e(ek(n,t.fullPath,!t.isDirectory))};(n=t).isDirectory?t.removeRecursively(i,r):t.remove(i,r)},function(n){t?(console.error("Failed to empty FS"),e(t)):e()})})},e.prototype.rename=function t(e,n,i){let r=this,o=2,s=0,u=this.fs.root,f=e,h=function(t){--o<=0&&i(ek(t,f,!1))},p=function(t){return 2==++s?i(new l(a.EINVAL,"Something was identified as both a file and a directory. This should never happen.")):e===n?i():void(f=c.dirname(n),u.getDirectory(f,{},function(o){f=c.basename(n),t.moveTo(o,f,function(t){i()},function(o){t.isDirectory?(f=n,r.unlink(n,function(t){t?h(o):r.rename(e,n,i)})):h(o)})},h))};u.getFile(e,{},p,h),u.getDirectory(e,{},p,h)},e.prototype.stat=function t(e,n,i){let r=this,o={create:!1},s=function(t){let e=function(t){let e=new y(d.FILE,t.size);i(null,e)};t.file(e,a)},c=function(t){let e=new y(d.DIRECTORY,4096);i(null,e)};var a=function(t){i(ek(t,e,!1))};let u=function(){r.fs.root.getDirectory(e,o,c,a)};this.fs.root.getFile(e,o,s,u)},e.prototype.open=function t(e,n,i,r){let o=this,s=function(t){"InvalidModificationError"===t.name&&n.isExclusive()?r(l.EEXIST(e)):r(ek(t,e,!1))};this.fs.root.getFile(e,{create:n.pathNotExistsAction()===h.CREATE_FILE,exclusive:n.isExclusive()},function(t){t.file(function(i){let c=new FileReader;c.onloadend=function(s){let a=o._makeFile(e,t,n,i,c.result);r(null,a)},c.onerror=function(t){s(c.error)},c.readAsArrayBuffer(i)},s)},s)},e.prototype.unlink=function t(e,n){this._remove(e,n,!0)},e.prototype.rmdir=function t(e,n){let i=this;this.readdir(e,function(t,r){t?n(t):r.length>0?n(l.ENOTEMPTY(e)):i._remove(e,n,!1)})},e.prototype.mkdir=function t(e,n,i){let r=function(t){i()},o=function(t){i(ek(t,e,!0))};this.fs.root.getDirectory(e,{create:!0,exclusive:!0},r,o)},e.prototype.readdir=function t(e,n){this._readdir(e,function(t,e){if(!e)return n(t);{let i=[];for(let r=0,o=e;r<o.length;r+=1){let s=o[r];i.push(s.name)}n(null,i)}})},e.prototype._makeFile=function t(e,n,i,r,o){void 0===o&&(o=new ArrayBuffer(0));let s=new y(d.FILE,r.size),c=C(o);return new eI(this,n,e,i,s,c)},e.prototype._readdir=function t(e,n){let i=function(t){n(ek(t,e,!0))};this.fs.root.getDirectory(e,{create:!1},function(t){let e=t.createReader(),r=[],o=function(){e.readEntries(function(t){if(t.length){var e;r=r.concat((e=t,Array.prototype.slice.call(e||[],0))),o()}else n(null,r)},i)};o()},i)},e.prototype._remove=function t(e,n,i){let r=function(t){let r=function(){n()},o=function(t){n(ek(t,e,!i))};t.remove(r,o)},o=function(t){n(ek(t,e,!i))},s={create:!1};i?this.fs.root.getFile(e,s,r,o):this.fs.root.getDirectory(e,s,r,o)},e}(Z);eF.Name="HTML5FS",eF.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};let ex=function t(e,n,i,r,o,s){this.id=e,this.size=n,this.mode=i,this.atime=r,this.mtime=o,this.ctime=s};ex.fromBuffer=function t(e){if(void 0===e)throw Error("NO");return new ex(e.toString("ascii",30),e.readUInt32LE(0),e.readUInt16LE(4),e.readDoubleLE(6),e.readDoubleLE(14),e.readDoubleLE(22))},ex.prototype.toStats=function t(){return new y((61440&this.mode)===d.DIRECTORY?d.DIRECTORY:d.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},ex.prototype.getSize=function t(){return 30+this.id.length},ex.prototype.toBuffer=function e(n){return void 0===n&&(n=t.alloc(this.getSize())),n.writeUInt32LE(this.size,0),n.writeUInt16LE(this.mode,4),n.writeDoubleLE(this.atime,6),n.writeDoubleLE(this.mtime,14),n.writeDoubleLE(this.ctime,22),n.write(this.id,30,this.id.length,"ascii"),n},ex.prototype.update=function t(e){let n=!1;this.size!==e.size&&(this.size=e.size,n=!0),this.mode!==e.mode&&(this.mode=e.mode,n=!0);let i=e.atime.getTime();this.atime!==i&&(this.atime=i,n=!0);let r=e.mtime.getTime();this.mtime!==r&&(this.mtime=r,n=!0);let o=e.ctime.getTime();return this.ctime!==o&&(this.ctime=o,n=!0),n},ex.prototype.isFile=function t(){return(61440&this.mode)===d.FILE},ex.prototype.isDirectory=function t(){return(61440&this.mode)===d.DIRECTORY};let eN=null;function eL(){return eN||(eN=t.from("{}"))}function eR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function eO(t,e){return!t||(e(t),!1)}function eT(t,e,n){return!t||(e.abort(function(){n(t)}),!1)}let e3=function t(e){this.store=e,this.originalData={},this.modifiedKeys=[]};e3.prototype.get=function t(e){let n=this.store.get(e);return this.stashOldValue(e,n),n},e3.prototype.put=function t(e,n,i){return this.markModified(e),this.store.put(e,n,i)},e3.prototype.del=function t(e){this.markModified(e),this.store.del(e)},e3.prototype.commit=function t(){},e3.prototype.abort=function t(){for(let e=0,n=this.modifiedKeys;e<n.length;e+=1){let i=n[e],r=this.originalData[i];r?this.store.put(i,r,!0):this.store.del(i)}},e3.prototype.stashOldValue=function t(e,n){this.originalData.hasOwnProperty(e)||(this.originalData[e]=n)},e3.prototype.markModified=function t(e){-1!==this.modifiedKeys.indexOf(e)||(this.modifiedKeys.push(e),this.originalData.hasOwnProperty(e)||(this.originalData[e]=this.store.get(e)))};let e1=function(t){function e(e,n,i,r,o){t.call(this,e,n,i,r,o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.syncSync=function t(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},e.prototype.closeSync=function t(){this.syncSync()},e}(K),e4=function(e){function n(t){e.call(this),this.store=t.store,this.makeRootDirectory()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.isAvailable=function t(){return!0},n.prototype.getName=function t(){return this.store.name()},n.prototype.isReadOnly=function t(){return!1},n.prototype.supportsSymlinks=function t(){return!1},n.prototype.supportsProps=function t(){return!1},n.prototype.supportsSynch=function t(){return!0},n.prototype.empty=function t(){this.store.clear(),this.makeRootDirectory()},n.prototype.renameSync=function e(n,i){let r=this.store.beginTransaction("readwrite"),o=c.dirname(n),s=c.basename(n),u=c.dirname(i),f=c.basename(i),h=this.findINode(r,o),p=this.getDirListing(r,o,h);if(!p[s])throw l.ENOENT(n);let d=p[s];if(delete p[s],0===(u+"/").indexOf(n+"/"))throw new l(a.EBUSY,o);let y,$;if(u===o?(y=h,$=p):(y=this.findINode(r,u),$=this.getDirListing(r,u,y)),$[f]){let g=this.getINode(r,i,$[f]);if(g.isFile())try{r.del(g.id),r.del($[f])}catch(m){throw r.abort(),m}else throw l.EPERM(i)}$[f]=d;try{r.put(h.id,t.from(JSON.stringify(p)),!0),r.put(y.id,t.from(JSON.stringify($)),!0)}catch(w){throw r.abort(),w}r.commit()},n.prototype.statSync=function t(e,n){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},n.prototype.createFileSync=function t(e,n,i){let r=this.store.beginTransaction("readwrite"),o=B(),s=this.commitNewFile(r,e,d.FILE,i,o);return new e1(this,e,n,s.toStats(),o)},n.prototype.openFileSync=function t(e,n){let i=this.store.beginTransaction("readonly"),r=this.findINode(i,e),o=i.get(r.id);if(void 0===o)throw l.ENOENT(e);return new e1(this,e,n,r.toStats(),o)},n.prototype.unlinkSync=function t(e){this.removeEntry(e,!1)},n.prototype.rmdirSync=function t(e){if(this.readdirSync(e).length>0)throw l.ENOTEMPTY(e);this.removeEntry(e,!0)},n.prototype.mkdirSync=function e(n,i){let r=this.store.beginTransaction("readwrite"),o=t.from("{}");this.commitNewFile(r,n,d.DIRECTORY,i,o)},n.prototype.readdirSync=function t(e){let n=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(n,e,this.findINode(n,e)))},n.prototype._syncSync=function t(e,n,i){let r=this.store.beginTransaction("readwrite"),o=this._findINode(r,c.dirname(e),c.basename(e)),s=this.getINode(r,e,o),a=s.update(i);try{r.put(s.id,n,!0),a&&r.put(o,s.toBuffer(),!0)}catch(u){throw r.abort(),u}r.commit()},n.prototype.makeRootDirectory=function t(){let e=this.store.beginTransaction("readwrite");if(void 0===e.get("/")){let n=new Date().getTime(),i=new ex(eR(),4096,511|d.DIRECTORY,n,n,n);e.put(i.id,eL(),!1),e.put("/",i.toBuffer(),!1),e.commit()}},n.prototype._findINode=function t(e,n,i){let r=this,o=function(t){let o=r.getDirListing(e,n,t);if(o[i])return o[i];throw l.ENOENT(c.resolve(n,i))};return"/"!==n?o(this.getINode(e,n+c.sep+i,this._findINode(e,c.dirname(n),c.basename(n)))):""===i?"/":o(this.getINode(e,n,"/"))},n.prototype.findINode=function t(e,n){return this.getINode(e,n,this._findINode(e,c.dirname(n),c.basename(n)))},n.prototype.getINode=function t(e,n,i){let r=e.get(i);if(void 0===r)throw l.ENOENT(n);return ex.fromBuffer(r)},n.prototype.getDirListing=function t(e,n,i){if(!i.isDirectory())throw l.ENOTDIR(n);let r=e.get(i.id);if(void 0===r)throw l.ENOENT(n);return JSON.parse(r.toString())},n.prototype.addNewNode=function t(e,n){let i;for(;;)try{return i=eR(),e.put(i,n,!1),i}catch(r){}throw new l(a.EIO,"Unable to commit data to key-value store.")},n.prototype.commitNewFile=function e(n,i,r,o,s){let a=c.dirname(i),u=c.basename(i),f=this.findINode(n,a),h=this.getDirListing(n,a,f),p=new Date().getTime();if("/"===i||h[u])throw l.EEXIST(i);let d;try{let y=this.addNewNode(n,s);d=new ex(y,s.length,o|r,p,p,p);let $=this.addNewNode(n,d.toBuffer());h[u]=$,n.put(f.id,t.from(JSON.stringify(h)),!0)}catch(g){throw n.abort(),g}return n.commit(),d},n.prototype.removeEntry=function e(n,i){let r=this.store.beginTransaction("readwrite"),o=c.dirname(n),s=this.findINode(r,o),a=this.getDirListing(r,o,s),u=c.basename(n);if(!a[u])throw l.ENOENT(n);let f=a[u];delete a[u];let h=this.getINode(r,n,f);if(!i&&h.isDirectory())throw l.EISDIR(n);if(i&&!h.isDirectory())throw l.ENOTDIR(n);try{r.del(h.id),r.del(f),r.put(s.id,t.from(JSON.stringify(a)),!0)}catch(p){throw r.abort(),p}r.commit()},n}(Y),eD=function(t){function e(e,n,i,r,o){t.call(this,e,n,i,r,o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.sync=function t(e){let n=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(t){t||n.resetDirty(),e(t)}):e()},e.prototype.close=function t(e){this.sync(e)},e}(K),eA=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.isAvailable=function t(){return!0},n.prototype.init=function t(e,n){this.store=e,this.makeRootDirectory(n)},n.prototype.getName=function t(){return this.store.name()},n.prototype.isReadOnly=function t(){return!1},n.prototype.supportsSymlinks=function t(){return!1},n.prototype.supportsProps=function t(){return!1},n.prototype.supportsSynch=function t(){return!1},n.prototype.empty=function t(e){let n=this;this.store.clear(function(t){eO(t,e)&&n.makeRootDirectory(e)})},n.prototype.rename=function e(n,i,r){let o=this,s=this.store.beginTransaction("readwrite"),u=c.dirname(n),f=c.basename(n),h=c.dirname(i),p=c.basename(i),d={},y={},$=!1;if(0===(h+"/").indexOf(n+"/"))return r(new l(a.EBUSY,u));let g=function(){if($||!y.hasOwnProperty(u)||!y.hasOwnProperty(h))return;let e=y[u],c=d[u],a=y[h],g=d[h];if(e[f]){let m=e[f];delete e[f];let w=function(){a[p]=m,s.put(c.id,t.from(JSON.stringify(e)),!0,function(e){eT(e,s,r)&&(u===h?s.commit(r):s.put(g.id,t.from(JSON.stringify(a)),!0,function(t){eT(t,s,r)&&s.commit(r)}))})};a[p]?o.getINode(s,i,a[p],function(t,e){eT(t,s,r)&&(e.isFile()?s.del(e.id,function(t){eT(t,s,r)&&s.del(a[p],function(t){eT(t,s,r)&&w()})}):s.abort(function(t){r(l.EPERM(i))}))}):w()}else r(l.ENOENT(n))},m=function(t){o.findINodeAndDirListing(s,t,function(e,n,i){e?$||($=!0,s.abort(function(){r(e)})):(d[t]=n,y[t]=i,g())})};m(u),u!==h&&m(h)},n.prototype.stat=function t(e,n,i){let r=this.store.beginTransaction("readonly");this.findINode(r,e,function(t,e){eO(t,i)&&i(null,e.toStats())})},n.prototype.createFile=function t(e,n,i,r){let o=this,s=this.store.beginTransaction("readwrite"),c=B();this.commitNewFile(s,e,d.FILE,i,c,function(t,i){eO(t,r)&&r(null,new eD(o,e,n,i.toStats(),c))})},n.prototype.openFile=function t(e,n,i){let r=this,o=this.store.beginTransaction("readonly");this.findINode(o,e,function(t,s){eO(t,i)&&o.get(s.id,function(t,o){eO(t,i)&&(void 0===o?i(l.ENOENT(e)):i(null,new eD(r,e,n,s.toStats(),o)))})})},n.prototype.unlink=function t(e,n){this.removeEntry(e,!1,n)},n.prototype.rmdir=function t(e,n){let i=this;this.readdir(e,function(t,r){t?n(t):r.length>0?n(l.ENOTEMPTY(e)):i.removeEntry(e,!0,n)})},n.prototype.mkdir=function e(n,i,r){let o=this.store.beginTransaction("readwrite"),s=t.from("{}");this.commitNewFile(o,n,d.DIRECTORY,i,s,r)},n.prototype.readdir=function t(e,n){let i=this,r=this.store.beginTransaction("readonly");this.findINode(r,e,function(t,o){eO(t,n)&&i.getDirListing(r,e,o,function(t,e){eO(t,n)&&n(null,Object.keys(e))})})},n.prototype._sync=function t(e,n,i,r){let o=this,s=this.store.beginTransaction("readwrite");this._findINode(s,c.dirname(e),c.basename(e),function(t,c){eT(t,s,r)&&o.getINode(s,e,c,function(t,e){if(eT(t,s,r)){let o=e.update(i);s.put(e.id,n,!0,function(t){eT(t,s,r)&&(o?s.put(c,e.toBuffer(),!0,function(t){eT(t,s,r)&&s.commit(r)}):s.commit(r))})}})})},n.prototype.makeRootDirectory=function t(e){let n=this.store.beginTransaction("readwrite");n.get("/",function(t,i){if(t||void 0===i){let r=new Date().getTime(),o=new ex(eR(),4096,511|d.DIRECTORY,r,r,r);n.put(o.id,eL(),!1,function(t){eT(t,n,e)&&n.put("/",o.toBuffer(),!1,function(t){t?n.abort(function(){e(t)}):n.commit(e)})})}else n.commit(e)})},n.prototype._findINode=function t(e,n,i,r){let o=this,s=function(t,e,o){t?r(t):o[i]?r(null,o[i]):r(l.ENOENT(c.resolve(n,i)))};"/"===n?""===i?r(null,"/"):this.getINode(e,n,"/",function(t,i){eO(t,r)&&o.getDirListing(e,n,i,function(t,e){s(t,i,e)})}):this.findINodeAndDirListing(e,n,s)},n.prototype.findINode=function t(e,n,i){let r=this;this._findINode(e,c.dirname(n),c.basename(n),function(t,o){eO(t,i)&&r.getINode(e,n,o,i)})},n.prototype.getINode=function t(e,n,i,r){e.get(i,function(t,e){eO(t,r)&&(void 0===e?r(l.ENOENT(n)):r(null,ex.fromBuffer(e)))})},n.prototype.getDirListing=function t(e,n,i,r){i.isDirectory()?e.get(i.id,function(t,e){if(eO(t,r))try{r(null,JSON.parse(e.toString()))}catch(i){r(l.ENOENT(n))}}):r(l.ENOTDIR(n))},n.prototype.findINodeAndDirListing=function t(e,n,i){let r=this;this.findINode(e,n,function(t,o){eO(t,i)&&r.getDirListing(e,n,o,function(t,e){eO(t,i)&&i(null,o,e)})})},n.prototype.addNewNode=function t(e,n,i){let r=0,o,s=function(){5==++r?i(new l(a.EIO,"Unable to commit data to key-value store.")):(o=eR(),e.put(o,n,!1,function(t,e){t||!e?s():i(null,o)}))};s()},n.prototype.commitNewFile=function e(n,i,r,o,s,a){let u=this,f=c.dirname(i),h=c.basename(i),p=new Date().getTime();if("/"===i)return a(l.EEXIST(i));this.findINodeAndDirListing(n,f,function(e,c,f){eT(e,n,a)&&(f[h]?n.abort(function(){a(l.EEXIST(i))}):u.addNewNode(n,s,function(e,i){if(eT(e,n,a)){let l=new ex(i,s.length,o|r,p,p,p);u.addNewNode(n,l.toBuffer(),function(e,i){eT(e,n,a)&&(f[h]=i,n.put(c.id,t.from(JSON.stringify(f)),!0,function(t){eT(t,n,a)&&n.commit(function(t){eT(t,n,a)&&a(null,l)})}))})}}))})},n.prototype.removeEntry=function e(n,i,r){let o=this,s=this.store.beginTransaction("readwrite"),a=c.dirname(n),u=c.basename(n);this.findINodeAndDirListing(s,a,function(e,c,a){if(eT(e,s,r)){if(a[u]){let f=a[u];delete a[u],o.getINode(s,n,f,function(e,o){eT(e,s,r)&&(!i&&o.isDirectory()?s.abort(function(){r(l.EISDIR(n))}):i&&!o.isDirectory()?s.abort(function(){r(l.ENOTDIR(n))}):s.del(o.id,function(e){eT(e,s,r)&&s.del(f,function(e){eT(e,s,r)&&s.put(c.id,t.from(JSON.stringify(a)),!0,function(t){eT(t,s,r)&&s.commit(r)})})}))})}else s.abort(function(){r(l.ENOENT(n))})}})},n}(Z),e2=function t(){this.store={}};e2.prototype.name=function t(){return eW.Name},e2.prototype.clear=function t(){this.store={}},e2.prototype.beginTransaction=function t(e){return new e3(this)},e2.prototype.get=function t(e){return this.store[e]},e2.prototype.put=function t(e,n,i){return!(!i&&this.store.hasOwnProperty(e))&&(this.store[e]=n,!0)},e2.prototype.del=function t(e){delete this.store[e]};var e6,eP,eC,eU,eM,eB,ez,ej,e5,e7,eV,eq,eW=function(t){function e(){t.call(this,{store:new e2})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function t(n,i){i(null,new e)},e}(e4);eW.Name="InMemory",eW.Options={};let eH=e0.indexedDB||e0.mozIndexedDB||e0.webkitIndexedDB||e0.msIndexedDB;function eZ(t,e){switch(void 0===e&&(e=t.toString()),t.name){case"NotFoundError":return new l(a.ENOENT,e);case"QuotaExceededError":return new l(a.ENOSPC,e);default:return new l(a.EIO,e)}}function eY(t,e,n){return void 0===e&&(e=a.EIO),void 0===n&&(n=null),function(i){i.preventDefault(),t(new l(e,null!==n?n:void 0))}}let eX=function t(e,n){this.tx=e,this.store=n};eX.prototype.get=function t(e,n){try{let i=this.store.get(e);i.onerror=eY(n),i.onsuccess=function(t){let e=t.target.result;void 0===e?n(null,e):n(null,C(e))}}catch(r){n(eZ(r))}};let eK=function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.put=function t(e,n,i,r){try{let o=T(n),s;(s=i?this.store.put(o,e):this.store.add(o,e)).onerror=eY(r),s.onsuccess=function(t){r(null,!0)}}catch(c){r(eZ(c))}},e.prototype.del=function t(e,n){try{let i=this.store.delete(e);i.onerror=eY(n),i.onsuccess=function(t){n()}}catch(r){n(eZ(r))}},e.prototype.commit=function t(e){setTimeout(e,0)},e.prototype.abort=function t(e){let n=null;try{this.tx.abort()}catch(i){n=eZ(i)}finally{e(n)}},e}(eX),eG=function t(e,n){let i=this;void 0===n&&(n="browserfs"),this.storeName=n;let r=eH.open(this.storeName,1);r.onupgradeneeded=function(t){let e=t.target.result;e.objectStoreNames.contains(i.storeName)&&e.deleteObjectStore(i.storeName),e.createObjectStore(i.storeName)},r.onsuccess=function(t){i.db=t.target.result,e(null,i)},r.onerror=eY(e,a.EACCES)};eG.prototype.name=function t(){return eQ.Name+" - "+this.storeName},eG.prototype.clear=function t(e){try{let n=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();n.onsuccess=function(t){setTimeout(e,0)},n.onerror=eY(e)}catch(i){e(eZ(i))}},eG.prototype.beginTransaction=function t(e){void 0===e&&(e="readonly");let n=this.db.transaction(this.storeName,e),i=n.objectStore(this.storeName);if("readwrite"===e)return new eK(n,i);if("readonly"===e)return new eX(n,i);throw new l(a.EINVAL,"Invalid transaction type.")};var eQ=function(t){function e(n,i,r){let o=this;void 0===r&&(r=!0),t.call(this),this.store=new eG(function(t){t?n(t):o.init(o.store,function(t){n(t,o)})},i),x(r,e.Name,{storeName:i})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function t(n,i){new e(i,n.storeName,!1)},e.isAvailable=function t(){try{return void 0!==eH&&null!==eH.open("__browserfs_test__")}catch(e){return!1}},e}(eA);eQ.Name="IndexedDB",eQ.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};let eJ=!1,e9;try{e0.localStorage.setItem("__test__",String.fromCharCode(55296)),eJ=e0.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch(nt){eJ=!1}e9=eJ?"binary_string":"binary_string_ie",t.isEncoding(e9)||(e9="base64");let ne=function t(){};ne.prototype.name=function t(){return nn.Name},ne.prototype.clear=function t(){e0.localStorage.clear()},ne.prototype.beginTransaction=function t(e){return new e3(this)},ne.prototype.get=function e(n){try{let i=e0.localStorage.getItem(n);if(null!==i)return t.from(i,e9)}catch(r){}},ne.prototype.put=function t(e,n,i){try{if(!i&&null!==e0.localStorage.getItem(e))return!1;return e0.localStorage.setItem(e,n.toString(e9)),!0}catch(r){throw new l(a.ENOSPC,"LocalStorage is full.")}},ne.prototype.del=function t(e){try{e0.localStorage.removeItem(e)}catch(n){throw new l(a.EIO,"Unable to delete key "+e+": "+n)}};var nn=function(t){function e(){t.call(this,{store:new ne})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function t(n,i){i(null,new e)},e.isAvailable=function t(){return void 0!==e0.localStorage},e}(e4);nn.Name="LocalStorage",nn.Options={};let ni=function(t){function e(){t.call(this),this.mountList=[],this.mntMap={},this.rootFs=new eW}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function t(n,i){let r=new e;Object.keys(n).forEach(function(t){r.mount(t,n[t])}),i(null,r)},e.isAvailable=function t(){return!0},e.prototype.mount=function t(e,n){if("/"!==e[0]&&(e="/"+e),e=c.resolve(e),this.mntMap[e])throw new l(a.EINVAL,"Mount point "+e+" is already taken.");O(e,511,this.rootFs),this.mntMap[e]=n,this.mountList.push(e),this.mountList=this.mountList.sort(function(t,e){return e.length-t.length})},e.prototype.umount=function t(e){if("/"!==e[0]&&(e="/"+e),e=c.resolve(e),!this.mntMap[e])throw new l(a.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);"/"!==e;)if(0===this.rootFs.readdirSync(e).length)this.rootFs.rmdirSync(e),e=c.dirname(e);else break},e.prototype._getFs=function t(e){let n=this.mountList,i=n.length;for(let r=0;r<i;r++){let o=n[r];if(o.length<=e.length&&0===e.indexOf(o))return""===(e=e.substr(o.length>1?o.length:0))&&(e="/"),{fs:this.mntMap[o],path:e}}return{fs:this.rootFs,path:e}},e.prototype.getName=function t(){return e.Name},e.prototype.diskSpace=function t(e,n){n(0,0)},e.prototype.isReadOnly=function t(){return!1},e.prototype.supportsLinks=function t(){return!1},e.prototype.supportsProps=function t(){return!1},e.prototype.supportsSynch=function t(){return!0},e.prototype.standardizeError=function t(e,n,i){let r=e.message.indexOf(n);return -1!==r&&(e.message=e.message.substr(0,r)+i+e.message.substr(r+n.length),e.path=i),e},e.prototype.rename=function t(e,n,i){let r=this,o=this._getFs(e),s=this._getFs(n);return o.fs===s.fs?o.fs.rename(o.path,s.path,function(t){t&&r.standardizeError(r.standardizeError(t,o.path,e),s.path,n),i(t)}):k.readFile(e,function(t,r){if(t)return i(t);k.writeFile(n,r,function(t){if(t)return i(t);k.unlink(e,i)})})},e.prototype.renameSync=function t(e,n){let i=this._getFs(e),r=this._getFs(n);if(i.fs===r.fs)try{return i.fs.renameSync(i.path,r.path)}catch(o){throw this.standardizeError(this.standardizeError(o,i.path,e),r.path,n),o}let s=k.readFileSync(e);return k.writeFileSync(n,s),k.unlinkSync(e)},e.prototype.readdirSync=function t(e){let n=this._getFs(e),i=null;if(n.fs!==this.rootFs)try{i=this.rootFs.readdirSync(e)}catch(r){}try{let o=n.fs.readdirSync(n.path);if(null===i)return o;return o.concat(i.filter(function(t){return -1===o.indexOf(t)}))}catch(s){if(null!==i)return i;throw this.standardizeError(s,n.path,e)}},e.prototype.readdir=function t(e,n){let i=this,r=this._getFs(e);r.fs.readdir(r.path,function(t,o){if(r.fs!==i.rootFs)try{let s=i.rootFs.readdirSync(e);o=o?o.concat(s.filter(function(t){return -1===o.indexOf(t)})):s}catch(c){if(t)return n(i.standardizeError(t,r.path,e))}else if(t)return n(i.standardizeError(t,r.path,e));n(null,o)})},e.prototype.rmdirSync=function t(e){let n=this._getFs(e);if(this._containsMountPt(e))throw l.ENOTEMPTY(e);try{n.fs.rmdirSync(n.path)}catch(i){throw this.standardizeError(i,n.path,e)}},e.prototype.rmdir=function t(e,n){let i=this,r=this._getFs(e);this._containsMountPt(e)?n(l.ENOTEMPTY(e)):r.fs.rmdir(r.path,function(t){n(t?i.standardizeError(t,r.path,e):null)})},e.prototype._containsMountPt=function t(e){let n=this.mountList,i=n.length;for(let r=0;r<i;r++){let o=n[r];if(o.length>=e.length&&o.slice(0,e.length)===e)return!0}return!1},e}(Z);function nr(t,e,n){return e?function(){let e=[],n=arguments.length;for(;n--;)e[n]=arguments[n];let i=e[0],r=this._getFs(i);e[0]=r.path;try{return r.fs[t].apply(r.fs,e)}catch(o){throw this.standardizeError(o,r.path,i),o}}:function(){let e=this,n=[],i=arguments.length;for(;i--;)n[i]=arguments[i];let r=n[0],o=this._getFs(r);if(n[0]=o.path,"function"==typeof n[n.length-1]){let s=n[n.length-1];n[n.length-1]=function(){let t=[],n=arguments.length;for(;n--;)t[n]=arguments[n];t.length>0&&t[0]instanceof l&&e.standardizeError(t[0],o.path,r),s.apply(null,t)}}return o.fs[t].apply(o.fs,n)}}ni.Name="MountableFileSystem",ni.Options={};let no=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]];for(let ns=0;ns<no.length;ns++){let nc=no[ns];for(let na=0,nu=nc;na<nu.length;na+=1){let nl=nu[na];ni.prototype[nl]=nr(nl,!1,ns+1),ni.prototype[nl+"Sync"]=nr(nl+"Sync",!0,ns+1)}}let nf;if("undefined"!=typeof setImmediate)nf=setImmediate;else{let nh=e0,np=[],nd="zero-timeout-message";if(function(){if(void 0!==nh.importScripts||!nh.postMessage)return!1;let t=!0,e=nh.onmessage;return nh.onmessage=function(){t=!1},nh.postMessage("","*"),nh.onmessage=e,t}()){nf=function(t){np.push(t),nh.postMessage(nd,"*")};let ny=function(t){if(t.source===self&&t.data===nd&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,np.length>0))return np.shift()()};nh.addEventListener?nh.addEventListener("message",ny,!0):nh.attachEvent("onmessage",ny)}else if(nh.MessageChannel){let n$=new nh.MessageChannel;n$.port1.onmessage=function(t){if(np.length>0)return np.shift()()},nf=function(t){np.push(t),n$.port2.postMessage("")}}else nf=function(t){return setTimeout(t,0)}}let ng=nf,n8=function t(){this._locked=!1,this._waiters=[]};n8.prototype.lock=function t(e){if(this._locked){this._waiters.push(e);return}this._locked=!0,e()},n8.prototype.unlock=function t(){if(!this._locked)throw Error("unlock of a non-locked mutex");let e=this._waiters.shift();if(e){ng(e);return}this._locked=!1},n8.prototype.tryLock=function t(){return!this._locked&&(this._locked=!0,!0)},n8.prototype.isLocked=function t(){return this._locked};let nm=function t(e){this._fs=e,this._mu=new n8};nm.prototype.getName=function t(){return"LockedFS<"+this._fs.getName()+">"},nm.prototype.getFSUnlocked=function t(){return this._fs},nm.prototype.initialize=function t(e){this._fs.initialize(e)},nm.prototype.diskSpace=function t(e,n){this._fs.diskSpace(e,n)},nm.prototype.isReadOnly=function t(){return this._fs.isReadOnly()},nm.prototype.supportsLinks=function t(){return this._fs.supportsLinks()},nm.prototype.supportsProps=function t(){return this._fs.supportsProps()},nm.prototype.supportsSynch=function t(){return this._fs.supportsSynch()},nm.prototype.rename=function t(e,n,i){let r=this;this._mu.lock(function(){r._fs.rename(e,n,function(t){r._mu.unlock(),i(t)})})},nm.prototype.renameSync=function t(e,n){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.renameSync(e,n)},nm.prototype.stat=function t(e,n,i){let r=this;this._mu.lock(function(){r._fs.stat(e,n,function(t,e){r._mu.unlock(),i(t,e)})})},nm.prototype.statSync=function t(e,n){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.statSync(e,n)},nm.prototype.open=function t(e,n,i,r){let o=this;this._mu.lock(function(){o._fs.open(e,n,i,function(t,e){o._mu.unlock(),r(t,e)})})},nm.prototype.openSync=function t(e,n,i){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.openSync(e,n,i)},nm.prototype.unlink=function t(e,n){let i=this;this._mu.lock(function(){i._fs.unlink(e,function(t){i._mu.unlock(),n(t)})})},nm.prototype.unlinkSync=function t(e){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.unlinkSync(e)},nm.prototype.rmdir=function t(e,n){let i=this;this._mu.lock(function(){i._fs.rmdir(e,function(t){i._mu.unlock(),n(t)})})},nm.prototype.rmdirSync=function t(e){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.rmdirSync(e)},nm.prototype.mkdir=function t(e,n,i){let r=this;this._mu.lock(function(){r._fs.mkdir(e,n,function(t){r._mu.unlock(),i(t)})})},nm.prototype.mkdirSync=function t(e,n){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.mkdirSync(e,n)},nm.prototype.readdir=function t(e,n){let i=this;this._mu.lock(function(){i._fs.readdir(e,function(t,e){i._mu.unlock(),n(t,e)})})},nm.prototype.readdirSync=function t(e){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.readdirSync(e)},nm.prototype.exists=function t(e,n){let i=this;this._mu.lock(function(){i._fs.exists(e,function(t){i._mu.unlock(),n(t)})})},nm.prototype.existsSync=function t(e){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.existsSync(e)},nm.prototype.realpath=function t(e,n,i){let r=this;this._mu.lock(function(){r._fs.realpath(e,n,function(t,e){r._mu.unlock(),i(t,e)})})},nm.prototype.realpathSync=function t(e,n){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.realpathSync(e,n)},nm.prototype.truncate=function t(e,n,i){let r=this;this._mu.lock(function(){r._fs.truncate(e,n,function(t){r._mu.unlock(),i(t)})})},nm.prototype.truncateSync=function t(e,n){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.truncateSync(e,n)},nm.prototype.readFile=function t(e,n,i,r){let o=this;this._mu.lock(function(){o._fs.readFile(e,n,i,function(t,e){o._mu.unlock(),r(t,e)})})},nm.prototype.readFileSync=function t(e,n,i){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.readFileSync(e,n,i)},nm.prototype.writeFile=function t(e,n,i,r,o,s){let c=this;this._mu.lock(function(){c._fs.writeFile(e,n,i,r,o,function(t){c._mu.unlock(),s(t)})})},nm.prototype.writeFileSync=function t(e,n,i,r,o){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.writeFileSync(e,n,i,r,o)},nm.prototype.appendFile=function t(e,n,i,r,o,s){let c=this;this._mu.lock(function(){c._fs.appendFile(e,n,i,r,o,function(t){c._mu.unlock(),s(t)})})},nm.prototype.appendFileSync=function t(e,n,i,r,o){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.appendFileSync(e,n,i,r,o)},nm.prototype.chmod=function t(e,n,i,r){let o=this;this._mu.lock(function(){o._fs.chmod(e,n,i,function(t){o._mu.unlock(),r(t)})})},nm.prototype.chmodSync=function t(e,n,i){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.chmodSync(e,n,i)},nm.prototype.chown=function t(e,n,i,r,o){let s=this;this._mu.lock(function(){s._fs.chown(e,n,i,r,function(t){s._mu.unlock(),o(t)})})},nm.prototype.chownSync=function t(e,n,i,r){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.chownSync(e,n,i,r)},nm.prototype.utimes=function t(e,n,i,r){let o=this;this._mu.lock(function(){o._fs.utimes(e,n,i,function(t){o._mu.unlock(),r(t)})})},nm.prototype.utimesSync=function t(e,n,i){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.utimesSync(e,n,i)},nm.prototype.link=function t(e,n,i){let r=this;this._mu.lock(function(){r._fs.link(e,n,function(t){r._mu.unlock(),i(t)})})},nm.prototype.linkSync=function t(e,n){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.linkSync(e,n)},nm.prototype.symlink=function t(e,n,i,r){let o=this;this._mu.lock(function(){o._fs.symlink(e,n,i,function(t){o._mu.unlock(),r(t)})})},nm.prototype.symlinkSync=function t(e,n,i){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.symlinkSync(e,n,i)},nm.prototype.readlink=function t(e,n){let i=this;this._mu.lock(function(){i._fs.readlink(e,function(t,e){i._mu.unlock(),n(t,e)})})},nm.prototype.readlinkSync=function t(e){if(this._mu.isLocked())throw Error("invalid sync call");return this._fs.readlinkSync(e)};let nw="/.deletedFiles.log";function n_(t){return 146|t}function nS(t){return p.getFileFlag(t)}let nb=function(t){function e(e,n,i,r,o){t.call(this,e,n,i,r,o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.sync=function t(e){let n=this;if(!this.isDirty()){e(null);return}this._fs._syncAsync(this,function(t){n.resetDirty(),e(t)})},e.prototype.syncSync=function t(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},e.prototype.close=function t(e){this.sync(e)},e.prototype.closeSync=function t(){this.syncSync()},e}(K),nE=function(t){function e(e,n){if(t.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=e,this._readable=n,this._writable.isReadOnly())throw new l(a.EINVAL,"Writable file system must be writable.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.isAvailable=function t(){return!0},e.prototype.getOverlayedFileSystems=function t(){return{readable:this._readable,writable:this._writable}},e.prototype._syncAsync=function t(e,n){let i=this;this.createParentDirectoriesAsync(e.getPath(),function(t){if(t)return n(t);i._writable.writeFile(e.getPath(),e.getBuffer(),null,nS("w"),e.getStats().mode,n)})},e.prototype._syncSync=function t(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,nS("w"),e.getStats().mode)},e.prototype.getName=function t(){return n0.Name},e.prototype.initialize=function t(e){let n=this,i=this._initializeCallbacks,r=function(t){n._isInitialized=!t,n._initializeCallbacks=[],i.forEach(function(e){return e(t)})};if(this._isInitialized)return e();i.push(e),1===i.length&&this._writable.readFile(nw,"utf8",nS("r"),function(t,e){if(t){if(t.errno!==a.ENOENT)return r(t)}else n._deleteLog=e;n._reparseDeletionLog(),r()})},e.prototype.isReadOnly=function t(){return!1},e.prototype.supportsSynch=function t(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},e.prototype.supportsLinks=function t(){return!1},e.prototype.supportsProps=function t(){return this._readable.supportsProps()&&this._writable.supportsProps()},e.prototype.getDeletionLog=function t(){return this._deleteLog},e.prototype.restoreDeletionLog=function t(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},e.prototype.rename=function t(e,n,i){let r=this;return!this.checkInitAsync(i)||this.checkPathAsync(e,i)||this.checkPathAsync(n,i)?void 0:e===nw||n===nw?i(l.EPERM("Cannot rename deletion log.")):e===n?i():void this.stat(e,!1,function(t,o){return t?i(t):r.stat(n,!1,function(t,s){let u=r;function f(t){let r=t.shift();if(!r)return i();let o=c.resolve(e,r),s=c.resolve(n,r);u.rename(o,s,function(e){if(e)return i(e);f(t)})}let h=511;if(o.isDirectory()){if(t)return t.errno!==a.ENOENT?i(t):r._writable.exists(e,function(t){if(t)return r._writable.rename(e,n,i);r._writable.mkdir(n,h,function(t){if(t)return i(t);r._readable.readdir(e,function(t,e){if(t)return i();f(e)})})});if(h=s.mode,!s.isDirectory())return i(l.ENOTDIR(n));r.readdir(n,function(t,o){if(o&&o.length)return i(l.ENOTEMPTY(n));r._readable.readdir(e,function(t,e){if(t)return i();f(e)})})}if(s&&s.isDirectory())return i(l.EISDIR(n));r.readFile(e,null,nS("r"),function(t,s){return t?i(t):r.writeFile(n,s,null,nS("w"),o.mode,function(t){return t?i(t):r.unlink(e,i)})})})})},e.prototype.renameSync=function t(e,n){let i=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(n),e===nw||n===nw)throw l.EPERM("Cannot rename deletion log.");let r=this.statSync(e,!1);if(r.isDirectory()){if(e===n)return;let o=511;if(this.existsSync(n)){let s=this.statSync(n,!1);if(o=s.mode,s.isDirectory()){if(this.readdirSync(n).length>0)throw l.ENOTEMPTY(n)}else throw l.ENOTDIR(n)}this._writable.existsSync(e)?this._writable.renameSync(e,n):this._writable.existsSync(n)||this._writable.mkdirSync(n,o),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach(function(t){i.renameSync(c.resolve(e,t),c.resolve(n,t))})}else{if(this.existsSync(n)&&this.statSync(n,!1).isDirectory())throw l.EISDIR(n);this.writeFileSync(n,this.readFileSync(e,null,nS("r")),null,nS("w"),r.mode)}e!==n&&this.existsSync(e)&&this.unlinkSync(e)},e.prototype.stat=function t(e,n,i){let r=this;this.checkInitAsync(i)&&this._writable.stat(e,n,function(t,o){t&&t.errno===a.ENOENT?(r._deletedFiles[e]&&i(l.ENOENT(e)),r._readable.stat(e,n,function(t,e){e&&((e=e.clone()).mode=n_(e.mode)),i(t,e)})):i(t,o)})},e.prototype.statSync=function t(e,n){this.checkInitialized();try{return this._writable.statSync(e,n)}catch(i){if(this._deletedFiles[e])throw l.ENOENT(e);let r=this._readable.statSync(e,n).clone();return r.mode=n_(r.mode),r}},e.prototype.open=function t(e,n,i,r){let o=this;!this.checkInitAsync(r)||this.checkPathAsync(e,r)||this.stat(e,!1,function(t,s){if(!s)return n.pathNotExistsAction()===h.CREATE_FILE?o.createParentDirectoriesAsync(e,function(t){return t?r(t):o._writable.open(e,n,i,r)}):r(l.ENOENT(e));switch(n.pathExistsAction()){case h.TRUNCATE_FILE:return o.createParentDirectoriesAsync(e,function(t){if(t)return r(t);o._writable.open(e,n,i,r)});case h.NOP:return o._writable.exists(e,function(t){t?o._writable.open(e,n,i,r):((s=s.clone()).mode=i,o._readable.readFile(e,null,nS("r"),function(t,i){if(t)return r(t);-1===s.size&&(s.size=i.length);let c=new nb(o,e,n,s,i);r(null,c)}))});default:return r(l.EEXIST(e))}})},e.prototype.openSync=function t(e,n,i){if(this.checkInitialized(),this.checkPath(e),e===nw)throw l.EPERM("Cannot open deletion log.");if(this.existsSync(e))switch(n.pathExistsAction()){case h.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,n,i);case h.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,n,i);{let r=this._readable.readFileSync(e,null,nS("r")),o=this._readable.statSync(e,!1).clone();return o.mode=i,new nb(this,e,n,o,r)}default:throw l.EEXIST(e)}else{if(n.pathNotExistsAction()===h.CREATE_FILE)return this.createParentDirectories(e),this._writable.openSync(e,n,i);throw l.ENOENT(e)}},e.prototype.unlink=function t(e,n){let i=this;!this.checkInitAsync(n)||this.checkPathAsync(e,n)||this.exists(e,function(t){if(!t)return n(l.ENOENT(e));i._writable.exists(e,function(t){if(t)return i._writable.unlink(e,function(t){if(t)return n(t);i.exists(e,function(t){t&&i.deletePath(e),n(null)})});i.deletePath(e),n(null)})})},e.prototype.unlinkSync=function t(e){if(this.checkInitialized(),this.checkPath(e),this.existsSync(e))this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e);else throw l.ENOENT(e)},e.prototype.rmdir=function t(e,n){let i=this;if(!this.checkInitAsync(n))return;let r=function(){i.readdir(e,function(t,r){return t?n(t):r.length?n(l.ENOTEMPTY(e)):void(i.deletePath(e),n(null))})};this.exists(e,function(t){if(!t)return n(l.ENOENT(e));i._writable.exists(e,function(t){t?i._writable.rmdir(e,function(t){if(t)return n(t);i._readable.exists(e,function(t){t?r():n()})}):r()})})},e.prototype.rmdirSync=function t(e){if(this.checkInitialized(),this.existsSync(e)){if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw l.ENOTEMPTY(e);this.deletePath(e)}}else throw l.ENOENT(e)},e.prototype.mkdir=function t(e,n,i){let r=this;this.checkInitAsync(i)&&this.exists(e,function(t){if(t)return i(l.EEXIST(e));r.createParentDirectoriesAsync(e,function(t){if(t)return i(t);r._writable.mkdir(e,n,i)})})},e.prototype.mkdirSync=function t(e,n){if(this.checkInitialized(),this.existsSync(e))throw l.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,n)},e.prototype.readdir=function t(e,n){let i=this;this.checkInitAsync(n)&&this.stat(e,!1,function(t,r){return t?n(t):r.isDirectory()?void i._writable.readdir(e,function(t,r){if(t&&"ENOENT"!==t.code)return n(t);(t||!r)&&(r=[]),i._readable.readdir(e,function(t,o){(t||!o)&&(o=[]);let s={};n(null,r.concat(o.filter(function(t){return!i._deletedFiles[e+"/"+t]})).filter(function(t){let e=!s[t];return s[t]=!0,e}))})}):n(l.ENOTDIR(e))})},e.prototype.readdirSync=function t(e){let n=this;this.checkInitialized();if(!this.statSync(e,!1).isDirectory())throw l.ENOTDIR(e);let i=[];try{i=i.concat(this._writable.readdirSync(e))}catch(r){}try{i=i.concat(this._readable.readdirSync(e).filter(function(t){return!n._deletedFiles[e+"/"+t]}))}catch(o){}let s={};return i.filter(function(t){let e=!s[t];return s[t]=!0,e})},e.prototype.exists=function t(e,n){let i=this;this.checkInitialized(),this._writable.exists(e,function(t){if(t)return n(!0);i._readable.exists(e,function(t){n(t&&!0!==i._deletedFiles[e])})})},e.prototype.existsSync=function t(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&!0!==this._deletedFiles[e]},e.prototype.chmod=function t(e,n,i,r){let o=this;this.checkInitAsync(r)&&this.operateOnWritableAsync(e,function(t){if(t)return r(t);o._writable.chmod(e,n,i,r)})},e.prototype.chmodSync=function t(e,n,i){let r=this;this.checkInitialized(),this.operateOnWritable(e,function(){r._writable.chmodSync(e,n,i)})},e.prototype.chown=function t(e,n,i,r,o){let s=this;this.checkInitAsync(o)&&this.operateOnWritableAsync(e,function(t){if(t)return o(t);s._writable.chown(e,n,i,r,o)})},e.prototype.chownSync=function t(e,n,i,r){let o=this;this.checkInitialized(),this.operateOnWritable(e,function(){o._writable.chownSync(e,n,i,r)})},e.prototype.utimes=function t(e,n,i,r){let o=this;this.checkInitAsync(r)&&this.operateOnWritableAsync(e,function(t){if(t)return r(t);o._writable.utimes(e,n,i,r)})},e.prototype.utimesSync=function t(e,n,i){let r=this;this.checkInitialized(),this.operateOnWritable(e,function(){r._writable.utimesSync(e,n,i)})},e.prototype.deletePath=function t(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+"\n")},e.prototype.updateLog=function t(e){let n=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(nw,this._deleteLog,"utf8",p.getFileFlag("w"),420,function(t){n._deleteLogUpdatePending=!1,t?n._deleteLogError=t:n._deleteLogUpdateNeeded&&(n._deleteLogUpdateNeeded=!1,n.updateLog(""))}))},e.prototype._reparseDeletionLog=function t(){let e=this;this._deletedFiles={},this._deleteLog.split("\n").forEach(function(t){e._deletedFiles[t.slice(1)]="d"===t.slice(0,1)})},e.prototype.checkInitialized=function t(){if(this._isInitialized){if(null!==this._deleteLogError){let e=this._deleteLogError;throw this._deleteLogError=null,e}}else throw new l(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},e.prototype.checkInitAsync=function t(e){if(!this._isInitialized)return e(new l(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;if(null!==this._deleteLogError){let n=this._deleteLogError;return this._deleteLogError=null,e(n),!1}return!0},e.prototype.checkPath=function t(e){if(e===nw)throw l.EPERM(e)},e.prototype.checkPathAsync=function t(e,n){return e===nw&&(n(l.EPERM(e)),!0)},e.prototype.createParentDirectoriesAsync=function t(e,n){let i=c.dirname(e),r=[],o=this;function s(t,e){t?(r.push(i),i=c.dirname(i),o._writable.stat(i,!1,s)):function t(){if(!r.length)return n();let e=r.pop();o._readable.stat(e,!1,function(i,r){if(!r)return n();o._writable.mkdir(e,r.mode,function(e){if(e)return n(e);t()})})}()}this._writable.stat(i,!1,s)},e.prototype.createParentDirectories=function t(e){let n=this,i=c.dirname(e),r=[];for(;!this._writable.existsSync(i);)r.push(i),i=c.dirname(i);(r=r.reverse()).forEach(function(t){n._writable.mkdirSync(t,n.statSync(t,!1).mode)})},e.prototype.operateOnWritable=function t(e,n){if(this.existsSync(e))this._writable.existsSync(e)||this.copyToWritable(e),n();else throw l.ENOENT(e)},e.prototype.operateOnWritableAsync=function t(e,n){let i=this;this.exists(e,function(t){if(!t)return n(l.ENOENT(e));i._writable.exists(e,function(t){if(!t)return i.copyToWritableAsync(e,n);n()})})},e.prototype.copyToWritable=function t(e){let n=this.statSync(e,!1);n.isDirectory()?this._writable.mkdirSync(e,n.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,nS("r")),null,nS("w"),this.statSync(e,!1).mode)},e.prototype.copyToWritableAsync=function t(e,n){let i=this;this.stat(e,!1,function(t,r){return t?n(t):r.isDirectory()?i._writable.mkdir(e,r.mode,n):void i._readable.readFile(e,null,nS("r"),function(t,o){if(t)return n(t);i.writeFile(e,o,null,nS("w"),r.mode,n)})})},e}(Z);var n0=function(t){function e(n,i,r){void 0===r&&(r=!0),t.call(this,new nE(n,i)),x(r,e.Name,{readable:"readable file system",writable:"writable file system"})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function t(n,i){try{let r=new e(n.writable,n.readable,!1);r.initialize(function(t){i(t,r)},!1)}catch(o){i(o)}},e.isAvailable=function t(){return nE.isAvailable()},e.prototype.initialize=function e(n,i){void 0===i&&(i=!0),i&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),t.prototype.initialize.call(this,n)},e.prototype.getOverlayedFileSystems=function e(){return t.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},e.prototype.unwrap=function e(){return t.prototype.getFSUnlocked.call(this)},e}(nm);n0.Name="OverlayFS",n0.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};let nv;(e5=nv||(nv={}))[e5.CB=0]="CB",e5[e5.FD=1]="FD",e5[e5.API_ERROR=2]="API_ERROR",e5[e5.STATS=3]="STATS",e5[e5.PROBE=4]="PROBE",e5[e5.FILEFLAG=5]="FILEFLAG",e5[e5.BUFFER=6]="BUFFER",e5[e5.ERROR=7]="ERROR";let nk=function t(){this._callbacks={},this._nextId=0};nk.prototype.toRemoteArg=function t(e){let n=this._nextId++;return this._callbacks[n]=e,{type:nv.CB,id:n}},nk.prototype.toLocalArg=function t(e){let n=this._callbacks[e];return delete this._callbacks[e],n};let nI=function t(){this._fileDescriptors={},this._nextId=0};function nF(t){var e;return{type:nv.API_ERROR,errorData:T(e=t.writeToBuffer())}}function nx(t){var e;return l.fromBuffer(C(e=t.errorData))}function nN(t){return{type:nv.ERROR,name:t.name,message:t.message,stack:t.stack}}function nL(t){let e=e0[t.name];"function"!=typeof e&&(e=Error);let n=new e(t.message);return n.stack=t.stack,n}function nR(t){var e;return{type:nv.STATS,statsData:T(e=t.toBuffer())}}function nO(t){var e;return y.fromBuffer(C(e=t.statsData))}function nT(t){return{type:nv.FILEFLAG,flagStr:t.getFlagString()}}function n3(t){return p.getFileFlag(t.flagStr)}function n1(t){return T(t)}function n4(t){return C(t)}function nD(t){var e;return{type:nv.BUFFER,data:T(e=t)}}function nA(t){var e;return C(e=t.data)}nI.prototype.toRemoteArg=function e(n,i,r,o){let s=this._nextId++,c,a;this._fileDescriptors[s]=n,n.stat(function(e,u){var l;e?o(e):(a=T(l=u.toBuffer()),r.isReadable()?n.read(t.alloc(u.size),0,u.size,0,function(t,e,n){var u;t?o(t):(c=T(u=n),o(null,{type:nv.FD,id:s,data:c,stat:a,path:i,flag:r.getFlagString()}))}):o(null,{type:nv.FD,id:s,data:new ArrayBuffer(0),stat:a,path:i,flag:r.getFlagString()}))})},nI.prototype.applyFdAPIRequest=function t(e,n){let i=this,r=e.args[0];this._applyFdChanges(r,function(t,o){t?n(t):o[e.method](function(t){"close"===e.method&&delete i._fileDescriptors[r.id],n(t)})})},nI.prototype._applyFdChanges=function t(e,n){var i,r;let o=this._fileDescriptors[e.id],s=C(i=e.data),c=y.fromBuffer(C(r=e.stat)),a=p.getFileFlag(e.flag);a.isWriteable()?o.write(s,0,s.length,a.isAppendable()?o.getPos():0,function(t){function e(){o.stat(function(t,e){t?n(t):e.mode!==c.mode?o.chmod(c.mode,function(t){n(t,o)}):n(t,o)})}t?n(t):a.isAppendable()?e():o.truncate(s.length,function(){e()})}):n(null,o)};let n2=function(t){function e(e,n,i,r,o,s){t.call(this,e,n,i,r,s),this._remoteFdId=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getRemoteFdId=function t(){return this._remoteFdId},e.prototype.toRemoteArg=function t(){var e,n;return{type:nv.FD,id:this._remoteFdId,data:T(e=this.getBuffer()),stat:T(n=this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},e.prototype.sync=function t(e){this._syncClose("sync",e)},e.prototype.close=function t(e){this._syncClose("close",e)},e.prototype._syncClose=function t(e,n){let i=this;this.isDirty()?this._fs.syncClose(e,this,function(t){t||i.resetDirty(),n(t)}):n()},e}(K),n6=function(e){function n(t,i){let r=this;void 0===i&&(i=!0),e.call(this),this._callbackConverter=new nk,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=t,x(i,n.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(t){var e;let n=t.data;if((e=n)&&"object"==typeof e&&e.hasOwnProperty("browserfsMessage")&&e.browserfsMessage){let i,o=n.args,s=Array(o.length);for(i=0;i<s.length;i++)s[i]=r._argRemote2Local(o[i]);r._callbackConverter.toLocalArg(n.cbId).apply(null,s)}})}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.Create=function t(e,i){let r=new n(e.worker,!1);r.initialize(function(){i(null,r)})},n.isAvailable=function t(){return"undefined"!=typeof importScripts||"undefined"!=typeof Worker},n.attachRemoteListener=function e(n){let i=new nI;function r(e,n,r){r(null,"object"==typeof e?e instanceof y?nR(e):e instanceof l?nF(e):e instanceof X?i.toRemoteArg(e,n[0],n[1],r):e instanceof p?nT(e):e instanceof t?nD(e):e instanceof Error?nN(e):e:e)}function o(t,e){if(!t)return t;if("object"==typeof t){if("number"!=typeof t.type)return t;{let i=t;switch(i.type){case nv.CB:var o=t.id;return function(){let t=arguments,i,s=Array(arguments.length),c,a=arguments.length;function u(t){a>0&&(a=-1,c={browserfsMessage:!0,cbId:o,args:[nF(t)]},n.postMessage(c))}for(i=0;i<arguments.length;i++)!function(t,i){r(i,e,function(e,i){s[t]=i,e?u(e):0==--a&&(c={browserfsMessage:!0,cbId:o,args:s},n.postMessage(c))})}(i,t[i]);0===arguments.length&&(c={browserfsMessage:!0,cbId:o,args:s},n.postMessage(c))};case nv.API_ERROR:return nx(i);case nv.STATS:return nO(i);case nv.FILEFLAG:return n3(i);case nv.BUFFER:return nA(i);case nv.ERROR:return nL(i)}}}return t}n.addEventListener("message",function(t){let e=t.data;if((p=e)&&"object"==typeof p&&p.hasOwnProperty("browserfsMessage")&&p.browserfsMessage){let r=e.args,s=Array(r.length);switch(e.method){case"close":case"sync":let c;c=r[1],i.applyFdAPIRequest(e,function(t){let e={browserfsMessage:!0,cbId:c.id,args:t?[nF(t)]:[]};n.postMessage(e)});break;case"probe":let a,u,l,f;a=k.getRootFS(),u=r[1],l={type:nv.PROBE,isReadOnly:a.isReadOnly(),supportsLinks:a.supportsLinks(),supportsProps:a.supportsProps()},f={browserfsMessage:!0,cbId:u.id,args:[l]},n.postMessage(f);break;default:for(let h=0;h<r.length;h++)s[h]=o(r[h],s);var p,d=k.getRootFS();d[e.method].apply(d,s)}}})},n.prototype.getName=function t(){return n.Name},n.prototype.initialize=function t(e){let n=this;if(this._isInitialized)e();else{let i={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(B()),this._callbackConverter.toRemoteArg(function(t){n._isInitialized=!0,n._isReadOnly=t.isReadOnly,n._supportLinks=t.supportsLinks,n._supportProps=t.supportsProps,e()})]};this._worker.postMessage(i)}},n.prototype.isReadOnly=function t(){return this._isReadOnly},n.prototype.supportsSynch=function t(){return!1},n.prototype.supportsLinks=function t(){return this._supportLinks},n.prototype.supportsProps=function t(){return this._supportProps},n.prototype.rename=function t(e,n,i){this._rpc("rename",arguments)},n.prototype.stat=function t(e,n,i){this._rpc("stat",arguments)},n.prototype.open=function t(e,n,i,r){this._rpc("open",arguments)},n.prototype.unlink=function t(e,n){this._rpc("unlink",arguments)},n.prototype.rmdir=function t(e,n){this._rpc("rmdir",arguments)},n.prototype.mkdir=function t(e,n,i){this._rpc("mkdir",arguments)},n.prototype.readdir=function t(e,n){this._rpc("readdir",arguments)},n.prototype.exists=function t(e,n){this._rpc("exists",arguments)},n.prototype.realpath=function t(e,n,i){this._rpc("realpath",arguments)},n.prototype.truncate=function t(e,n,i){this._rpc("truncate",arguments)},n.prototype.readFile=function t(e,n,i,r){this._rpc("readFile",arguments)},n.prototype.writeFile=function t(e,n,i,r,o,s){this._rpc("writeFile",arguments)},n.prototype.appendFile=function t(e,n,i,r,o,s){this._rpc("appendFile",arguments)},n.prototype.chmod=function t(e,n,i,r){this._rpc("chmod",arguments)},n.prototype.chown=function t(e,n,i,r,o){this._rpc("chown",arguments)},n.prototype.utimes=function t(e,n,i,r){this._rpc("utimes",arguments)},n.prototype.link=function t(e,n,i){this._rpc("link",arguments)},n.prototype.symlink=function t(e,n,i,r){this._rpc("symlink",arguments)},n.prototype.readlink=function t(e,n){this._rpc("readlink",arguments)},n.prototype.syncClose=function t(e,n,i){this._worker.postMessage({browserfsMessage:!0,method:e,args:[n.toRemoteArg(),this._callbackConverter.toRemoteArg(i)]})},n.prototype._argRemote2Local=function t(e){if(!e)return e;if("object"==typeof e){if("number"!=typeof e.type)return e;{let n=e;switch(n.type){case nv.API_ERROR:return nx(n);case nv.FD:var i,r,o=n;return new n2(this,o.path,p.getFileFlag(o.flag),y.fromBuffer(C(i=o.stat)),o.id,C(r=o.data));case nv.STATS:return nO(n);case nv.FILEFLAG:return n3(n);case nv.BUFFER:return nA(n);case nv.ERROR:return nL(n)}}}return e},n.prototype._rpc=function t(e,n){let i=Array(n.length);for(let r=0;r<n.length;r++)i[r]=this._argLocal2Remote(n[r]);this._worker.postMessage({browserfsMessage:!0,method:e,args:i})},n.prototype._argLocal2Remote=function e(n){if(!n)return n;switch(typeof n){case"object":if(n instanceof y)return nR(n);if(n instanceof l)return nF(n);if(n instanceof n2)return n.toRemoteArg();if(n instanceof p)return nT(n);if(n instanceof t)return nD(n);else if(n instanceof Error)return nN(n);else return"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(n);default:return n}},n}(Z);function nP(t,e,n){let i=new XMLHttpRequest;i.open("HEAD",e,t),i.onreadystatechange=function(t){if(4===i.readyState){if(200!==i.status)return n(new l(i.status,"XHR HEAD error."));try{return n(null,parseInt(i.getResponseHeader("Content-Length")||"-1",10))}catch(e){return n(new l(a.EIO,"XHR HEAD error: Could not read content-length."))}}},i.send()}n6.Name="WorkerFS",n6.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(t,e){t.postMessage?e():e(new l(a.EINVAL,"option must be a Web Worker instance."))}}};let nC=function e(n,i,r){let o=new XMLHttpRequest;o.open("GET",n,!0);let s=!0;switch(i){case"buffer":o.responseType="arraybuffer";break;case"json":try{o.responseType="json",s="json"===o.responseType}catch(c){s=!1}break;default:return r(new l(a.EINVAL,"Invalid download type: "+i))}o.onreadystatechange=function(e){if(4===o.readyState){if(200!==o.status)return r(new l(o.status,"XHR error."));switch(i){case"buffer":return r(null,o.response?t.from(o.response):B());case"json":if(s)return r(null,o.response);return r(null,JSON.parse(o.responseText))}}},o.send()},nU=N&&"undefined"!=typeof Blob?function e(n,i){let r=new XMLHttpRequest;switch(r.open("GET",n,!1),i){case"buffer":r.responseType="arraybuffer";break;case"json":break;default:throw new l(a.EINVAL,"Invalid download type: "+i)}let o,s;if(r.onreadystatechange=function(e){if(4===r.readyState){if(200===r.status)switch(i){case"buffer":o=t.from(r.response);break;case"json":o=JSON.parse(r.response)}else s=new l(r.status,"XHR error.")}},r.send(),s)throw s;return o}:function e(n,i){let r=new XMLHttpRequest;r.open("GET",n,!1);let o=null,s=null;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(e){if(4===r.readyState){if(200===r.status)switch(i){case"buffer":var n=r.responseText;o=t.alloc(n.length);for(let c=0;c<n.length;c++)o[c]=n.charCodeAt(c);return;case"json":o=JSON.parse(r.responseText);return}else{s=new l(r.status,"XHR error.");return}}},r.send(),s)throw s;return o},nM=function t(){this._index={},this.addPath("/",new nz)};nM.fromListing=function t(e){let n=new nM,i=new nz;n._index["/"]=i;let r=[["",e,i]];for(;r.length>0;){let o,s=r.pop(),c=s[0],a=s[1],u=s[2];for(let l in a)if(a.hasOwnProperty(l)){let f=a[l],h=c+"/"+l;f?(n._index[h]=o=new nz,r.push([h,f,o])):o=new nB(new y(d.FILE,-1,365)),u&&(u._ls[l]=o)}}return n},nM.prototype.fileIterator=function t(e){for(let n in this._index)if(this._index.hasOwnProperty(n)){let i=this._index[n],r=i.getListing();for(let o=0,s=r;o<s.length;o+=1){let c=s[o],a=i.getItem(c);nj(a)&&e(a.getData())}}},nM.prototype.addPath=function t(e,n){if(!n)throw Error("Inode must be specified");if("/"!==e[0])throw Error("Path must be absolute, got: "+e);if(this._index.hasOwnProperty(e))return this._index[e]===n;let i=this._split_path(e),r=i[0],o=i[1],s=this._index[r];return!!((void 0!==s||"/"===e||(s=new nz,this.addPath(r,s)))&&("/"===e||s.addItem(o,n)))&&(n5(n)&&(this._index[e]=n),!0)},nM.prototype.addPathFast=function t(e,n){let i=e.lastIndexOf("/"),r=0===i?"/":e.substring(0,i),o=e.substring(i+1),s=this._index[r];return void 0===s&&(s=new nz,this.addPathFast(r,s)),!!s.addItem(o,n)&&(n.isDir()&&(this._index[e]=n),!0)},nM.prototype.removePath=function t(e){let n=this._split_path(e),i=n[0],r=n[1],o=this._index[i];if(void 0===o)return null;let s=o.remItem(r);if(null===s)return null;if(n5(s)){let c=s.getListing();for(let a=0,u=c;a<u.length;a+=1){let l=u[a];this.removePath(e+"/"+l)}"/"!==e&&delete this._index[e]}return s},nM.prototype.ls=function t(e){let n=this._index[e];return void 0===n?null:n.getListing()},nM.prototype.getInode=function t(e){let n=this._split_path(e),i=n[0],r=n[1],o=this._index[i];return void 0===o?null:i===e?o:o.getItem(r)},nM.prototype._split_path=function t(e){let n=c.dirname(e),i=e.substr(n.length+("/"===n?0:1));return[n,i]};var nB=function t(e){this.data=e};nB.prototype.isFile=function t(){return!0},nB.prototype.isDir=function t(){return!1},nB.prototype.getData=function t(){return this.data},nB.prototype.setData=function t(e){this.data=e};var nz=function t(e){void 0===e&&(e=null),this.data=e,this._ls={}};function nj(t){return!!t&&t.isFile()}function n5(t){return!!t&&t.isDir()}nz.prototype.isFile=function t(){return!1},nz.prototype.isDir=function t(){return!0},nz.prototype.getData=function t(){return this.data},nz.prototype.getStats=function t(){return new y(d.DIRECTORY,4096,365)},nz.prototype.getListing=function t(){return Object.keys(this._ls)},nz.prototype.getItem=function t(e){return this._ls[e]||null},nz.prototype.addItem=function t(e,n){return!(e in this._ls)&&(this._ls[e]=n,!0)},nz.prototype.remItem=function t(e){let n=this._ls[e];return void 0===n?null:(delete this._ls[e],n)};let n7=function(t){function e(n,i,r){void 0===i&&(i=""),void 0===r&&(r=!0),t.call(this),n||(n="index.json"),i.length>0&&"/"!==i.charAt(i.length-1)&&(i+="/"),this.prefixUrl=i;let o=null;if("string"==typeof n){if(!(o=this._requestFileSync(n,"json")))throw Error("Unable to find listing at URL: ${listingUrlOrObj}")}else o=n;x(r,e.Name,{index:"string"==typeof n?n:"file index as an object",baseUrl:i}),this._index=nM.fromListing(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function t(n,i){void 0===n.index&&(n.index="index.json"),"string"==typeof n.index?e.FromURL(n.index,i,n.baseUrl,!1):i(null,new e(n.index,n.baseUrl,!1))},e.isAvailable=function t(){return"undefined"!=typeof XMLHttpRequest&&null!==XMLHttpRequest},e.FromURL=function t(n,i,r,o){void 0===r&&(r=n.slice(0,n.lastIndexOf("/")+1)),void 0===o&&(o=!0),o&&console.warn("[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: \""+n+'", baseUrl: "'+r+"\" }, cb)' instead."),nC(n,"json",function(t,n){t?i(t):i(null,new e(n,r,!1))})},e.prototype.empty=function t(){this._index.fileIterator(function(t){t.fileData=null})},e.prototype.getName=function t(){return e.Name},e.prototype.diskSpace=function t(e,n){n(0,0)},e.prototype.isReadOnly=function t(){return!0},e.prototype.supportsLinks=function t(){return!1},e.prototype.supportsProps=function t(){return!1},e.prototype.supportsSynch=function t(){return!0},e.prototype.preloadFile=function t(e,n){let i=this._index.getInode(e);if(nj(i)){if(null===i)throw l.ENOENT(e);let r=i.getData();r.size=n.length,r.fileData=n}else throw l.EISDIR(e)},e.prototype.stat=function t(e,n,i){let r=this._index.getInode(e);if(null===r)return i(l.ENOENT(e));let o;nj(r)?(o=r.getData()).size<0?this._requestFileSizeAsync(e,function(t,e){if(t)return i(t);o.size=e,i(null,o.clone())}):i(null,o.clone()):n5(r)?i(null,o=r.getStats()):i(l.FileError(a.EINVAL,e))},e.prototype.statSync=function t(e,n){let i=this._index.getInode(e);if(null===i)throw l.ENOENT(e);let r;if(nj(i))(r=i.getData()).size<0&&(r.size=this._requestFileSizeSync(e));else if(n5(i))r=i.getStats();else throw l.FileError(a.EINVAL,e);return r},e.prototype.open=function t(e,n,i,r){if(n.isWriteable())return r(new l(a.EPERM,e));let o=this,s=this._index.getInode(e);if(null===s)return r(l.ENOENT(e));if(!nj(s))return r(l.EISDIR(e));{let c=s.getData();switch(n.pathExistsAction()){case h.THROW_EXCEPTION:case h.TRUNCATE_FILE:return r(l.EEXIST(e));case h.NOP:if(c.fileData)return r(null,new G(o,e,n,c.clone(),c.fileData));this._requestFileAsync(e,"buffer",function(t,i){return t?r(t):(c.size=i.length,c.fileData=i,r(null,new G(o,e,n,c.clone(),i)))});break;default:return r(new l(a.EINVAL,"Invalid FileMode object."))}}},e.prototype.openSync=function t(e,n,i){if(n.isWriteable())throw new l(a.EPERM,e);let r=this._index.getInode(e);if(null===r)throw l.ENOENT(e);if(nj(r)){let o=r.getData();switch(n.pathExistsAction()){case h.THROW_EXCEPTION:case h.TRUNCATE_FILE:throw l.EEXIST(e);case h.NOP:if(o.fileData)return new G(this,e,n,o.clone(),o.fileData);var s=this._requestFileSync(e,"buffer");return o.size=s.length,o.fileData=s,new G(this,e,n,o.clone(),s);default:throw new l(a.EINVAL,"Invalid FileMode object.")}}else throw l.EISDIR(e)},e.prototype.readdir=function t(e,n){try{n(null,this.readdirSync(e))}catch(i){n(i)}},e.prototype.readdirSync=function t(e){let n=this._index.getInode(e);if(null===n)throw l.ENOENT(e);if(n5(n))return n.getListing();throw l.ENOTDIR(e)},e.prototype.readFile=function t(e,n,i,r){let o=r;this.open(e,i,420,function(t,e){if(t)return r(t);r=function(t,n){e.close(function(e){return t||(t=e),o(t,n)})};let i=e.getBuffer();null===n?r(t,U(i)):function t(e,n,i){try{i(null,e.toString(n))}catch(r){i(r)}}(i,n,r)})},e.prototype.readFileSync=function t(e,n,i){let r=this.openSync(e,i,420);try{let o=r.getBuffer();if(null===n)return U(o);return o.toString(n)}finally{r.closeSync()}},e.prototype.getXhrPath=function t(e){return"/"===e.charAt(0)&&(e=e.slice(1)),this.prefixUrl+e},e.prototype._requestFileAsync=function t(e,n,i){nC(this.getXhrPath(e),n,i)},e.prototype._requestFileSync=function t(e,n){return nU(this.getXhrPath(e),n)},e.prototype._requestFileSizeAsync=function t(e,n){var i,r;nP(!0,i=this.getXhrPath(e),r=n)},e.prototype._requestFileSizeSync=function t(e){var n;let i;return n=this.getXhrPath(e),i=-1,nP(!1,n,function(t,e){if(t)throw t;i=e}),i},e}(Z);n7.Name="XmlHttpRequest",n7.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};let nV=function t(){};nV.str2byte=function t(e,n){let i=e.length>n.length?n.length:e.length;for(let r=0;r<i;r++){let o=e.charCodeAt(r);if(o>127){let s=nV.extendedChars.indexOf(e.charAt(r));s>-1&&(o=s+128)}n[o]=r}return i},nV.byte2str=function t(e){let n=Array(e.length);for(let i=0;i<e.length;i++){let r=e[i];r>127?n[i]=nV.extendedChars[r-128]:n[i]=String.fromCharCode(r)}return n.join("")},nV.byteLength=function t(e){return e.length},nV.extendedChars=["\xc7","\xfc","\xe9","\xe2","\xe4","\xe0","\xe5","\xe7","\xea","\xeb","\xe8","\xef","\xee","\xec","\xc4","\xc5","\xc9","\xe6","\xc6","\xf4","\xf6","\xf2","\xfb","\xf9","\xff","\xd6","\xdc","\xf8","\xa3","\xd8","\xd7","","\xe1","\xed","\xf3","\xfa","\xf1","\xd1","\xaa","\xba","\xbf","\xae","\xac","\xbd","\xbc","\xa1","\xab","\xbb","_","_","_","\xa6","\xa6","\xc1","\xc2","\xc0","\xa9","\xa6","\xa6","+","+","\xa2","\xa5","+","+","-","-","+","-","+","\xe3","\xc3","+","+","-","-","\xa6","-","+","\xa4","\xf0","\xd0","\xca","\xcb","\xc8","i","\xcd","\xce","\xcf","+","+","_","_","\xa6","\xcc","_","\xd3","\xdf","\xd4","\xd2","\xf5","\xd5","\xb5","\xfe","\xde","\xda","\xdb","\xd9","\xfd","\xdd","\xaf","\xb4","\xad","\xb1","_","\xbe","\xb6","\xa7","\xf7","\xb8","\xb0","\xa8","\xb7","\xb9","\xb3","\xb2","_"," "];let nq=n(31).inflateRaw,nW={},nH;(e7=nH||(nH={}))[e7.MSDOS=0]="MSDOS",e7[e7.AMIGA=1]="AMIGA",e7[e7.OPENVMS=2]="OPENVMS",e7[e7.UNIX=3]="UNIX",e7[e7.VM_CMS=4]="VM_CMS",e7[e7.ATARI_ST=5]="ATARI_ST",e7[e7.OS2_HPFS=6]="OS2_HPFS",e7[e7.MAC=7]="MAC",e7[e7.Z_SYSTEM=8]="Z_SYSTEM",e7[e7.CP_M=9]="CP_M",e7[e7.NTFS=10]="NTFS",e7[e7.MVS=11]="MVS",e7[e7.VSE=12]="VSE",e7[e7.ACORN_RISC=13]="ACORN_RISC",e7[e7.VFAT=14]="VFAT",e7[e7.ALT_MVS=15]="ALT_MVS",e7[e7.BEOS=16]="BEOS",e7[e7.TANDEM=17]="TANDEM",e7[e7.OS_400=18]="OS_400",e7[e7.OSX=19]="OSX";let nZ;function nY(t,e){return new Date((e>>9)+1980,(e>>5&15)-1,31&e,t>>11,t>>5&63,31&t)}function nX(t,e,n,i){return 0===i?"":e?t.toString("utf8",n,n+i):nV.byte2str(t.slice(n,n+i))}(eV=nZ||(nZ={}))[eV.STORED=0]="STORED",eV[eV.SHRUNK=1]="SHRUNK",eV[eV.REDUCED_1=2]="REDUCED_1",eV[eV.REDUCED_2=3]="REDUCED_2",eV[eV.REDUCED_3=4]="REDUCED_3",eV[eV.REDUCED_4=5]="REDUCED_4",eV[eV.IMPLODE=6]="IMPLODE",eV[eV.DEFLATE=8]="DEFLATE",eV[eV.DEFLATE64=9]="DEFLATE64",eV[eV.TERSE_OLD=10]="TERSE_OLD",eV[eV.BZIP2=12]="BZIP2",eV[eV.LZMA=14]="LZMA",eV[eV.TERSE_NEW=18]="TERSE_NEW",eV[eV.LZ77=19]="LZ77",eV[eV.WAVPACK=97]="WAVPACK",eV[eV.PPMD=98]="PPMD";let nK=function t(e){if(this.data=e,67324752!==e.readUInt32LE(0))throw new l(a.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};nK.prototype.versionNeeded=function t(){return this.data.readUInt16LE(4)},nK.prototype.flags=function t(){return this.data.readUInt16LE(6)},nK.prototype.compressionMethod=function t(){return this.data.readUInt16LE(8)},nK.prototype.lastModFileTime=function t(){return nY(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},nK.prototype.rawLastModFileTime=function t(){return this.data.readUInt32LE(10)},nK.prototype.crc32=function t(){return this.data.readUInt32LE(14)},nK.prototype.fileNameLength=function t(){return this.data.readUInt16LE(26)},nK.prototype.extraFieldLength=function t(){return this.data.readUInt16LE(28)},nK.prototype.fileName=function t(){return nX(this.data,this.useUTF8(),30,this.fileNameLength())},nK.prototype.extraField=function t(){let e=30+this.fileNameLength();return this.data.slice(e,e+this.extraFieldLength())},nK.prototype.totalSize=function t(){return 30+this.fileNameLength()+this.extraFieldLength()},nK.prototype.useUTF8=function t(){return(2048&this.flags())==2048};let nG=function t(e,n,i){this.header=e,this.record=n,this.data=i};nG.prototype.decompress=function t(){let e=this.header.compressionMethod(),n=nW[e];if(n)return n(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());{let i=nZ[e];throw i||(i="Unknown: "+e),new l(a.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+i)}},nG.prototype.getHeader=function t(){return this.header},nG.prototype.getRecord=function t(){return this.record},nG.prototype.getRawData=function t(){return this.data};let nQ=function t(e){this.data=e};nQ.prototype.crc32=function t(){return this.data.readUInt32LE(0)},nQ.prototype.compressedSize=function t(){return this.data.readUInt32LE(4)},nQ.prototype.uncompressedSize=function t(){return this.data.readUInt32LE(8)};let nJ=function t(e){if(this.data=e,134630224!==this.data.readUInt32LE(0))throw new l(a.EINVAL,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0))};nJ.prototype.length=function t(){return this.data.readUInt32LE(4)},nJ.prototype.extraFieldData=function t(){return this.data.slice(8,8+this.length())};let n9=function t(e){if(this.data=e,84233040!==this.data.readUInt32LE(0))throw new l(a.EINVAL,"Invalid digital signature signature: "+this.data.readUInt32LE(0))};n9.prototype.size=function t(){return this.data.readUInt16LE(4)},n9.prototype.signatureData=function t(){return this.data.slice(6,6+this.size())};let it=function t(e,n){if(this.zipData=e,this.data=n,33639248!==this.data.readUInt32LE(0))throw new l(a.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};it.prototype.versionMadeBy=function t(){return this.data.readUInt16LE(4)},it.prototype.versionNeeded=function t(){return this.data.readUInt16LE(6)},it.prototype.flag=function t(){return this.data.readUInt16LE(8)},it.prototype.compressionMethod=function t(){return this.data.readUInt16LE(10)},it.prototype.lastModFileTime=function t(){return nY(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},it.prototype.rawLastModFileTime=function t(){return this.data.readUInt32LE(12)},it.prototype.crc32=function t(){return this.data.readUInt32LE(16)},it.prototype.compressedSize=function t(){return this.data.readUInt32LE(20)},it.prototype.uncompressedSize=function t(){return this.data.readUInt32LE(24)},it.prototype.fileNameLength=function t(){return this.data.readUInt16LE(28)},it.prototype.extraFieldLength=function t(){return this.data.readUInt16LE(30)},it.prototype.fileCommentLength=function t(){return this.data.readUInt16LE(32)},it.prototype.diskNumberStart=function t(){return this.data.readUInt16LE(34)},it.prototype.internalAttributes=function t(){return this.data.readUInt16LE(36)},it.prototype.externalAttributes=function t(){return this.data.readUInt32LE(38)},it.prototype.headerRelativeOffset=function t(){return this.data.readUInt32LE(42)},it.prototype.produceFilename=function t(){return nX(this.data,this.useUTF8(),46,this.fileNameLength()).replace(/\\/g,"/")},it.prototype.fileName=function t(){return this._filename},it.prototype.rawFileName=function t(){return this.data.slice(46,46+this.fileNameLength())},it.prototype.extraField=function t(){let e=44+this.fileNameLength();return this.data.slice(e,e+this.extraFieldLength())},it.prototype.fileComment=function t(){let e=46+this.fileNameLength()+this.extraFieldLength();return nX(this.data,this.useUTF8(),e,this.fileCommentLength())},it.prototype.rawFileComment=function t(){let e=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(e,e+this.fileCommentLength())},it.prototype.totalSize=function t(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},it.prototype.isDirectory=function t(){let e=this.fileName();return!!(16&this.externalAttributes())||"/"===e.charAt(e.length-1)},it.prototype.isFile=function t(){return!this.isDirectory()},it.prototype.useUTF8=function t(){return(2048&this.flag())==2048},it.prototype.isEncrypted=function t(){return(1&this.flag())==1},it.prototype.getFileData=function t(){let e=this.headerRelativeOffset(),n=new nK(this.zipData.slice(e));return new nG(n,this,this.zipData.slice(e+n.totalSize()))},it.prototype.getData=function t(){return this.getFileData().decompress()},it.prototype.getRawData=function t(){return this.getFileData().getRawData()},it.prototype.getStats=function t(){return new y(d.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};let ie=function t(e){if(this.data=e,101010256!==this.data.readUInt32LE(0))throw new l(a.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};ie.prototype.diskNumber=function t(){return this.data.readUInt16LE(4)},ie.prototype.cdDiskNumber=function t(){return this.data.readUInt16LE(6)},ie.prototype.cdDiskEntryCount=function t(){return this.data.readUInt16LE(8)},ie.prototype.cdTotalEntryCount=function t(){return this.data.readUInt16LE(10)},ie.prototype.cdSize=function t(){return this.data.readUInt32LE(12)},ie.prototype.cdOffset=function t(){return this.data.readUInt32LE(16)},ie.prototype.cdZipCommentLength=function t(){return this.data.readUInt16LE(20)},ie.prototype.cdZipComment=function t(){return nX(this.data,!0,22,this.cdZipCommentLength())},ie.prototype.rawCdZipComment=function t(){return this.data.slice(22,22+this.cdZipCommentLength())};let ii=function t(e,n,i,r){this.index=e,this.directoryEntries=n,this.eocd=i,this.data=r},ir=function(t){function e(n,i,r){void 0===i&&(i=""),void 0===r&&(r=!0),t.call(this),this.name=i,this._index=new nM,this._directoryEntries=[],this._eocd=null,x(r,e.Name,{zipData:"zip data as a Buffer",name:i}),n instanceof ii?(this._index=n.index,this._directoryEntries=n.directoryEntries,this._eocd=n.eocd,this.data=n.data):(this.data=n,this.populateIndex())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function t(n,i){try{e.computeIndex(n.zipData,function(t){let r=new e(t,n.name,!1);i(null,r)},!1)}catch(r){i(r)}},e.isAvailable=function t(){return!0},e.RegisterDecompressionMethod=function t(e,n){nW[e]=n},e.computeIndex=function t(n,i,r){void 0===r&&(r=!0),r&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");let o=new nM,s=e.getEOCD(n);if(s.diskNumber()!==s.cdDiskNumber())throw new l(a.EINVAL,"ZipFS does not support spanned zip files.");let c=s.cdOffset();if(4294967295===c)throw new l(a.EINVAL,"ZipFS does not support Zip64.");let u=c+s.cdSize();e.computeIndexResponsive(n,o,c,u,i,[],s)},e.getEOCD=function t(e){let n=22,i=Math.min(n+65535,e.length-1);for(let r=n;r<i;r++)if(101010256===e.readUInt32LE(e.length-r))return new ie(e.slice(e.length-r));throw new l(a.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},e.addToIndex=function t(e,n){let i=e.fileName();if("/"===i.charAt(0))throw Error("WHY IS THIS ABSOLUTE");"/"===i.charAt(i.length-1)&&(i=i.substr(0,i.length-1)),e.isDirectory()?n.addPathFast("/"+i,new nz(e)):n.addPathFast("/"+i,new nB(e))},e.computeIndexResponsive=function t(n,i,r,o,s,c,a){if(r<o){let u=0;for(;u++<200&&r<o;){let l=new it(n,n.slice(r));e.addToIndex(l,i),r+=l.totalSize(),c.push(l)}ng(function(){e.computeIndexResponsive(n,i,r,o,s,c,a)})}else s(new ii(i,c,a,n))},e.prototype.getName=function t(){return e.Name+(""!==this.name?" "+this.name:"")},e.prototype.getCentralDirectoryEntry=function t(e){let n=this._index.getInode(e);if(null===n)throw l.ENOENT(e);if(nj(n)||n5(n))return n.getData();throw l.EPERM("Invalid inode: "+n)},e.prototype.getCentralDirectoryEntryAt=function t(e){let n=this._directoryEntries[e];if(!n)throw RangeError("Invalid directory index: "+e+".");return n},e.prototype.getNumberOfCentralDirectoryEntries=function t(){return this._directoryEntries.length},e.prototype.getEndOfCentralDirectory=function t(){return this._eocd},e.prototype.diskSpace=function t(e,n){n(this.data.length,0)},e.prototype.isReadOnly=function t(){return!0},e.prototype.supportsLinks=function t(){return!1},e.prototype.supportsProps=function t(){return!1},e.prototype.supportsSynch=function t(){return!0},e.prototype.statSync=function t(e,n){let i=this._index.getInode(e);if(null===i)throw l.ENOENT(e);let r;if(nj(i))r=i.getData().getStats();else if(n5(i))r=i.getStats();else throw new l(a.EINVAL,"Invalid inode.");return r},e.prototype.openSync=function t(e,n,i){if(n.isWriteable())throw new l(a.EPERM,e);let r=this._index.getInode(e);if(r){if(nj(r)){let o=r.getData(),s=o.getStats();switch(n.pathExistsAction()){case h.THROW_EXCEPTION:case h.TRUNCATE_FILE:throw l.EEXIST(e);case h.NOP:return new G(this,e,n,s,o.getData());default:throw new l(a.EINVAL,"Invalid FileMode object.")}}else throw l.EISDIR(e)}else throw l.ENOENT(e)},e.prototype.readdirSync=function t(e){let n=this._index.getInode(e);if(n){if(n5(n))return n.getListing();throw l.ENOTDIR(e)}throw l.ENOENT(e)},e.prototype.readFileSync=function t(e,n,i){let r=this.openSync(e,i,420);try{let o=r.getBuffer();if(null===n)return U(o);return o.toString(n)}finally{r.closeSync()}},e.prototype.populateIndex=function t(){let n=this._eocd=e.getEOCD(this.data);if(n.diskNumber()!==n.cdDiskNumber())throw new l(a.EINVAL,"ZipFS does not support spanned zip files.");let i=n.cdOffset();if(4294967295===i)throw new l(a.EINVAL,"ZipFS does not support Zip64.");let r=i+n.cdSize();for(;i<r;){let o=new it(this.data,this.data.slice(i));i+=o.totalSize(),e.addToIndex(o,this._index),this._directoryEntries.push(o)}},e}(Y);function io(t,e,n){return t.toString("ascii",e,e+n).trim()}function is(t,e,n){if(1===n)return String.fromCharCode(t[e]);let i=Math.floor(n/2),r=Array(i);for(let o=0;o<i;o++){let s=e+(o<<1);r[o]=String.fromCharCode(t[s+1]|t[s]<<8)}return r.join("")}function ic(t,e){let n=parseInt(io(t,e,4),10),i=parseInt(io(t,e+4,2),10),r=parseInt(io(t,e+6,2),10),o=parseInt(io(t,e+8,2),10),s=parseInt(io(t,e+10,2),10),c=parseInt(io(t,e+12,2),10),a=parseInt(io(t,e+14,2),10);return new Date(n,i,r,o,s,c,100*a)}function ia(t,e){let n=t[e],i=t[e+1],r=t[e+2],o=t[e+3],s=t[e+4],c=t[e+5];return new Date(n,i-1,r,o,s,c)}function iu(t,e){let n=t.slice(e),i=new im(n);switch(i.signatureWord()){case 17221:return new iw(n);case 20548:return new i_(n);case 21328:return new iS(n);case 21332:return new ib(n);case 17746:return new iE(n);case 17747:return new i0(n);case 20568:return new ik(n);case 20558:return new iI(n);case 21324:return new iF(n);case 20045:return new iN(n);case 17228:return new iL(n);case 20556:return new iR(n);case 21061:return new iO(n);case 21574:return new iT(n);case 21318:return new i3(n);case 21074:return new iv(n);default:return i}}function il(t,e,n,i){n-=4;let r=[];for(;e<n;){let o=iu(t,e),s=o.length();if(0===s||(e+=s,o instanceof ib))break;o instanceof iw?r=r.concat(o.getEntries(i)):r.push(o)}return r}ir.Name="ZipFS",ir.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:z},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},ir.CompressionMethod=nZ,ir.RegisterDecompressionMethod(nZ.DEFLATE,function(t,e,n){return A(nq(t.slice(0,e),{chunkSize:n}))}),ir.RegisterDecompressionMethod(nZ.STORED,function(t,e,n){return U(t,0,n)});let ih=function t(e){this._data=e};ih.prototype.type=function t(){return this._data[0]},ih.prototype.standardIdentifier=function t(){return io(this._data,1,5)},ih.prototype.version=function t(){return this._data[6]},ih.prototype.data=function t(){return this._data.slice(7,2048)};let ip=function(t){function e(e){t.call(this,e),this._root=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.systemIdentifier=function t(){return this._getString32(8)},e.prototype.volumeIdentifier=function t(){return this._getString32(40)},e.prototype.volumeSpaceSize=function t(){return this._data.readUInt32LE(80)},e.prototype.volumeSetSize=function t(){return this._data.readUInt16LE(120)},e.prototype.volumeSequenceNumber=function t(){return this._data.readUInt16LE(124)},e.prototype.logicalBlockSize=function t(){return this._data.readUInt16LE(128)},e.prototype.pathTableSize=function t(){return this._data.readUInt32LE(132)},e.prototype.locationOfTypeLPathTable=function t(){return this._data.readUInt32LE(140)},e.prototype.locationOfOptionalTypeLPathTable=function t(){return this._data.readUInt32LE(144)},e.prototype.locationOfTypeMPathTable=function t(){return this._data.readUInt32BE(148)},e.prototype.locationOfOptionalTypeMPathTable=function t(){return this._data.readUInt32BE(152)},e.prototype.rootDirectoryEntry=function t(e){return null===this._root&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},e.prototype.volumeSetIdentifier=function t(){return this._getString(190,128)},e.prototype.publisherIdentifier=function t(){return this._getString(318,128)},e.prototype.dataPreparerIdentifier=function t(){return this._getString(446,128)},e.prototype.applicationIdentifier=function t(){return this._getString(574,128)},e.prototype.copyrightFileIdentifier=function t(){return this._getString(702,38)},e.prototype.abstractFileIdentifier=function t(){return this._getString(740,36)},e.prototype.bibliographicFileIdentifier=function t(){return this._getString(776,37)},e.prototype.volumeCreationDate=function t(){return ic(this._data,813)},e.prototype.volumeModificationDate=function t(){return ic(this._data,830)},e.prototype.volumeExpirationDate=function t(){return ic(this._data,847)},e.prototype.volumeEffectiveDate=function t(){return ic(this._data,864)},e.prototype.fileStructureVersion=function t(){return this._data[881]},e.prototype.applicationUsed=function t(){return this._data.slice(883,1395)},e.prototype.reserved=function t(){return this._data.slice(1395,2048)},e.prototype._getString32=function t(e){return this._getString(e,32)},e}(ih),id=function(t){function e(e){if(t.call(this,e),1!==this.type())throw new l(a.EIO,"Invalid primary volume descriptor.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.name=function t(){return"ISO9660"},e.prototype._constructRootDirectoryRecord=function t(e){return new ig(e,-1)},e.prototype._getString=function t(e,n){return this._getString(e,n)},e}(ip),iy=function(t){function e(e){if(t.call(this,e),2!==this.type())throw new l(a.EIO,"Invalid supplementary volume descriptor.");let n=this.escapeSequence(),i=n[2];if(37!==n[0]||47!==n[1]||64!==i&&67!==i&&69!==i)throw new l(a.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+n.toString())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.name=function t(){return"Joliet"},e.prototype.escapeSequence=function t(){return this._data.slice(88,120)},e.prototype._constructRootDirectoryRecord=function t(e){return new i8(e,-1)},e.prototype._getString=function t(e,n){return is(this._data,e,n)},e}(ip),i$=function t(e,n){this._suEntries=null,this._fileOrDir=null,this._data=e,this._rockRidgeOffset=n};i$.prototype.hasRockRidge=function t(){return this._rockRidgeOffset>-1},i$.prototype.getRockRidgeOffset=function t(){return this._rockRidgeOffset},i$.prototype.rootCheckForRockRidge=function t(e){let n=this.getDirectory(e);this._rockRidgeOffset=n.getDotEntry(e)._getRockRidgeOffset(e),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},i$.prototype.length=function t(){return this._data[0]},i$.prototype.extendedAttributeRecordLength=function t(){return this._data[1]},i$.prototype.lba=function t(){return 2048*this._data.readUInt32LE(2)},i$.prototype.dataLength=function t(){return this._data.readUInt32LE(10)},i$.prototype.recordingDate=function t(){return ia(this._data,18)},i$.prototype.fileFlags=function t(){return this._data[25]},i$.prototype.fileUnitSize=function t(){return this._data[26]},i$.prototype.interleaveGapSize=function t(){return this._data[27]},i$.prototype.volumeSequenceNumber=function t(){return this._data.readUInt16LE(28)},i$.prototype.identifier=function t(){return this._getString(33,this._data[32])},i$.prototype.fileName=function t(e){if(this.hasRockRidge()){let n=this._rockRidgeFilename(e);if(null!==n)return n}let i=this.identifier();if(this.isDirectory(e))return i;let r=i.indexOf(";");return -1===r?i:"."===i[r-1]?i.slice(0,r-1):i.slice(0,r)},i$.prototype.isDirectory=function t(e){let n=!!(2&this.fileFlags());return!n&&this.hasRockRidge()&&(n=this.getSUEntries(e).filter(function(t){return t instanceof iL}).length>0),n},i$.prototype.isSymlink=function t(e){return this.hasRockRidge()&&this.getSUEntries(e).filter(function(t){return t instanceof iF}).length>0},i$.prototype.getSymlinkPath=function t(e){let n="",i=this.getSUEntries(e),r=this._getGetString();for(let o=0,s=i;o<s.length;o+=1){let c=s[o];if(c instanceof iF){let a=c.componentRecords();for(let u=0,l=a;u<l.length;u+=1){let f=l[u],h=f.flags();2&h?n+="./":4&h?n+="../":8&h?n+="/":(n+=f.content(r),1&h||(n+="/"))}if(!c.continueFlag())break}}return n.length>1&&"/"===n[n.length-1]?n.slice(0,n.length-1):n},i$.prototype.getFile=function t(e){if(this.isDirectory(e))throw Error("Tried to get a File from a directory.");return null===this._fileOrDir&&(this._fileOrDir=e.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},i$.prototype.getDirectory=function t(e){if(!this.isDirectory(e))throw Error("Tried to get a Directory from a file.");return null===this._fileOrDir&&(this._fileOrDir=this._constructDirectory(e)),this._fileOrDir},i$.prototype.getSUEntries=function t(e){return this._suEntries||this._constructSUEntries(e),this._suEntries},i$.prototype._rockRidgeFilename=function t(e){let n=this.getSUEntries(e).filter(function(t){return t instanceof iN});if(0===n.length||6&n[0].flags())return null;let i="",r=this._getGetString();for(let o=0,s=n;o<s.length;o+=1){let c=s[o];if(i+=c.name(r),!(1&c.flags()))break}return i},i$.prototype._constructSUEntries=function t(e){let n=33+this._data[32];n%2==1&&n++,n+=this._rockRidgeOffset,this._suEntries=il(this._data,n,this.length(),e)},i$.prototype._getRockRidgeOffset=function t(e){this._rockRidgeOffset=0;let n=this.getSUEntries(e);if(n.length>0){let i=n[0];if(i instanceof iS&&i.checkBytesPass())for(let r=1;r<n.length;r++){let o=n[r];if(o instanceof iv||o instanceof iE&&"IEEE_P1282"===o.extensionIdentifier())return i.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var ig=function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._getString=function t(e,n){return io(this._data,e,n)},e.prototype._constructDirectory=function t(e){return new i4(this,e)},e.prototype._getGetString=function t(){return io},e}(i$),i8=function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._getString=function t(e,n){return is(this._data,e,n)},e.prototype._constructDirectory=function t(e){return new iD(this,e)},e.prototype._getGetString=function t(){return is},e}(i$),im=function t(e){this._data=e};im.prototype.signatureWord=function t(){return this._data.readUInt16BE(0)},im.prototype.signatureWordString=function t(){return io(this._data,0,2)},im.prototype.length=function t(){return this._data[2]},im.prototype.suVersion=function t(){return this._data[3]};var iw=function(t){function e(e){t.call(this,e),this._entries=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.continuationLba=function t(){return this._data.readUInt32LE(4)},e.prototype.continuationLbaOffset=function t(){return this._data.readUInt32LE(12)},e.prototype.continuationLength=function t(){return this._data.readUInt32LE(20)},e.prototype.getEntries=function t(e){if(!this._entries){let n=2048*this.continuationLba()+this.continuationLbaOffset();this._entries=il(e,n,this.continuationLength(),e)}return this._entries},e}(im),i_=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(im),iS=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.checkBytesPass=function t(){return 190===this._data[4]&&239===this._data[5]},e.prototype.bytesSkipped=function t(){return this._data[6]},e}(im),ib=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(im),iE=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.identifierLength=function t(){return this._data[4]},e.prototype.descriptorLength=function t(){return this._data[5]},e.prototype.sourceLength=function t(){return this._data[6]},e.prototype.extensionVersion=function t(){return this._data[7]},e.prototype.extensionIdentifier=function t(){return io(this._data,8,this.identifierLength())},e.prototype.extensionDescriptor=function t(){return io(this._data,8+this.identifierLength(),this.descriptorLength())},e.prototype.extensionSource=function t(){return io(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},e}(im),i0=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.extensionSequence=function t(){return this._data[4]},e}(im),iv=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(im),ik=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.mode=function t(){return this._data.readUInt32LE(4)},e.prototype.fileLinks=function t(){return this._data.readUInt32LE(12)},e.prototype.uid=function t(){return this._data.readUInt32LE(20)},e.prototype.gid=function t(){return this._data.readUInt32LE(28)},e.prototype.inode=function t(){return this._data.readUInt32LE(36)},e}(im),iI=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.devTHigh=function t(){return this._data.readUInt32LE(4)},e.prototype.devTLow=function t(){return this._data.readUInt32LE(12)},e}(im),iF=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flags=function t(){return this._data[4]},e.prototype.continueFlag=function t(){return 1&this.flags()},e.prototype.componentRecords=function t(){let e=[],n=5;for(;n<this.length();){let i=new ix(this._data.slice(n));e.push(i),n+=i.length()}return e},e}(im),ix=function t(e){this._data=e};ix.prototype.flags=function t(){return this._data[0]},ix.prototype.length=function t(){return 2+this.componentLength()},ix.prototype.componentLength=function t(){return this._data[1]},ix.prototype.content=function t(e){return e(this._data,2,this.componentLength())};var iN=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flags=function t(){return this._data[4]},e.prototype.name=function t(e){return e(this._data,5,this.length()-5)},e}(im),iL=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.childDirectoryLba=function t(){return this._data.readUInt32LE(4)},e}(im),iR=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parentDirectoryLba=function t(){return this._data.readUInt32LE(4)},e}(im),iO=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(im),iT=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flags=function t(){return this._data[4]},e.prototype.creation=function t(){return 1&this.flags()?this._longFormDates()?ic(this._data,5):ia(this._data,5):null},e.prototype.modify=function t(){if(!(2&this.flags()))return null;{let e=1&this.flags()?1:0;return this._longFormDates?ic(this._data,5+17*e):ia(this._data,5+7*e)}},e.prototype.access=function t(){if(!(4&this.flags()))return null;{let e=1&this.flags()?1:0;return(e+=2&this.flags()?1:0,this._longFormDates)?ic(this._data,5+17*e):ia(this._data,5+7*e)}},e.prototype.backup=function t(){if(!(16&this.flags()))return null;{let e=1&this.flags()?1:0;return(e+=2&this.flags()?1:0,e+=4&this.flags()?1:0,this._longFormDates)?ic(this._data,5+17*e):ia(this._data,5+7*e)}},e.prototype.expiration=function t(){if(!(32&this.flags()))return null;{let e=1&this.flags()?1:0;return(e+=2&this.flags()?1:0,e+=4&this.flags()?1:0,e+=16&this.flags()?1:0,this._longFormDates)?ic(this._data,5+17*e):ia(this._data,5+7*e)}},e.prototype.effective=function t(){if(!(64&this.flags()))return null;{let e=1&this.flags()?1:0;return(e+=2&this.flags()?1:0,e+=4&this.flags()?1:0,e+=16&this.flags()?1:0,e+=32&this.flags()?1:0,this._longFormDates)?ic(this._data,5+17*e):ia(this._data,5+7*e)}},e.prototype._longFormDates=function t(){return!!this.flags()},e}(im),i3=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.virtualSizeHigh=function t(){return this._data.readUInt32LE(4)},e.prototype.virtualSizeLow=function t(){return this._data.readUInt32LE(12)},e.prototype.tableDepth=function t(){return this._data[20]},e}(im);let i1=function t(e,n){let i=this;this._fileList=[],this._fileMap={},this._record=e;let r=e.lba(),o=r+e.dataLength();for(!(2&e.fileFlags())&&(r=2048*e.getSUEntries(n).filter(function(t){return t instanceof iL})[0].childDirectoryLba(),o=1/0);r<o;){if(0===n[r]){r++;continue}let s=i._constructDirectoryRecord(n.slice(r)),c=s.fileName(n);"\0"!==c&&"\x01"!==c?s.hasRockRidge()&&0!==s.getSUEntries(n).filter(function(t){return t instanceof iO}).length||(i._fileMap[c]=s,i._fileList.push(c)):o===1/0&&(o=r+s.dataLength()),r+=s.length()}};i1.prototype.getRecord=function t(e){return this._fileMap[e]},i1.prototype.getFileList=function t(){return this._fileList},i1.prototype.getDotEntry=function t(e){return this._constructDirectoryRecord(e.slice(this._record.lba()))};var i4=function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._constructDirectoryRecord=function t(e){return new ig(e,this._record.getRockRidgeOffset())},e}(i1),iD=function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._constructDirectoryRecord=function t(e){return new i8(e,this._record.getRockRidgeOffset())},e}(i1);let iA=function(t){function e(n,i,r){let o=this;void 0===i&&(i=""),void 0===r&&(r=!0),t.call(this),this._data=n,x(r,e.Name,{data:"ISO data as a Buffer",name:i});let s=!1,c=32768,u=[];for(;!s;){let f=n.slice(c),h=new ih(f);switch(h.type()){case 1:u.push(new id(f));break;case 2:u.push(new iy(f));break;case 255:s=!0}c+=2048}if(0===u.length)throw new l(a.EIO,"Unable to find a suitable volume descriptor.");u.forEach(function(t){o._pvd&&2===o._pvd.type()||(o._pvd=t)}),this._root=this._pvd.rootDirectoryEntry(n),this._name=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function t(n,i){let r,o;try{r=new e(n.data,n.name,!1)}catch(s){}finally{i(o,r)}},e.isAvailable=function t(){return!0},e.prototype.getName=function t(){let e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},e.prototype.diskSpace=function t(e,n){n(this._data.length,0)},e.prototype.isReadOnly=function t(){return!0},e.prototype.supportsLinks=function t(){return!1},e.prototype.supportsProps=function t(){return!1},e.prototype.supportsSynch=function t(){return!0},e.prototype.statSync=function t(e,n){let i=this._getDirectoryRecord(e);if(null===i)throw l.ENOENT(e);return this._getStats(e,i)},e.prototype.openSync=function t(e,n,i){if(n.isWriteable())throw new l(a.EPERM,e);let r=this._getDirectoryRecord(e);if(r){if(r.isSymlink(this._data))return this.openSync(c.resolve(e,r.getSymlinkPath(this._data)),n,i);if(r.isDirectory(this._data))throw l.EISDIR(e);{let o=r.getFile(this._data),s=this._getStats(e,r);switch(n.pathExistsAction()){case h.THROW_EXCEPTION:case h.TRUNCATE_FILE:throw l.EEXIST(e);case h.NOP:return new G(this,e,n,s,o);default:throw new l(a.EINVAL,"Invalid FileMode object.")}}}else throw l.ENOENT(e)},e.prototype.readdirSync=function t(e){let n=this._getDirectoryRecord(e);if(n){if(n.isDirectory(this._data))return n.getDirectory(this._data).getFileList().slice(0);throw l.ENOTDIR(e)}throw l.ENOENT(e)},e.prototype.readFileSync=function t(e,n,i){let r=this.openSync(e,i,420);try{let o=r.getBuffer();if(null===n)return U(o);return o.toString(n)}finally{r.closeSync()}},e.prototype._getDirectoryRecord=function t(e){if("/"===e)return this._root;let n=e.split("/").slice(1),i=this._root;for(let r=0,o=n;r<o.length;r+=1){let s=o[r];if(!i.isDirectory(this._data)||!(i=i.getDirectory(this._data).getRecord(s)))return null}return i},e.prototype._getStats=function t(e,n){if(n.isSymlink(this._data)){let i=c.resolve(e,n.getSymlinkPath(this._data)),r=this._getDirectoryRecord(i);return r?this._getStats(i,r):null}{let o=n.dataLength(),s=365,a=n.recordingDate(),u=a,l=a,f=a;if(n.hasRockRidge()){let h=n.getSUEntries(this._data);for(let p=0,$=h;p<$.length;p+=1){let g=$[p];if(g instanceof ik)s=g.mode();else if(g instanceof iT){let m=g.flags();4&m&&(u=g.access()),2&m&&(l=g.modify()),1&m&&(f=g.creation())}}}return s&=365,new y(n.isDirectory(this._data)?d.DIRECTORY:d.FILE,o,s,u,l,f)}},e}(Y);iA.Name="IsoFS",iA.Options={data:{type:"object",description:"The ISO file in a buffer",validator:z}},[J,eg,ew,e_,eF,eW,eQ,iA,nn,ni,n0,n6,n7,ir].forEach(function(t){let e=t.Create;t.Create=function(n,i){let r="function"==typeof n,o=r?n:i,s=r?{}:n;j(t,s,function n(i){i?o(i):e.call(t,s,o)})}});let i2={AsyncMirror:J,Dropbox:eg,Emscripten:ew,FolderAdapter:e_,HTML5FS:eF,InMemory:eW,IndexedDB:eQ,IsoFS:iA,LocalStorage:nn,MountableFileSystem:ni,OverlayFS:n0,WorkerFS:n6,XmlHttpRequest:n7,ZipFS:ir};function i6(t,e){i2[t]=e}function iP(t){switch(t){case"fs":return k;case"path":return c;case"buffer":return s;case"process":return o;case"bfs_utils":return V;default:return i2[t]}}function iC(t){return k.initialize(t)}function iU(t,e){let n=t.fs;if(!n)return e(new l(a.EPERM,'Missing "fs" property on configuration object.'));let i=t.options,r=0,o=!1;function s(){if(!o){o=!0;let t=i2[n];t?t.Create(i,e):e(new l(a.EPERM,"File system "+n+" is not available in BrowserFS."))}}if(null!==i&&"object"==typeof i){let c=!1;Object.keys(i).filter(function(t){return"fs"!==t}).forEach(function(t){let n=i[t];null!==n&&"object"==typeof n&&n.fs&&(r++,iU(n,function(n,a){(r--,n)?o||(o=!0,e(n)):(i[t]=a,0===r&&c&&s())}))}),c=!0}0===r&&s()}o.initializeTTYs&&o.initializeTTYs(),"b"!=="ab".substr(-1)&&(String.prototype.substr=(eq=String.prototype.substr,function(t,e){return t<0&&(t=this.length+t),eq.call(this,t,e)})),"undefined"==typeof ArrayBuffer||"undefined"==typeof Uint8Array||Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t<0&&(t=this.length+t)<0&&(t=0),e<0&&(e=this.length+e)<0&&(e=0),e<t&&(e=t),new Uint8Array(this.buffer,this.byteOffset+t,e-t)}),e.install=function e(n){n.Buffer=t,n.process=o;let i=n.require?n.require:null;n.require=function(t){return iP(t)||i.apply(null,Array.prototype.slice.call(arguments,0))}},e.registerFileSystem=i6,e.BFSRequire=iP,e.initialize=iC,e.configure=function t(e,n){iU(e,function(t,e){e?(iC(e),n()):n(t)})},e.getFileSystem=iU,e.EmscriptenFS=H,e.FileSystem=i2,e.Errors=f,e.setImmediate=ng}).call(e,n(1),function(){return this}(),n(5)(t),n(6))},function(t,e,n){t.exports=n(2).Buffer},function(t,e,n){(function(t){"use strict";let i=n(3),r=n(4);function o(e){if(e>2147483647)throw RangeError("Invalid typed array length");let n=new Uint8Array(e);return n.__proto__=t.prototype,n}function t(t,e,n){if("number"==typeof t){if("string"==typeof e)throw Error("If encoding is specified then the first argument must be a string");return a(t)}return s(t,e,n)}function s(e,n,i){if("number"==typeof e)throw TypeError('"value" argument must not be a number');return U(e)?function e(n,i,r){if(i<0||n.byteLength<i)throw RangeError("'offset' is out of bounds");if(n.byteLength<i+(r||0))throw RangeError("'length' is out of bounds");let o;return(o=void 0===i&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,i):new Uint8Array(n,i,r)).__proto__=t.prototype,o}(e,n,i):"string"==typeof e?function e(n,i){if(("string"!=typeof i||""===i)&&(i="utf8"),!t.isEncoding(i))throw TypeError('"encoding" must be a valid string encoding');let r=0|f(n,i),s=o(r),c=s.write(n,i);return c!==r&&(s=s.slice(0,c)),s}(e,n):function e(n){if(t.isBuffer(n)){let i=0|l(n.length),r=o(i);return 0===r.length||n.copy(r,0,0,i),r}if(n){if(M(n)||"length"in n){var s;return"number"!=typeof n.length||(s=n.length)!=s?o(0):u(n)}if("Buffer"===n.type&&Array.isArray(n.data))return u(n.data)}throw TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e)}function c(t){if("number"!=typeof t)throw TypeError('"size" argument must be a number');if(t<0)throw RangeError('"size" argument must not be negative')}function a(t){return c(t),o(t<0?0:0|l(t))}function u(t){let e=t.length<0?0:0|l(t.length),n=o(e);for(let i=0;i<e;i+=1)n[i]=255&t[i];return n}function l(t){if(t>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function f(e,n){if(t.isBuffer(e))return e.length;if(M(e)||U(e))return e.byteLength;"string"!=typeof e&&(e=""+e);let i=e.length;if(0===i)return 0;let r=!1;for(;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return A(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return P(e).length;default:if(r)return A(e).length;n=(""+n).toLowerCase(),r=!0}}function h(t,e,n){let i=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return v(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return b(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,e,n);default:if(i)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function p(t,e,n){let i=t[e];t[e]=t[n],t[n]=i}function d(e,n,i,r,o){var s;if(0===e.length)return -1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),(s=i=+i)!=s&&(i=o?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(o)return -1;i=e.length-1}else if(i<0){if(!o)return -1;i=0}if("string"==typeof n&&(n=t.from(n,r)),t.isBuffer(n))return 0===n.length?-1:y(e,n,i,r,o);if("number"==typeof n)return(n&=255,"function"==typeof Uint8Array.prototype.indexOf)?o?Uint8Array.prototype.indexOf.call(e,n,i):Uint8Array.prototype.lastIndexOf.call(e,n,i):y(e,[n],i,r,o);throw TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){let o=1,s=t.length,c=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return -1;o=2,s/=2,c/=2,n/=2}function a(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}let u;if(r){let l=-1;for(u=n;u<s;u++)if(a(t,u)===a(e,-1===l?0:u-l)){if(-1===l&&(l=u),u-l+1===c)return l*o}else -1!==l&&(u-=u-l),l=-1}else for(n+c>s&&(n=s-c),u=n;u>=0;u--){let f=!0;for(let h=0;h<c;h++)if(a(t,u+h)!==a(e,h)){f=!1;break}if(f)return u}return -1}function $(t,e,n,i){n=Number(n)||0;let r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;let o=e.length;if(o%2!=0)throw TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s,c=0;c<i;++c){let a=parseInt(e.substr(2*c,2),16);if((s=a)!=s)break;t[n+c]=a}return c}function g(t,e,n,i){return C(A(e,t.length-n),t,n,i)}function m(t,e,n,i){return C(function t(e){let n=[];for(let i=0;i<e.length;++i)n.push(255&e.charCodeAt(i));return n}(e),t,n,i)}function w(t,e,n,i){return m(t,e,n,i)}function _(t,e,n,i){return C(P(e),t,n,i)}function S(t,e,n,i){return C(function t(e,n){let i,r,o,s=[];for(let c=0;c<e.length&&!((n-=2)<0);++c)r=(i=e.charCodeAt(c))>>8,o=i%256,s.push(o),s.push(r);return s}(e,t.length-n),t,n,i)}function b(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);let i=[],r=e;for(;r<n;){let o=t[r],s=null,c=o>239?4:o>223?3:o>191?2:1;if(r+c<=n){var a,u,l,f;switch(c){case 1:o<128&&(s=o);break;case 2:(192&(a=t[r+1]))==128&&(f=(31&o)<<6|63&a)>127&&(s=f);break;case 3:a=t[r+1],u=t[r+2],(192&a)==128&&(192&u)==128&&(f=(15&o)<<12|(63&a)<<6|63&u)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:a=t[r+1],u=t[r+2],l=t[r+3],(192&a)==128&&(192&u)==128&&(192&l)==128&&(f=(15&o)<<18|(63&a)<<12|(63&u)<<6|63&l)>65535&&f<1114112&&(s=f)}}null===s?(s=65533,c=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=c}return function t(e){let n=e.length;if(n<=4096)return String.fromCharCode.apply(String,e);let i="",r=0;for(;r<n;)i+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return i}(i)}function v(t,e,n){let i="";n=Math.min(t.length,n);for(let r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function k(t,e,n){let i="";n=Math.min(t.length,n);for(let r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function I(t,e,n){let i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);let r="";for(let o=e;o<n;++o)r+=D(t[o]);return r}function F(t,e,n){let i=t.slice(e,n),r="";for(let o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function x(t,e,n){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>n)throw RangeError("Trying to access beyond buffer length")}function N(e,n,i,r,o,s){if(!t.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<s)throw RangeError('"value" argument is out of bounds');if(i+r>e.length)throw RangeError("Index out of range")}function L(t,e,n,i,r,o){if(n+i>t.length||n<0)throw RangeError("Index out of range")}function R(t,e,n,i,o){return e=+e,n>>>=0,o||L(t,e,n,4,34028234663852886e22,-34028234663852886e22),r.write(t,e,n,i,23,4),n+4}function O(t,e,n,i,o){return e=+e,n>>>=0,o||L(t,e,n,8,17976931348623157e292,-17976931348623157e292),r.write(t,e,n,i,52,8),n+8}e.Buffer=t,e.SlowBuffer=function e(n){return+n!=n&&(n=0),t.alloc(+n)},e.INSPECT_MAX_BYTES=50,e.kMaxLength=2147483647,t.TYPED_ARRAY_SUPPORT=function t(){try{let e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(n){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(t,e,n){return s(t,e,n)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function(t,e,n){var i,r,s;return i=t,r=e,s=n,(c(i),i<=0)?o(i):void 0!==r?"string"==typeof s?o(i).fill(r,s):o(i).fill(r):o(i)},t.allocUnsafe=function(t){return a(t)},t.allocUnsafeSlow=function(t){return a(t)},t.isBuffer=function t(e){return null!=e&&!0===e._isBuffer},t.compare=function e(n,i){if(!t.isBuffer(n)||!t.isBuffer(i))throw TypeError("Arguments must be Buffers");if(n===i)return 0;let r=n.length,o=i.length;for(let s=0,c=Math.min(r,o);s<c;++s)if(n[s]!==i[s]){r=n[s],o=i[s];break}return r<o?-1:o<r?1:0},t.isEncoding=function t(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function e(n,i){if(!Array.isArray(n))throw TypeError('"list" argument must be an Array of Buffers');if(0===n.length)return t.alloc(0);let r;if(void 0===i)for(r=0,i=0;r<n.length;++r)i+=n[r].length;let o=t.allocUnsafe(i),s=0;for(r=0;r<n.length;++r){let c=n[r];if(!t.isBuffer(c))throw TypeError('"list" argument must be an Array of Buffers');c.copy(o,s),s+=c.length}return o},t.byteLength=f,t.prototype._isBuffer=!0,t.prototype.swap16=function t(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<e;n+=2)p(this,n,n+1);return this},t.prototype.swap32=function t(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<e;n+=4)p(this,n,n+3),p(this,n+1,n+2);return this},t.prototype.swap64=function t(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<e;n+=8)p(this,n,n+7),p(this,n+1,n+6),p(this,n+2,n+5),p(this,n+3,n+4);return this},t.prototype.toString=function t(){let e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):h.apply(this,arguments)},t.prototype.equals=function e(n){if(!t.isBuffer(n))throw TypeError("Argument must be a Buffer");return this===n||0===t.compare(this,n)},t.prototype.inspect=function t(){let n="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(n=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(n+=" ... ")),"<Buffer "+n+">"},t.prototype.compare=function e(n,i,r,o,s){if(!t.isBuffer(n))throw TypeError("Argument must be a Buffer");if(void 0===i&&(i=0),void 0===r&&(r=n?n.length:0),void 0===o&&(o=0),void 0===s&&(s=this.length),i<0||r>n.length||o<0||s>this.length)throw RangeError("out of range index");if(o>=s&&i>=r)return 0;if(o>=s)return -1;if(i>=r)return 1;if(i>>>=0,r>>>=0,o>>>=0,s>>>=0,this===n)return 0;let c=s-o,a=r-i,u=Math.min(c,a),l=this.slice(o,s),f=n.slice(i,r);for(let h=0;h<u;++h)if(l[h]!==f[h]){c=l[h],a=f[h];break}return c<a?-1:a<c?1:0},t.prototype.includes=function t(e,n,i){return -1!==this.indexOf(e,n,i)},t.prototype.indexOf=function t(e,n,i){return d(this,e,n,i,!0)},t.prototype.lastIndexOf=function t(e,n,i){return d(this,e,n,i,!1)},t.prototype.write=function t(e,n,i,r){if(void 0===n)r="utf8",i=this.length,n=0;else if(void 0===i&&"string"==typeof n)r=n,i=this.length,n=0;else if(isFinite(n))n>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-n;if((void 0===i||i>o)&&(i=o),e.length>0&&(i<0||n<0)||n>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return $(this,e,n,i);case"utf8":case"utf-8":return g(this,e,n,i);case"ascii":return m(this,e,n,i);case"latin1":case"binary":var c,a,u,l;return c=this,m(c,a=e,u=n,l=i);case"base64":return _(this,e,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,n,i);default:if(s)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},t.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.slice=function e(n,i){let r=this.length;n=~~n,i=void 0===i?r:~~i,n<0?(n+=r)<0&&(n=0):n>r&&(n=r),i<0?(i+=r)<0&&(i=0):i>r&&(i=r),i<n&&(i=n);let o=this.subarray(n,i);return o.__proto__=t.prototype,o},t.prototype.readUIntLE=function t(e,n,i){e>>>=0,n>>>=0,i||x(e,n,this.length);let r=this[e],o=1,s=0;for(;++s<n&&(o*=256);)r+=this[e+s]*o;return r},t.prototype.readUIntBE=function t(e,n,i){e>>>=0,n>>>=0,i||x(e,n,this.length);let r=this[e+--n],o=1;for(;n>0&&(o*=256);)r+=this[e+--n]*o;return r},t.prototype.readUInt8=function t(e,n){return e>>>=0,n||x(e,1,this.length),this[e]},t.prototype.readUInt16LE=function t(e,n){return e>>>=0,n||x(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function t(e,n){return e>>>=0,n||x(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function t(e,n){return e>>>=0,n||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function t(e,n){return e>>>=0,n||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function t(e,n,i){e>>>=0,n>>>=0,i||x(e,n,this.length);let r=this[e],o=1,s=0;for(;++s<n&&(o*=256);)r+=this[e+s]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*n)),r},t.prototype.readIntBE=function t(e,n,i){e>>>=0,n>>>=0,i||x(e,n,this.length);let r=n,o=1,s=this[e+--r];for(;r>0&&(o*=256);)s+=this[e+--r]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*n)),s},t.prototype.readInt8=function t(e,n){return(e>>>=0,n||x(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},t.prototype.readInt16LE=function t(e,n){e>>>=0,n||x(e,2,this.length);let i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},t.prototype.readInt16BE=function t(e,n){e>>>=0,n||x(e,2,this.length);let i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},t.prototype.readInt32LE=function t(e,n){return e>>>=0,n||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function t(e,n){return e>>>=0,n||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function t(e,n){return e>>>=0,n||x(e,4,this.length),r.read(this,e,!0,23,4)},t.prototype.readFloatBE=function t(e,n){return e>>>=0,n||x(e,4,this.length),r.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function t(e,n){return e>>>=0,n||x(e,8,this.length),r.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function t(e,n){return e>>>=0,n||x(e,8,this.length),r.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function t(e,n,i,r){if(e=+e,n>>>=0,i>>>=0,!r){let o=Math.pow(2,8*i)-1;N(this,e,n,i,o,0)}let s=1,c=0;for(this[n]=255&e;++c<i&&(s*=256);)this[n+c]=e/s&255;return n+i},t.prototype.writeUIntBE=function t(e,n,i,r){if(e=+e,n>>>=0,i>>>=0,!r){let o=Math.pow(2,8*i)-1;N(this,e,n,i,o,0)}let s=i-1,c=1;for(this[n+s]=255&e;--s>=0&&(c*=256);)this[n+s]=e/c&255;return n+i},t.prototype.writeUInt8=function t(e,n,i){return e=+e,n>>>=0,i||N(this,e,n,1,255,0),this[n]=255&e,n+1},t.prototype.writeUInt16LE=function t(e,n,i){return e=+e,n>>>=0,i||N(this,e,n,2,65535,0),this[n]=255&e,this[n+1]=e>>>8,n+2},t.prototype.writeUInt16BE=function t(e,n,i){return e=+e,n>>>=0,i||N(this,e,n,2,65535,0),this[n]=e>>>8,this[n+1]=255&e,n+2},t.prototype.writeUInt32LE=function t(e,n,i){return e=+e,n>>>=0,i||N(this,e,n,4,4294967295,0),this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e,n+4},t.prototype.writeUInt32BE=function t(e,n,i){return e=+e,n>>>=0,i||N(this,e,n,4,4294967295,0),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},t.prototype.writeIntLE=function t(e,n,i,r){if(e=+e,n>>>=0,!r){let o=Math.pow(2,8*i-1);N(this,e,n,i,o-1,-o)}let s=0,c=1,a=0;for(this[n]=255&e;++s<i&&(c*=256);)e<0&&0===a&&0!==this[n+s-1]&&(a=1),this[n+s]=(e/c>>0)-a&255;return n+i},t.prototype.writeIntBE=function t(e,n,i,r){if(e=+e,n>>>=0,!r){let o=Math.pow(2,8*i-1);N(this,e,n,i,o-1,-o)}let s=i-1,c=1,a=0;for(this[n+s]=255&e;--s>=0&&(c*=256);)e<0&&0===a&&0!==this[n+s+1]&&(a=1),this[n+s]=(e/c>>0)-a&255;return n+i},t.prototype.writeInt8=function t(e,n,i){return e=+e,n>>>=0,i||N(this,e,n,1,127,-128),e<0&&(e=255+e+1),this[n]=255&e,n+1},t.prototype.writeInt16LE=function t(e,n,i){return e=+e,n>>>=0,i||N(this,e,n,2,32767,-32768),this[n]=255&e,this[n+1]=e>>>8,n+2},t.prototype.writeInt16BE=function t(e,n,i){return e=+e,n>>>=0,i||N(this,e,n,2,32767,-32768),this[n]=e>>>8,this[n+1]=255&e,n+2},t.prototype.writeInt32LE=function t(e,n,i){return e=+e,n>>>=0,i||N(this,e,n,4,2147483647,-2147483648),this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24,n+4},t.prototype.writeInt32BE=function t(e,n,i){return e=+e,n>>>=0,i||N(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e,n+4},t.prototype.writeFloatLE=function t(e,n,i){return R(this,e,n,!0,i)},t.prototype.writeFloatBE=function t(e,n,i){return R(this,e,n,!1,i)},t.prototype.writeDoubleLE=function t(e,n,i){return O(this,e,n,!0,i)},t.prototype.writeDoubleBE=function t(e,n,i){return O(this,e,n,!1,i)},t.prototype.copy=function t(e,n,i,r){if(i||(i=0),r||0===r||(r=this.length),n>=e.length&&(n=e.length),n||(n=0),r>0&&r<i&&(r=i),r===i||0===e.length||0===this.length)return 0;if(n<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("sourceStart out of bounds");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-n<r-i&&(r=e.length-n+i);let o=r-i,s;if(this===e&&i<n&&n<r)for(s=o-1;s>=0;--s)e[s+n]=this[s+i];else if(o<1e3)for(s=0;s<o;++s)e[s+n]=this[s+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),n);return o},t.prototype.fill=function e(n,i,r,o){if("string"==typeof n){if("string"==typeof i?(o=i,i=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),1===n.length){let s=n.charCodeAt(0);s<256&&(n=s)}if(void 0!==o&&"string"!=typeof o)throw TypeError("encoding must be a string");if("string"==typeof o&&!t.isEncoding(o))throw TypeError("Unknown encoding: "+o)}else"number"==typeof n&&(n&=255);if(i<0||this.length<i||this.length<r)throw RangeError("Out of range index");if(r<=i)return this;i>>>=0,r=void 0===r?this.length:r>>>0,n||(n=0);let c;if("number"==typeof n)for(c=i;c<r;++c)this[c]=n;else{let a=t.isBuffer(n)?n:new t(n,o),u=a.length;for(c=0;c<r-i;++c)this[c+i]=a[c%u]}return this};let T=/[^+/0-9A-Za-z-_]/g;function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function A(t,e){e=e||1/0;let n,i=t.length,r=null,o=[];for(let s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319||s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return o}function P(t){return i.toByteArray(function t(e){if((e=e.trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(t))}function C(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length)&&!(r>=t.length);++r)e[r+n]=t[r];return r}function U(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function M(t){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(t)}function B(t){return t!=t}}).call(e,n(1))},function(t,e){"use strict";e.byteLength=function t(e){return 3*e.length/4-a(e)},e.toByteArray=function t(e){let n,o,s,c,u,l,f=e.length;u=a(e),l=new r(3*f/4-u),s=u>0?f-4:f;let h=0;for(n=0,o=0;n<s;n+=4,o+=3)c=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[h++]=c>>16&255,l[h++]=c>>8&255,l[h++]=255&c;return 2===u?(c=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[h++]=255&c):1===u&&(c=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[h++]=c>>8&255,l[h++]=255&c),l},e.fromByteArray=function t(e){let i,r=e.length,o=r%3,s="",c=[];for(let a=0,u=r-o;a<u;a+=16383)c.push(l(e,a,a+16383>u?u:a+16383));return 1===o?(s+=n[(i=e[r-1])>>2],s+=n[i<<4&63],s+="=="):2===o&&(s+=n[(i=(e[r-2]<<8)+e[r-1])>>10],s+=n[i>>4&63],s+=n[i<<2&63],s+="="),c.push(s),c.join("")};let n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let s=0,c=o.length;s<c;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function a(t){let e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function u(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function l(t,e,n){let i,r=[];for(let o=e;o<n;o+=3)r.push(u(i=(t[o]<<16)+(t[o+1]<<8)+t[o+2]));return r.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){let o,s,c=8*r-i-1,a=(1<<c)-1,u=a>>1,l=-7,f=n?r-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=c;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=i;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-u;else{if(o===a)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,i),o-=u}return(p?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){let s,c,a,u=8*o-r-1,l=(1<<u)-1,f=l>>1,h=23===r?5960464477539062e-23:0,p=i?0:o-1,d=i?1:-1,y=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(c=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),s+f>=1?e+=h/a:e+=h*Math.pow(2,1-f),e*a>=2&&(s++,a/=2),s+f>=l?(c=0,s=l):s+f>=1?(c=(e*a-1)*Math.pow(2,r),s+=f):(c=e*Math.pow(2,f-1)*Math.pow(2,r),s=0));r>=8;t[n+p]=255&c,p+=d,c/=256,r-=8);for(s=s<<r|c,u+=r;u>0;t[n+p]=255&s,p+=d,s/=256,u-=8);t[n+p-d]|=128*y}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";let i=new(n(7)),r={};function o(t){r[t]||("function"==typeof i[t]?r[t]=function(){return i[t].apply(i,arguments)}:r[t]=i[t])}for(let s in i)o(s);r.initializeTTYs=function(){null===i.stdin&&(i.initializeTTYs(),r.stdin=i.stdin,r.stdout=i.stdout,r.stderr=i.stderr)},i.nextTick(function(){r.initializeTTYs()}),t.exports=r},function(t,e,n){(function(e){"use strict";let i=this&&this.__extends||function(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=n(8),o=null,s=function(){function t(t,e){this.fun=t,this.array=e}return t.prototype.run=function(){this.fun.apply(null,this.array)},t}(),c=function(){function t(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return t.prototype.push=function(t){let e=this;1!==this._queue.push(t)||this._draining||setTimeout(function(){return e._drainQueue()},0)},t.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},t.prototype._drainQueue=function(){let t=this;if(this._draining)return;let e=setTimeout(function(){return t._cleanUpNextTick()});this._draining=!0;let n=this._queue.length;for(;n;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<n;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,n=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(e)},t}(),a=function(t){function r(){t.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new c,this.execPath=e,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=1e3*Math.random()|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return i(r,t),r.prototype.chdir=function(t){null===o&&(o=n(9)),this._cwd=o.resolve(t)},r.prototype.cwd=function(){return this._cwd},r.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},r.prototype.nextTick=function(t){let e=[];for(let n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._queue.push(new s(t,e))},r.prototype.abort=function(){this.emit("abort")},r.prototype.exit=function(t){this.exitCode=t,this.emit("exit",[t])},r.prototype.getgid=function(){return this._gid},r.prototype.setgid=function(t){"number"==typeof t?this._gid=t:this._gid=1},r.prototype.getuid=function(){return this._uid},r.prototype.setuid=function(t){"number"==typeof t?this._uid=t:this._uid=1},r.prototype.kill=function(t,e){this.emit("kill",[t,e])},r.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},r.prototype.umask=function(t){void 0===t&&(t=this._mask);let e=this._mask;return this._mask=t,this.emit("umask",[t]),e},r.prototype.hrtime=function(){let t,e=(t="undefined"!=typeof performance?performance.now():Date.now?Date.now():new Date().getTime())/1e3|0;return t-=1e3*e,[e,t=1e6*t|0]},r.prototype.initializeTTYs=function(){if(null===this.stdout){let t=n(10);this.stdout=new t,this.stderr=new t,this.stdin=new t}},r.prototype.disconnect=function(){},r}(r.EventEmitter);t.exports=a}).call(e,"/")},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){var e;if("number"!=typeof(e=t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){let e,n,s,c,a,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;{let l=Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}}if(o(n=this._events[t]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:c=Array.prototype.slice.call(arguments,1),n.apply(this,c)}else if(r(n))for(a=0,c=Array.prototype.slice.call(arguments,1),s=(u=n.slice()).length;a<s;a++)u[a].apply(this,c);return!0},n.prototype.addListener=function(t,e){let s;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");let n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){let n,o,s,c;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(n=this._events[t]).length,o=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(n)){for(c=s;c-- >0;)if(n[c]===e||n[c].listener&&n[c].listener===e){o=c;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){let e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){let e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){(function(e){"use strict";let n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(){function t(){}return t.normalize=function(e){""===e&&(e=".");let n=e.charAt(0)===t.sep,i=(e=t._removeDuplicateSeps(e)).split(t.sep),r=[];for(let o=0;o<i.length;o++){let s=i[o];"."!==s&&(".."===s&&(n||!n&&r.length>0&&".."!==r[0])?r.pop():r.push(s))}return!n&&r.length<2&&(1===r.length?""===r[0]&&r.unshift("."):r.push(".")),e=r.join(t.sep),n&&e.charAt(0)!==t.sep&&(e=t.sep+e),e},t.join=function(){let e=[];for(let n=0;n<arguments.length;n++)e[n-0]=arguments[n];let i=[];for(let r=0;r<e.length;r++){let o=e[r];if("string"!=typeof o)throw TypeError("Invalid argument type to path.join: "+typeof o);""!==o&&i.push(o)}return t.normalize(i.join(t.sep))},t.resolve=function(){let n=[];for(let i=0;i<arguments.length;i++)n[i-0]=arguments[i];let r=[];for(let o=0;o<n.length;o++){let s=n[o];if("string"!=typeof s)throw TypeError("Invalid argument type to path.join: "+typeof s);""!==s&&(s.charAt(0)===t.sep&&(r=[]),r.push(s))}let c=t.normalize(r.join(t.sep));if(c.length>1&&c.charAt(c.length-1)===t.sep)return c.substr(0,c.length-1);if(c.charAt(0)!==t.sep){"."===c.charAt(0)&&(1===c.length||c.charAt(1)===t.sep)&&(c=1===c.length?"":c.substr(2));let a=e.cwd();c=""!==c?this.normalize(a+("/"!==a?t.sep:"")+c):a}return c},t.relative=function(e,n){let i;e=t.resolve(e),n=t.resolve(n);let r=e.split(t.sep),o=n.split(t.sep);o.shift(),r.shift();let s=0,c=[];for(i=0;i<r.length;i++)if(r[i]!==o[i]){s=r.length-i;break}c=o.slice(i),1===r.length&&""===r[0]&&(s=0),s>r.length&&(s=r.length);let a="";for(i=0;i<s;i++)a+="../";return(a+=c.join(t.sep)).length>1&&a.charAt(a.length-1)===t.sep&&(a=a.substr(0,a.length-1)),a},t.dirname=function(e){let n=(e=t._removeDuplicateSeps(e)).charAt(0)===t.sep,i=e.split(t.sep);return(""===i.pop()&&i.length>0&&i.pop(),i.length>1||1===i.length&&!n)?i.join(t.sep):n?t.sep:"."},t.basename=function(e,n){if(void 0===n&&(n=""),""===e)return e;let i=(e=t.normalize(e)).split(t.sep),r=i[i.length-1];return""===r&&i.length>1?i[i.length-2]:n.length>0&&r.substr(r.length-n.length)===n?r.substr(0,r.length-n.length):r},t.extname=function(e){let n=(e=t.normalize(e)).split(t.sep);if(""===(e=n.pop())&&n.length>0&&(e=n.pop()),".."===e)return"";let i=e.lastIndexOf(".");return -1===i||0===i?"":e.substr(i)},t.isAbsolute=function(e){return e.length>0&&e.charAt(0)===t.sep},t._makeLong=function(t){return t},t.parse=function(t){var e;let i,r=(e=t,(i=n.exec(e)).shift(),i);return{root:r[0],dir:r[0]+r[1].slice(0,-1),base:r[2],ext:r[3],name:r[2].slice(0,r[2].length-r[3].length)}},t.format=function(e){if(null===e||"object"!=typeof e)throw TypeError("Parameter 'pathObject' must be an object, not "+typeof e);if("string"!=typeof(e.root||""))throw TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);let n;return(e.dir?e.dir+t.sep:"")+(e.base||"")},t._removeDuplicateSeps=function(t){return t=t.replace(this._replaceRegex,this.sep)},t.sep="/",t._replaceRegex=RegExp("//+","g"),t.delimiter=":",t.posix=t,t.win32=t,t}();t.exports=i}).call(e,n(6))},function(t,e,n){(function(e){"use strict";let i=this&&this.__extends||function(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},r=function(t){function n(){t.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return i(n,t),n.prototype.setRawMode=function(t){this.isRaw!==t&&(this.isRaw=t,this.emit("modeChange"))},n.prototype.changeColumns=function(t){t!==this.columns&&(this.columns=t,this.emit("resize"))},n.prototype.changeRows=function(t){t!==this.rows&&(this.rows=t,this.emit("resize"))},n.isatty=function(t){return t&&t instanceof n},n.prototype._write=function(t,n,i){let r;try{let o;o="string"==typeof t?new e(t,n):t,this._bufferedWrites.push(o),this._waitingForWrites&&this._read(1024)}catch(s){r=s}finally{i(r)}},n.prototype._read=function(t){if(0===this._bufferedWrites.length)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),this._waitingForWrites););},n}(n(11).Duplex);t.exports=r}).call(e,n(1))},function(t,e,n){t.exports=o;let i=n(8).EventEmitter,r=n(12);function o(){i.call(this)}r(o,i),o.Readable=n(13),o.Writable=n(27),o.Duplex=n(28),o.Transform=n(29),o.PassThrough=n(30),o.Stream=o,o.prototype.pipe=function(t,e){let n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",c),n.on("close",a));let s=!1;function c(){s||(s=!0,t.end())}function a(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(l(),0===i.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",r),t.removeListener("drain",o),n.removeListener("end",c),n.removeListener("close",a),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",u),t.on("error",u),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},function(t,e){"function"==typeof Object.create?t.exports=function t(e,n){e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function t(e,n){e.super_=n;let i=function(){};i.prototype=n.prototype,e.prototype=new i,e.prototype.constructor=e}},function(t,e,n){(function(i){let r=function(){try{return n(11)}catch(t){}}();(e=t.exports=n(14)).Stream=r||e,e.Readable=e,e.Writable=n(22),e.Duplex=n(21),e.Transform=n(25),e.PassThrough=n(26),!i.browser&&"disable"===i.env.READABLE_STREAM&&r&&(t.exports=r)}).call(e,n(6))},function(t,e,n){(function(e){"use strict";t.exports=$;let i=n(15),r=n(16),o;$.ReadableState=y,n(8).EventEmitter;let s=function(t,e){return t.listeners(e).length},c;!function(){try{c=n(11)}catch(t){}finally{c||(c=n(8).EventEmitter)}}();let a=n(2).Buffer,u=n(17),l=n(18);l.inherits=n(12);let f=n(19),h;h=f&&f.debuglog?f.debuglog("stream"):function(){};let p=n(20),d;function y(t,e){o=o||n(21),t=t||{},this.objectMode=!!t.objectMode,e instanceof o&&(this.objectMode=this.objectMode||!!t.readableObjectMode);let i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=n(24).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function $(t){if(o=o||n(21),!(this instanceof $))return new $(t);this._readableState=new y(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),c.call(this)}function g(t,e,n,r,o){var s,c,u,l,f;let h,p=(s=e,c=n,h=null,a.isBuffer(c)||"string"==typeof c||null==c||s.objectMode||(h=TypeError("Invalid non-string/buffer chunk")),h);if(p)t.emit("error",p);else if(null===n)e.reading=!1,function t(e,n){if(!n.ended){if(n.decoder){let i=n.decoder.end();i&&i.length&&(n.buffer.push(i),n.length+=n.objectMode?1:i.length)}n.ended=!0,w(e)}}(t,e);else if(e.objectMode||n&&n.length>0){if(e.ended&&!o){let d=Error("stream.push() after EOF");t.emit("error",d)}else if(e.endEmitted&&o){let y=Error("stream.unshift() after end event");t.emit("error",y)}else{let $;!e.decoder||o||r||(n=e.decoder.write(n),$=!e.objectMode&&0===n.length),o||(e.reading=!1),!$&&(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,o?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&w(t))),u=t,(l=e).readingMore||(l.readingMore=!0,i(S,u,l))}}else o||(e.reading=!1);return!(f=e).ended&&(f.needReadable||f.length<f.highWaterMark||0===f.length)}function m(t,e){if(t<=0||0===e.length&&e.ended)return 0;if(e.objectMode)return 1;if(t!=t)return e.flowing&&e.length?e.buffer.head.data.length:e.length;if(t>e.highWaterMark){var n;e.highWaterMark=((n=t)>=8388608?n=8388608:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)}return t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0)}function w(t){let e=t._readableState;e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i(_,t):_(t))}function _(t){h("emit readable"),t.emit("readable"),v(t)}function S(t,e){let n=e.length;for(;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(h("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function b(t){h("readable nexttick read 0"),t.read(0)}function E(t,e){e.reading||(h("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),v(t),e.flowing&&!e.reading&&t.read(0)}function v(t){let e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function k(t,e){var n,i,r;if(0===e.length)return null;let o,s;return e.objectMode?o=e.buffer.shift():!t||t>=e.length?(o=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):o=(n=t,i=e.buffer,r=e.decoder,n<i.head.data.length?(s=i.head.data.slice(0,n),i.head.data=i.head.data.slice(n)):s=n===i.head.data.length?i.shift():r?function t(e,n){let i=n.head,r=1,o=i.data;for(e-=o.length;i=i.next;){let s=i.data,c=e>s.length?s.length:e;if(c===s.length?o+=s:o+=s.slice(0,e),0==(e-=c)){c===s.length?(++r,i.next?n.head=i.next:n.head=n.tail=null):(n.head=i,i.data=s.slice(c));break}++r}return n.length-=r,o}(n,i):function t(e,n){let i=u.allocUnsafe(e),r=n.head,o=1;for(r.data.copy(i),e-=r.data.length;r=r.next;){let s=r.data,c=e>s.length?s.length:e;if(s.copy(i,i.length-e,0,c),0==(e-=c)){c===s.length?(++o,r.next?n.head=r.next:n.head=n.tail=null):(n.head=r,r.data=s.slice(c));break}++o}return n.length-=o,i}(n,i),s),o}function I(t){let e=t._readableState;if(e.length>0)throw Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i(F,e,t))}function F(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function x(t,e){for(let n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return -1}l.inherits($,c),$.prototype.push=function(t,e){let n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding)===n.encoding||(t=u.from(t,e),e=""),g(this,n,t,e,!1)},$.prototype.unshift=function(t){return g(this,this._readableState,t,"",!0)},$.prototype.isPaused=function(){return!1===this._readableState.flowing},$.prototype.setEncoding=function(t){return d||(d=n(24).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this},$.prototype.read=function(t){h("read",t),t=parseInt(t,10);let e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?I(this):w(this),null;if(0===(t=m(t,e))&&e.ended)return 0===e.length&&I(this),null;let i=e.needReadable;h("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",i=!0),e.ended||e.reading?h("reading or ended",i=!1):i&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=m(n,e)));let r;return null===(r=t>0?k(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&I(this)),null!==r&&this.emit("data",r),r},$.prototype._read=function(t){this.emit("error",Error("_read() is not implemented"))},$.prototype.pipe=function(t,n){var o;let c=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,h("pipe count=%d opts=%j",a.pipesCount,n);let u=n&&!1===n.end||t===e.stdout||t===e.stderr?y:f;function l(t){h("onunpipe"),t===c&&y()}function f(){h("onend"),t.end()}a.endEmitted?i(u):c.once("end",u),t.on("unpipe",l);let p=(o=c,function(){let t=o._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(o,"data")&&(t.flowing=!0,v(o))});t.on("drain",p);let d=!1;function y(){h("cleanup"),t.removeListener("close",w),t.removeListener("finish",_),t.removeListener("drain",p),t.removeListener("error",m),t.removeListener("unpipe",l),c.removeListener("end",f),c.removeListener("end",y),c.removeListener("data",g),d=!0,a.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&p()}let $=!1;function g(e){h("ondata"),$=!1;!1!==t.write(e)||$||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==x(a.pipes,t))&&!d&&(h("false write response, pause",c._readableState.awaitDrain),c._readableState.awaitDrain++,$=!0),c.pause())}function m(e){h("onerror",e),S(),t.removeListener("error",m),0===s(t,"error")&&t.emit("error",e)}function w(){t.removeListener("finish",_),S()}function _(){h("onfinish"),t.removeListener("close",w),S()}function S(){h("unpipe"),c.unpipe(t)}return c.on("data",g),function t(e,n,i){if("function"==typeof e.prependListener)return e.prependListener(n,i);e._events&&e._events[n]?r(e._events[n])?e._events[n].unshift(i):e._events[n]=[i,e._events[n]]:e.on(n,i)}(t,"error",m),t.once("close",w),t.once("finish",_),t.emit("pipe",c),a.flowing||(h("pipe resume"),c.resume()),t},$.prototype.unpipe=function(t){let e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){let n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(let r=0;r<i;r++)n[r].emit("unpipe",this);return this}let o=x(e.pipes,t);return -1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},$.prototype.on=function(t,e){let n=c.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){let r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&w(this,r):i(b,this))}return n},$.prototype.addListener=$.prototype.on,$.prototype.resume=function(){var t,e;let n=this._readableState;return n.flowing||(h("resume"),n.flowing=!0,t=this,(e=n).resumeScheduled||(e.resumeScheduled=!0,i(E,t,e))),this},$.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},$.prototype.wrap=function(t){let e=this._readableState,n=!1,i=this;for(let r in t.on("end",function(){if(h("wrapped end"),e.decoder&&!e.ended){let t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(r){if(h("wrapped data"),e.decoder&&(r=e.decoder.write(r)),e.objectMode&&null==r||!e.objectMode&&(!r||!r.length))return;let o=i.push(r);o||(n=!0,t.pause())}),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));return function t(e,n){for(let i=0,r=e.length;i<r;i++)n(e[i],i)}(["error","close","destroy","pause","resume"],function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(e){h("wrapped _read",e),n&&(n=!1,t.resume())},i},$._fromList=k}).call(e,n(6))},function(t,e,n){(function(e){"use strict";e.version&&0!==e.version.indexOf("v0.")&&(0!==e.version.indexOf("v1.")||0===e.version.indexOf("v1.8."))?t.exports=e.nextTick:t.exports=function t(n,i,r,o){if("function"!=typeof n)throw TypeError('"callback" argument must be a function');let s=arguments.length,c,a;switch(s){case 0:case 1:return e.nextTick(n);case 2:return e.nextTick(function t(){n.call(null,i)});case 3:return e.nextTick(function t(){n.call(null,i,r)});case 4:return e.nextTick(function t(){n.call(null,i,r,o)});default:for(c=Array(s-1),a=0;a<c.length;)c[a++]=arguments[a];return e.nextTick(function t(){n.apply(null,c)})}}}).call(e,n(6))},function(t,e){let n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){"use strict";let i=n(2),r=i.Buffer,o=i.SlowBuffer,s=i.kMaxLength||2147483647;e.alloc=function t(e,n,i){if("function"==typeof r.alloc)return r.alloc(e,n,i);if("number"==typeof i)throw TypeError("encoding must not be number");if("number"!=typeof e)throw TypeError("size must be a number");if(e>s)throw RangeError("size is too large");let o=i,c=n;void 0===c&&(o=void 0,c=0);let a=new r(e);if("string"==typeof c){let u=new r(c,o),l=u.length,f=-1;for(;++f<e;)a[f]=u[f%l]}else a.fill(c);return a},e.allocUnsafe=function t(e){if("function"==typeof r.allocUnsafe)return r.allocUnsafe(e);if("number"!=typeof e)throw TypeError("size must be a number");if(e>s)throw RangeError("size is too large");return new r(e)},e.from=function e(n,i,o){if("function"==typeof r.from&&(!t.Uint8Array||Uint8Array.from!==r.from))return r.from(n,i,o);if("number"==typeof n)throw TypeError('"value" argument must not be a number');if("string"==typeof n)return new r(n,i);if("undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer){let s=i;if(1===arguments.length)return new r(n);void 0===s&&(s=0);let c=o;if(void 0===c&&(c=n.byteLength-s),s>=n.byteLength)throw RangeError("'offset' is out of bounds");if(c>n.byteLength-s)throw RangeError("'length' is out of bounds");return new r(n.slice(s,s+c))}if(r.isBuffer(n)){let a=new r(n.length);return n.copy(a,0,0,n.length),a}if(n){if(Array.isArray(n)||"undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return new r(n);if("Buffer"===n.type&&Array.isArray(n.data))return new r(n.data)}throw TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},e.allocUnsafeSlow=function t(e){if("function"==typeof r.allocUnsafeSlow)return r.allocUnsafeSlow(e);if("number"!=typeof e)throw TypeError("size must be a number");if(e>=s)throw RangeError("size is too large");return new o(e)}}).call(e,function(){return this}())},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},e.isBoolean=function t(e){return"boolean"==typeof e},e.isNull=function t(e){return null===e},e.isNullOrUndefined=function t(e){return null==e},e.isNumber=function t(e){return"number"==typeof e},e.isString=function t(e){return"string"==typeof e},e.isSymbol=function t(e){return"symbol"==typeof e},e.isUndefined=function t(e){return void 0===e},e.isRegExp=function t(e){return"[object RegExp]"===n(e)},e.isObject=function t(e){return"object"==typeof e&&null!==e},e.isDate=function t(e){return"[object Date]"===n(e)},e.isError=function t(e){return"[object Error]"===n(e)||e instanceof Error},e.isFunction=function t(e){return"function"==typeof e},e.isPrimitive=function t(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},e.isBuffer=t.isBuffer}).call(e,n(1))},function(t,e){},function(t,e,n){"use strict";n(2).Buffer;let i=n(17);function r(){this.head=null,this.tail=null,this.length=0}t.exports=r,r.prototype.push=function(t){let e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},r.prototype.unshift=function(t){let e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},r.prototype.shift=function(){if(0===this.length)return;let t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t},r.prototype.clear=function(){this.head=this.tail=null,this.length=0},r.prototype.join=function(t){if(0===this.length)return"";let e=this.head,n=""+e.data;for(;e=e.next;)n+=t+e.data;return n},r.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;let e=i.allocUnsafe(t>>>0),n=this.head,r=0;for(;n;)n.data.copy(e,r),r+=n.data.length,n=n.next;return e}},function(t,e,n){"use strict";let i=Object.keys||function(t){let e=[];for(let n in t)e.push(n);return e};t.exports=f;let r=n(15),o=n(18);o.inherits=n(12);let s=n(14),c=n(22);o.inherits(f,s);let a=i(c.prototype);for(let u=0;u<a.length;u++){let l=a[u];f.prototype[l]||(f.prototype[l]=c.prototype[l])}function f(t){if(!(this instanceof f))return new f(t);s.call(this,t),c.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r(p,this)}function p(t){t.end()}function d(t,e){for(let n=0,i=t.length;n<i;n++)e(t[n],n)}},function(t,e,n){(function(e){"use strict";t.exports=y;let i=n(15),r=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?setImmediate:i,o;y.WritableState=p;let s=n(18);s.inherits=n(12);let c={deprecate:n(23)},a;!function(){try{a=n(11)}catch(t){}finally{a||(a=n(8).EventEmitter)}}();let u=n(2).Buffer,l=n(17);function f(){}function h(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function p(t,e){o=o||n(21),t=t||{},this.objectMode=!!t.objectMode,e instanceof o&&(this.objectMode=this.objectMode||!!t.writableObjectMode);let s=t.highWaterMark,c=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:c,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;let a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){(function t(e,n){var o,s,c,a,u,l;let f=e._writableState,h=f.sync,p=f.writecb;if((o=f).writing=!1,o.writecb=null,o.length-=o.writelen,o.writelen=0,n)s=e,c=f,a=h,u=n,l=p,--c.pendingcb,a?i(l,u):l(u),s._writableState.errorEmitted=!0,s.emit("error",u);else{let d=w(f);d||f.corked||f.bufferProcessing||!f.bufferedRequest||m(e,f),h?r(g,e,f,d,p):g(e,f,d,p)}})(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}s.inherits(y,a),p.prototype.getBuffer=function t(){let e=this.bufferedRequest,n=[];for(;e;)n.push(e),e=e.next;return n},function(){try{Object.defineProperty(p.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}();let d;function y(t){if(o=o||n(21),!d.call(y,this)&&!(this instanceof o))return new y(t);this._writableState=new p(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),a.call(this)}function $(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function g(t,e,n,i){var r,o;n||(r=t,0===(o=e).length&&o.needDrain&&(o.needDrain=!1,r.emit("drain"))),e.pendingcb--,i(),S(t,e)}function m(t,e){e.bufferProcessing=!0;let n=e.bufferedRequest;if(t._writev&&n&&n.next){let i=Array(e.bufferedRequestCount),r=e.corkedRequestsFree;r.entry=n;let o=0;for(;n;)i[o]=n,n=n.next,o+=1;$(t,e,!0,e.length,i,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new b(e)}else{for(;n;){let s=n.chunk,c=n.encoding,a=n.callback,u=e.objectMode?1:s.length;if($(t,e,!1,u,s,c,a),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function _(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function S(t,e){let n=w(e);return n&&(0===e.pendingcb?(_(t,e),e.finished=!0,t.emit("finish")):_(t,e)),n}function b(t){let e=this;this.next=null,this.entry=null,this.finish=function(n){let i=e.entry;for(e.entry=null;i;){let r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||t&&t._writableState instanceof p}})):d=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,n){var r,o,s,c,a,p;let d=this._writableState,y=!1,g=u.isBuffer(t);if("function"==typeof e&&(n=e,e=null),g?e="buffer":e||(e=d.defaultEncoding),"function"!=typeof n&&(n=f),d.ended){let m;r=this,o=n,m=Error("write after end"),r.emit("error",m),i(o,m)}else{let w,_;(g||(s=this,c=d,a=t,p=n,w=!0,_=!1,null===a?_=TypeError("May not write null values to stream"):"string"==typeof a||void 0===a||c.objectMode||(_=TypeError("Invalid non-string/buffer chunk")),_&&(s.emit("error",_),i(p,_),w=!1),w))&&(d.pendingcb++,y=function t(e,n,i,r,o,s){if(!i){var c,a,f;r=(c=n,a=r,f=o,c.objectMode||!1===c.decodeStrings||"string"!=typeof a||(a=l.from(a,f)),a),u.isBuffer(r)&&(o="buffer")}let p=n.objectMode?1:r.length;n.length+=p;let d=n.length<n.highWaterMark;if(d||(n.needDrain=!0),n.writing||n.corked){let y=n.lastBufferedRequest;n.lastBufferedRequest=new h(r,o,s),y?y.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else $(e,n,!1,p,r,o,s);return d}(this,d,g,t,e,n))}return y},y.prototype.cork=function(){let t=this._writableState;t.corked++},y.prototype.uncork=function(){let t=this._writableState;!t.corked||(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||m(this,t))},y.prototype.setDefaultEncoding=function t(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},y.prototype._write=function(t,e,n){n(Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,n){var r,o,s;let c=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),c.corked&&(c.corked=1,this.uncork()),c.ending||c.finished||(r=this,o=c,s=n,o.ending=!0,S(r,o),s&&(o.finished?i(s):r.once("finish",s)),o.ended=!0,r.writable=!1)}}).call(e,n(6))},function(t,e){(function(e){t.exports=function t(e,i){if(n("noDeprecation"))return e;let r=!1;return function t(){if(!r){if(n("throwDeprecation"))throw Error(i);n("traceDeprecation")?console.trace(i):console.warn(i),r=!0}return e.apply(this,arguments)}};function n(t){try{if(!e.localStorage)return!1}catch(n){return!1}let i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}}).call(e,function(){return this}())},function(t,e,n){let i=n(2).Buffer,r=i.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},o=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),!function t(e){if(e&&!r(e))throw Error("Unknown encoding: "+e)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=c;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:this.write=s;return}this.charBuffer=new i(6),this.charReceived=0,this.charLength=0};function s(t){return t.toString(this.encoding)}function c(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function a(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(t){let e="";for(;this.charLength;){let n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length);var i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1);if(i>=55296&&i<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var r=(e+=t.toString(this.encoding,0,r)).length-1,i=e.charCodeAt(r);if(i>=55296&&i<=56319){let o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},o.prototype.detectIncompleteChar=function(t){let e=t.length>=3?3:t.length;for(;e>0;e--){let n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},o.prototype.end=function(t){let e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){let n=this.charReceived,i=this.charBuffer,r=this.encoding;e+=i.slice(0,n).toString(r)}return e}},function(t,e,n){"use strict";t.exports=s;let i=n(21),r=n(18);function o(t){this.afterTransform=function(e,n){return function t(e,n,i){let r=e._transformState;r.transforming=!1;let o=r.writecb;if(!o)return e.emit("error",Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!=i&&e.push(i),o(n);let s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function s(t){if(!(this instanceof s))return new s(t);i.call(this,t),this._transformState=new o(this);let e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,n){c(e,t,n)}):c(e)})}function c(t,e,n){if(e)return t.emit("error",e);null!=n&&t.push(n);let i=t._writableState,r=t._transformState;if(i.length)throw Error("Calling transform done when ws.length != 0");if(r.transforming)throw Error("Calling transform done when still transforming");return t.push(null)}r.inherits=n(12),r.inherits(s,i),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){let i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){let r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},s.prototype._read=function(t){let e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(t,e,n){"use strict";t.exports=o;let i=n(25),r=n(18);function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}r.inherits=n(12),r.inherits(o,i),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(22)},function(t,e,n){t.exports=n(21)},function(t,e,n){t.exports=n(25)},function(t,e,n){t.exports=n(26)},function(t,e,n){"use strict";let i=n(32),r=n(33),o=n(38),s=n(39),c=n(40),a=n(41),u=n(42),l=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits)==0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let n=i.inflateInit2(this.strm,e.windowBits);if(n!==s.Z_OK)throw Error(c[n]);this.header=new u,i.inflateGetHeader(this.strm,this.header)}function h(t,e){let n=new f(e);if(n.push(t,!0),n.err)throw n.msg||c[n.err];return n.result}f.prototype.push=function(t,e){let n=this.strm,c=this.options.chunkSize,a=this.options.dictionary,u,f,h,p,d,y,$=!1;if(this.ended)return!1;f=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?n.input=o.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new r.Buf8(c),n.next_out=0,n.avail_out=c),(u=i.inflate(n,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&a&&(y="string"==typeof a?o.string2buf(a):"[object ArrayBuffer]"===l.call(a)?new Uint8Array(a):a,u=i.inflateSetDictionary(this.strm,y)),u===s.Z_BUF_ERROR&&!0===$&&(u=s.Z_OK,$=!1),u!==s.Z_STREAM_END&&u!==s.Z_OK)return this.onEnd(u),this.ended=!0,!1;n.next_out&&(0===n.avail_out||u===s.Z_STREAM_END||0===n.avail_in&&(f===s.Z_FINISH||f===s.Z_SYNC_FLUSH))&&("string"===this.options.to?(h=o.utf8border(n.output,n.next_out),p=n.next_out-h,d=o.buf2string(n.output,h),n.next_out=p,n.avail_out=c-p,p&&r.arraySet(n.output,n.output,h,p,0),this.onData(d)):this.onData(r.shrinkBuf(n.output,n.next_out))),0===n.avail_in&&0===n.avail_out&&($=!0)}while((n.avail_in>0||0===n.avail_out)&&u!==s.Z_STREAM_END);return(u===s.Z_STREAM_END&&(f=s.Z_FINISH),f===s.Z_FINISH)?(u=i.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===s.Z_OK):(f===s.Z_SYNC_FLUSH&&(this.onEnd(s.Z_OK),n.avail_out=0),!0)},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=f,e.inflate=h,e.inflateRaw=function t(e,n){return(n=n||{}).raw=!0,h(e,n)},e.ungzip=h},function(t,e,n){"use strict";let i=n(33),r=n(34),o=n(35),s=n(36),c=n(37);function a(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(t){let e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(852),e.distcode=e.distdyn=new i.Buf32(592),e.sane=1,e.back=-1,0):-2}function f(t){let e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,l(t)):-2}function h(t,e){let n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?-2:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,f(t)):-2}function p(t,e){let n,i;return t?(i=new u,t.state=i,i.window=null,0!==(n=h(t,e))&&(t.state=null),n):-2}let d=!0,y,$;function g(t){if(d){let e;for(y=new i.Buf32(512),$=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(c(1,t.lens,0,288,y,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;c(2,t.lens,0,32,$,0,t.work,{bits:5}),d=!1}t.lencode=y,t.lenbits=9,t.distcode=$,t.distbits=5}function m(t,e,n,r){let o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new i.Buf8(s.wsize)),r>=s.wsize?(i.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>r&&(o=r),i.arraySet(s.window,e,n-r,o,s.wnext),(r-=o)?(i.arraySet(s.window,e,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}e.inflateReset=f,e.inflateReset2=h,e.inflateResetKeep=l,e.inflateInit=function t(e){return p(e,15)},e.inflateInit2=p,e.inflate=function t(e,n){let u,l,f,h,p,d,y,$,w,_,S,b,E,v,k=0,I,F,x,N,L,R,O,T,D=new i.Buf8(4),A,P,C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return -2;12===(u=e.state).mode&&(u.mode=13),p=e.next_out,f=e.output,y=e.avail_out,h=e.next_in,l=e.input,d=e.avail_in,$=u.hold,w=u.bits,_=d,S=y,T=0;inf_leave:for(;;)switch(u.mode){case 1:if(0===u.wrap){u.mode=13;break}for(;w<16;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}if(2&u.wrap&&35615===$){u.check=0,D[0]=255&$,D[1]=$>>>8&255,u.check=o(u.check,D,2,0),$=0,w=0,u.mode=2;break}if(u.flags=0,u.head&&(u.head.done=!1),!(1&u.wrap)||(((255&$)<<8)+($>>8))%31){e.msg="incorrect header check",u.mode=30;break}if((15&$)!=8){e.msg="unknown compression method",u.mode=30;break}if($>>>=4,w-=4,O=(15&$)+8,0===u.wbits)u.wbits=O;else if(O>u.wbits){e.msg="invalid window size",u.mode=30;break}u.dmax=1<<O,e.adler=u.check=1,u.mode=512&$?10:12,$=0,w=0;break;case 2:for(;w<16;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}if(u.flags=$,(255&u.flags)!=8){e.msg="unknown compression method",u.mode=30;break}if(57344&u.flags){e.msg="unknown header flags set",u.mode=30;break}u.head&&(u.head.text=$>>8&1),512&u.flags&&(D[0]=255&$,D[1]=$>>>8&255,u.check=o(u.check,D,2,0)),$=0,w=0,u.mode=3;case 3:for(;w<32;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}u.head&&(u.head.time=$),512&u.flags&&(D[0]=255&$,D[1]=$>>>8&255,D[2]=$>>>16&255,D[3]=$>>>24&255,u.check=o(u.check,D,4,0)),$=0,w=0,u.mode=4;case 4:for(;w<16;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}u.head&&(u.head.xflags=255&$,u.head.os=$>>8),512&u.flags&&(D[0]=255&$,D[1]=$>>>8&255,u.check=o(u.check,D,2,0)),$=0,w=0,u.mode=5;case 5:if(1024&u.flags){for(;w<16;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}u.length=$,u.head&&(u.head.extra_len=$),512&u.flags&&(D[0]=255&$,D[1]=$>>>8&255,u.check=o(u.check,D,2,0)),$=0,w=0}else u.head&&(u.head.extra=null);u.mode=6;case 6:if(1024&u.flags&&((b=u.length)>d&&(b=d),b&&(u.head&&(O=u.head.extra_len-u.length,u.head.extra||(u.head.extra=Array(u.head.extra_len)),i.arraySet(u.head.extra,l,h,b,O)),512&u.flags&&(u.check=o(u.check,l,b,h)),d-=b,h+=b,u.length-=b),u.length))break inf_leave;u.length=0,u.mode=7;case 7:if(2048&u.flags){if(0===d)break inf_leave;b=0;do O=l[h+b++],u.head&&O&&u.length<65536&&(u.head.name+=String.fromCharCode(O));while(O&&b<d);if(512&u.flags&&(u.check=o(u.check,l,b,h)),d-=b,h+=b,O)break inf_leave}else u.head&&(u.head.name=null);u.length=0,u.mode=8;case 8:if(4096&u.flags){if(0===d)break inf_leave;b=0;do O=l[h+b++],u.head&&O&&u.length<65536&&(u.head.comment+=String.fromCharCode(O));while(O&&b<d);if(512&u.flags&&(u.check=o(u.check,l,b,h)),d-=b,h+=b,O)break inf_leave}else u.head&&(u.head.comment=null);u.mode=9;case 9:if(512&u.flags){for(;w<16;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}if($!==(65535&u.check)){e.msg="header crc mismatch",u.mode=30;break}$=0,w=0}u.head&&(u.head.hcrc=u.flags>>9&1,u.head.done=!0),e.adler=u.check=0,u.mode=12;break;case 10:for(;w<32;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}e.adler=u.check=a($),$=0,w=0,u.mode=11;case 11:if(0===u.havedict)return e.next_out=p,e.avail_out=y,e.next_in=h,e.avail_in=d,u.hold=$,u.bits=w,2;e.adler=u.check=1,u.mode=12;case 12:if(5===n||6===n)break inf_leave;case 13:if(u.last){$>>>=7&w,w-=7&w,u.mode=27;break}for(;w<3;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}switch(u.last=1&$,w-=1,3&($>>>=1)){case 0:u.mode=14;break;case 1:if(g(u),u.mode=20,6===n){$>>>=2,w-=2;break inf_leave}break;case 2:u.mode=17;break;case 3:e.msg="invalid block type",u.mode=30}$>>>=2,w-=2;break;case 14:for($>>>=7&w,w-=7&w;w<32;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}if((65535&$)!=($>>>16^65535)){e.msg="invalid stored block lengths",u.mode=30;break}if(u.length=65535&$,$=0,w=0,u.mode=15,6===n)break inf_leave;case 15:u.mode=16;case 16:if(b=u.length){if(b>d&&(b=d),b>y&&(b=y),0===b)break inf_leave;i.arraySet(f,l,h,b,p),d-=b,h+=b,y-=b,p+=b,u.length-=b;break}u.mode=12;break;case 17:for(;w<14;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}if(u.nlen=(31&$)+257,$>>>=5,w-=5,u.ndist=(31&$)+1,$>>>=5,w-=5,u.ncode=(15&$)+4,$>>>=4,w-=4,u.nlen>286||u.ndist>30){e.msg="too many length or distance symbols",u.mode=30;break}u.have=0,u.mode=18;case 18:for(;u.have<u.ncode;){for(;w<3;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}u.lens[C[u.have++]]=7&$,$>>>=3,w-=3}for(;u.have<19;)u.lens[C[u.have++]]=0;if(u.lencode=u.lendyn,u.lenbits=7,A={bits:u.lenbits},T=c(0,u.lens,0,19,u.lencode,0,u.work,A),u.lenbits=A.bits,T){e.msg="invalid code lengths set",u.mode=30;break}u.have=0,u.mode=19;case 19:for(;u.have<u.nlen+u.ndist;){for(;I=(k=u.lencode[$&(1<<u.lenbits)-1])>>>24,F=k>>>16&255,x=65535&k,!(I<=w);){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}if(x<16)$>>>=I,w-=I,u.lens[u.have++]=x;else{if(16===x){for(P=I+2;w<P;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}if($>>>=I,w-=I,0===u.have){e.msg="invalid bit length repeat",u.mode=30;break}O=u.lens[u.have-1],b=3+(3&$),$>>>=2,w-=2}else if(17===x){for(P=I+3;w<P;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}$>>>=I,w-=I,O=0,b=3+(7&$),$>>>=3,w-=3}else{for(P=I+7;w<P;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}$>>>=I,w-=I,O=0,b=11+(127&$),$>>>=7,w-=7}if(u.have+b>u.nlen+u.ndist){e.msg="invalid bit length repeat",u.mode=30;break}for(;b--;)u.lens[u.have++]=O}}if(30===u.mode)break;if(0===u.lens[256]){e.msg="invalid code -- missing end-of-block",u.mode=30;break}if(u.lenbits=9,A={bits:u.lenbits},T=c(1,u.lens,0,u.nlen,u.lencode,0,u.work,A),u.lenbits=A.bits,T){e.msg="invalid literal/lengths set",u.mode=30;break}if(u.distbits=6,u.distcode=u.distdyn,A={bits:u.distbits},T=c(2,u.lens,u.nlen,u.ndist,u.distcode,0,u.work,A),u.distbits=A.bits,T){e.msg="invalid distances set",u.mode=30;break}if(u.mode=20,6===n)break inf_leave;case 20:u.mode=21;case 21:if(d>=6&&y>=258){e.next_out=p,e.avail_out=y,e.next_in=h,e.avail_in=d,u.hold=$,u.bits=w,s(e,S),p=e.next_out,f=e.output,y=e.avail_out,h=e.next_in,l=e.input,d=e.avail_in,$=u.hold,w=u.bits,12===u.mode&&(u.back=-1);break}for(u.back=0;I=(k=u.lencode[$&(1<<u.lenbits)-1])>>>24,F=k>>>16&255,x=65535&k,!(I<=w);){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}if(F&&(240&F)==0){for(N=I,L=F,R=x;I=(k=u.lencode[R+(($&(1<<N+L)-1)>>N)])>>>24,F=k>>>16&255,x=65535&k,!(N+I<=w);){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}$>>>=N,w-=N,u.back+=N}if($>>>=I,w-=I,u.back+=I,u.length=x,0===F){u.mode=26;break}if(32&F){u.back=-1,u.mode=12;break}if(64&F){e.msg="invalid literal/length code",u.mode=30;break}u.extra=15&F,u.mode=22;case 22:if(u.extra){for(P=u.extra;w<P;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}u.length+=$&(1<<u.extra)-1,$>>>=u.extra,w-=u.extra,u.back+=u.extra}u.was=u.length,u.mode=23;case 23:for(;I=(k=u.distcode[$&(1<<u.distbits)-1])>>>24,F=k>>>16&255,x=65535&k,!(I<=w);){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}if((240&F)==0){for(N=I,L=F,R=x;I=(k=u.distcode[R+(($&(1<<N+L)-1)>>N)])>>>24,F=k>>>16&255,x=65535&k,!(N+I<=w);){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}$>>>=N,w-=N,u.back+=N}if($>>>=I,w-=I,u.back+=I,64&F){e.msg="invalid distance code",u.mode=30;break}u.offset=x,u.extra=15&F,u.mode=24;case 24:if(u.extra){for(P=u.extra;w<P;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}u.offset+=$&(1<<u.extra)-1,$>>>=u.extra,w-=u.extra,u.back+=u.extra}if(u.offset>u.dmax){e.msg="invalid distance too far back",u.mode=30;break}u.mode=25;case 25:if(0===y)break inf_leave;if(b=S-y,u.offset>b){if((b=u.offset-b)>u.whave&&u.sane){e.msg="invalid distance too far back",u.mode=30;break}b>u.wnext?(b-=u.wnext,E=u.wsize-b):E=u.wnext-b,b>u.length&&(b=u.length),v=u.window}else v=f,E=p-u.offset,b=u.length;b>y&&(b=y),y-=b,u.length-=b;do f[p++]=v[E++];while(--b);0===u.length&&(u.mode=21);break;case 26:if(0===y)break inf_leave;f[p++]=u.length,y--,u.mode=21;break;case 27:if(u.wrap){for(;w<32;){if(0===d)break inf_leave;d--,$|=l[h++]<<w,w+=8}if(S-=y,e.total_out+=S,u.total+=S,S&&(e.adler=u.check=u.flags?o(u.check,f,S,p-S):r(u.check,f,S,p-S)),S=y,(u.flags?$:a($))!==u.check){e.msg="incorrect data check",u.mode=30;break}$=0,w=0}u.mode=28;case 28:if(u.wrap&&u.flags){for(;w<32;){if(0===d)break inf_leave;d--,$+=l[h++]<<w,w+=8}if($!==(4294967295&u.total)){e.msg="incorrect length check",u.mode=30;break}$=0,w=0}u.mode=29;case 29:T=1;break inf_leave;case 30:T=-3;break inf_leave;case 31:return -4;default:return -2}return(e.next_out=p,e.avail_out=y,e.next_in=h,e.avail_in=d,u.hold=$,u.bits=w,(u.wsize||S!==e.avail_out&&u.mode<30&&(u.mode<27||4!==n))&&m(e,e.output,e.next_out,S-e.avail_out))?(u.mode=31,-4):(_-=e.avail_in,S-=e.avail_out,e.total_in+=_,e.total_out+=S,u.total+=S,u.wrap&&S&&(e.adler=u.check=u.flags?o(u.check,f,S,e.next_out-S):r(u.check,f,S,e.next_out-S)),e.data_type=u.bits+(u.last?64:0)+(12===u.mode?128:0)+(20===u.mode||15===u.mode?256:0),(0===_&&0===S||4===n)&&0===T&&(T=-5),T)},e.inflateEnd=function t(e){if(!e||!e.state)return -2;let n=e.state;return n.window&&(n.window=null),e.state=null,0},e.inflateGetHeader=function t(e,n){let i;return e&&e.state&&(2&(i=e.state).wrap)!=0?(i.head=n,n.done=!1,0):-2},e.inflateSetDictionary=function t(e,n){let i=n.length,o,s,c;return e&&e.state&&(0===(o=e.state).wrap||11===o.mode)?11===o.mode&&(s=r(s=1,n,i,0))!==o.check?-3:(c=m(e,n,i,i))?(o.mode=31,-4):(o.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e){"use strict";let n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let n=e.shift();if(n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(let i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};let i={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray){t.set(e.subarray(n,n+i),r);return}for(let o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){let e,n,i,r,o,s;for(e=0,i=0,n=t.length;e<n;e++)i+=t[e].length;for(e=0,s=new Uint8Array(i),r=0,n=t.length;e<n;e++)o=t[e],s.set(o,r),r+=o.length;return s}},r={arraySet:function(t,e,n,i,r){for(let o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,r))},e.setTyped(n)},function(t,e){"use strict";t.exports=function t(e,n,i,r){let o=65535&e|0,s=e>>>16&65535|0,c=0;for(;0!==i;){c=i>2e3?2e3:i,i-=c;do s=s+(o=o+n[r++]|0)|0;while(--c);o%=65521,s%=65521}return o|s<<16|0}},function(t,e){"use strict";let n=function t(){let e,n=[];for(let i=0;i<256;i++){e=i;for(let r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[i]=e}return n}();t.exports=function t(e,i,r,o){let s=n,c=o+r;e^=-1;for(let a=o;a<c;a++)e=e>>>8^s[(e^i[a])&255];return -1^e}},function(t,e){"use strict";t.exports=function t(e,n){let i,r,o,s,c,a,u,l,f,h,p,d,y,$,g,m,w,_,S,b,E,v,k,I,F;i=e.state,r=e.next_in,I=e.input,o=r+(e.avail_in-5),s=e.next_out,F=e.output,c=s-(n-e.avail_out),a=s+(e.avail_out-257),u=i.dmax,l=i.wsize,f=i.whave,h=i.wnext,p=i.window,d=i.hold,y=i.bits,$=i.lencode,g=i.distcode,m=(1<<i.lenbits)-1,w=(1<<i.distbits)-1;top:do{y<15&&(d+=I[r++]<<y,y+=8,d+=I[r++]<<y,y+=8),_=$[d&m];dolen:for(;;){if(d>>>=S=_>>>24,y-=S,0==(S=_>>>16&255))F[s++]=65535&_;else if(16&S){b=65535&_,(S&=15)&&(y<S&&(d+=I[r++]<<y,y+=8),b+=d&(1<<S)-1,d>>>=S,y-=S),y<15&&(d+=I[r++]<<y,y+=8,d+=I[r++]<<y,y+=8),_=g[d&w];dodist:for(;;){if(d>>>=S=_>>>24,y-=S,16&(S=_>>>16&255)){if(E=65535&_,y<(S&=15)&&(d+=I[r++]<<y,(y+=8)<S&&(d+=I[r++]<<y,y+=8)),(E+=d&(1<<S)-1)>u){e.msg="invalid distance too far back",i.mode=30;break top}if(d>>>=S,y-=S,E>(S=s-c)){if((S=E-S)>f&&i.sane){e.msg="invalid distance too far back",i.mode=30;break top}if(v=0,k=p,0===h){if(v+=l-S,S<b){b-=S;do F[s++]=p[v++];while(--S);v=s-E,k=F}}else if(h<S){if(v+=l+h-S,(S-=h)<b){b-=S;do F[s++]=p[v++];while(--S);if(v=0,h<b){b-=S=h;do F[s++]=p[v++];while(--S);v=s-E,k=F}}}else if(v+=h-S,S<b){b-=S;do F[s++]=p[v++];while(--S);v=s-E,k=F}for(;b>2;)F[s++]=k[v++],F[s++]=k[v++],F[s++]=k[v++],b-=3;b&&(F[s++]=k[v++],b>1&&(F[s++]=k[v++]))}else{v=s-E;do F[s++]=F[v++],F[s++]=F[v++],F[s++]=F[v++],b-=3;while(b>2);b&&(F[s++]=F[v++],b>1&&(F[s++]=F[v++]))}}else if((64&S)==0){_=g[(65535&_)+(d&(1<<S)-1)];continue dodist}else{e.msg="invalid distance code",i.mode=30;break top}break}}else if((64&S)==0){_=$[(65535&_)+(d&(1<<S)-1)];continue dolen}else if(32&S){i.mode=12;break top}else{e.msg="invalid literal/length code",i.mode=30;break top}break}}while(r<o&&s<a);r-=b=y>>3,y-=b<<3,d&=(1<<y)-1,e.next_in=r,e.next_out=s,e.avail_in=r<o?5+(o-r):5-(r-o),e.avail_out=s<a?257+(a-s):257-(s-a),i.hold=d,i.bits=y}},function(t,e,n){"use strict";let i=n(33),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function t(e,n,a,u,l,f,h,p){let d=p.bits,y=0,$=0,g=0,m=0,w=0,_=0,S=0,b=0,E=0,v=0,k,I,F,x,N,L=null,R=0,O,T=new i.Buf16(16),D=new i.Buf16(16),A=null,P=0,C,U,M;for(y=0;y<=15;y++)T[y]=0;for($=0;$<u;$++)T[n[a+$]]++;for(m=15,w=d;m>=1&&0===T[m];m--);if(w>m&&(w=m),0===m)return l[f++]=20971520,l[f++]=20971520,p.bits=1,0;for(g=1;g<m&&0===T[g];g++);for(w<g&&(w=g),b=1,y=1;y<=15;y++)if(b<<=1,(b-=T[y])<0)return -1;if(b>0&&(0===e||1!==m))return -1;for(y=1,D[1]=0;y<15;y++)D[y+1]=D[y]+T[y];for($=0;$<u;$++)0!==n[a+$]&&(h[D[n[a+$]]++]=$);if(0===e?(L=A=h,O=19):1===e?(L=r,R-=257,A=o,P-=257,O=256):(L=s,A=c,O=-1),v=0,$=0,y=g,N=f,_=w,S=0,F=-1,x=(E=1<<w)-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){C=y-S,h[$]<O?(U=0,M=h[$]):h[$]>O?(U=A[P+h[$]],M=L[R+h[$]]):(U=96,M=0),k=1<<y-S,g=I=1<<_;do l[N+(v>>S)+(I-=k)]=C<<24|U<<16|M|0;while(0!==I);for(k=1<<y-1;v&k;)k>>=1;if(0!==k?(v&=k-1,v+=k):v=0,$++,0==--T[y]){if(y===m)break;y=n[a+h[$]]}if(y>w&&(v&x)!==F){for(0===S&&(S=w),N+=g,b=1<<(_=y-S);_+S<m&&!((b-=T[_+S])<=0);)_++,b<<=1;if(E+=1<<_,1===e&&E>852||2===e&&E>592)return 1;l[F=v&x]=w<<24|_<<16|N-f|0}}return 0!==v&&(l[N+v]=y-S<<24|4194304),p.bits=w,0}},function(t,e,n){"use strict";let i=n(33),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(s){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(c){o=!1}let a=new i.Buf8(256);for(let u=0;u<256;u++)a[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;function l(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));let n="";for(let s=0;s<e;s++)n+=String.fromCharCode(t[s]);return n}a[254]=a[254]=1,e.string2buf=function(t){let e,n,r,o,s,c=t.length,a=0;for(o=0;o<c;o++)(64512&(n=t.charCodeAt(o)))==55296&&o+1<c&&(64512&(r=t.charCodeAt(o+1)))==56320&&(n=65536+(n-55296<<10)+(r-56320),o++),a+=n<128?1:n<2048?2:n<65536?3:4;for(s=0,e=new i.Buf8(a),o=0;s<a;o++)(64512&(n=t.charCodeAt(o)))==55296&&o+1<c&&(64512&(r=t.charCodeAt(o+1)))==56320&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){let e=new i.Buf8(t.length);for(let n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){let n,i,r,o,s=e||t.length,c=Array(2*s);for(i=0,n=0;n<s;){if((r=t[n++])<128){c[i++]=r;continue}if((o=a[r])>4){c[i++]=65533,n+=o-1;continue}for(r&=2===o?31:3===o?15:7;o>1&&n<s;)r=r<<6|63&t[n++],o--;if(o>1){c[i++]=65533;continue}r<65536?c[i++]=r:(r-=65536,c[i++]=55296|r>>10&1023,c[i++]=56320|1023&r)}return l(c,i)},e.utf8border=function(t,e){let n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&(192&t[n])==128;)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}},function(t,e){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){"use strict";t.exports=function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e){"use strict";t.exports=function t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}])});