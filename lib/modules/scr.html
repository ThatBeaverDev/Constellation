<body>
    <div id="display">

    </div>
</body>

<script>
    class UIElem {
        constructor(id) {
            this.style = {}
            this.id = id
            this.inner = undefined
        }

        restyle() {

        }

        export() {
            return "<p>No display method was assigned for this element type.</p>";
        }
    }

    class UIText extends UIElem {

        constructor(id, text, stylesOBJ = {}) {
            super(id)
            this.inner = text;
            this.type = "UIText";
            this.styles = stylesOBJ
        }

        export() {
            let styles = ""

            for (const i in this.styles) {
                const val = this.styles[i]
                switch(i) {
                    case "size":
                        styles += "font-size: " + val + "px;"
                        break;
                }
            }

            return `<p class="${this.type}" id="${this.id}" style="${styles}">${this.inner}</p>`
        }
    }

    class UIButton extends UIElem {
        constructor(id, text, code) {
            super(id);

            this.inner = text;
            this.type = "UIButton";
        }

        export() {
            return `<button class="${this.type} id="${this.id}">${this.inner}</button>`
        }
    }

    class UITextbox extends UIElem {
        constructor(id, text, stylesOBJ = {}) {
            super(id);

            this.inner = text;
            this.type = "UIButton";
        }
        
        export() {
            let styles = ""

            for (const i in this.styles) {
                const val = this.styles[i]
                switch(i) {
                    case "width":
                        styles += "width:" + val + "px;"
                        break;
                    case "center":
                        if (val === true) {
                            styles += "horizontal-align: middle;"
                        }
                }
            }
            return `<textarea class="${this.type} id="${this.id}"">${this.inner}</textarea>`
        }
    }

    class UIContainer extends UIElem {

        constructor(id, inner = []) {
            super(id)

            this.inner = inner;
            this.type = "UIContainer";
        }

        addChild(child) {
            if (typeof child !== "object") {
                throw new Error("UIError: Child Elements must be of UI element derivative's type.")
            }

            this.inner.push(child)
        }

        export() {
            let html = `<div class="${this.type}" id="${this.id}">`;

            for (const i in this.inner) {
                html += this.inner[i].export()
            }

            for (const i in this.inner) {
                const child = this.inner[i]
            }

            html += "</div>";

            return html
        }

        getElem(id) {
            for (const i in this.inner) {
                const item = this.inner[i]

                if (item.id == id) {
                    return item
                }


                if (typeof item.inner == "object") {
                    const there = item.getElem(id)

                    if (there !== null) {
                        return there
                    }
                }

            }
            return null
        }
    }


    class UISidebar extends UIContainer {
        constructor(id, inner) {
            super("sidebar_" + id, inner)

            this.type = "UISidebar"
        }
    }

    class UIMain extends UIContainer {
        constructor(id, inner) {
            super("main_" + id, inner)

            this.type = "UIMain"
        }
    }


    class UIPage extends UIContainer {

        constructor(pageName, inner) {
            super(pageName, inner)
            this.type = "UIPage"
        }
    };

    function displayUI(ui) {
        const html = ui.export()


    }

    window.ui = {
        page: UIPage,
        container: UIContainer,
        text: UIText
    }









    const u = new UIPage("main", [
        new UISidebar("primarySidebar", [
            new UIText("primarySidebarTopText", "Sidebar")
        ]),
        new UIMain("primaryBody", [
            new UIText("primaryBodyHeader", "Header", {
                size: 16
            }),
            new UIText("primaryBodyMain", "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.", {
                size: 10
            }),
            new UIButton("primaryBodyButton", "Lorem ipsum"),
            new UITextbox("primaryBodyTextbox", "", {
                center: false,
            }),
            new UITextbox("focusedOne", "FOCUS ME", {
                focus: true
            })
        ])
    ])

    const displayPort = document.getElementById("display");
    displayPort.innerHTML = u.export()

    window.abababab = u

    console.log(displayPort.innerHTML)

    console.log(u)
</script>

<style>
    .UIContainer, .UISidebar, .UISidebar, .UIMain {
        padding: 5px;
        margin: 0px;
    }

    .UIPage {
        display: flex;
        flex-direction: row;
        
        width: 100%;
        height: 100%;
        
        position: absolute;
        top: 0px;
        left: 0px;
    }

    .UISidebar {
        height: 100%;
    }

    .UIMain {
        height: 100%;
    }

    .UIButton {
        background-color: rgb(230, 230, 230);
        padding: 5px;
        border: none;
        border-radius: 5px;
    }

    .UIButton:active {
        background-color: rgb(200, 200, 200);
    }
</style>